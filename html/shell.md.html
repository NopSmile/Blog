<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>shell</title>
      <style>body { padding: 0; margin: 0; }
.markdown-preview-plus-view:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(197, 200, 198); background-color: rgb(29, 31, 33); overflow: auto; }
.markdown-preview-plus-view:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview-plus-view:not([data-use-github-style]) h1, .markdown-preview-plus-view:not([data-use-github-style]) h2, .markdown-preview-plus-view:not([data-use-github-style]) h3, .markdown-preview-plus-view:not([data-use-github-style]) h4, .markdown-preview-plus-view:not([data-use-github-style]) h5, .markdown-preview-plus-view:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(255, 255, 255); }
.markdown-preview-plus-view:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview-plus-view:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview-plus-view:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview-plus-view:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview-plus-view:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview-plus-view:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview-plus-view:not([data-use-github-style]) strong { color: rgb(255, 255, 255); }
.markdown-preview-plus-view:not([data-use-github-style]) del { color: rgb(155, 160, 157); }
.markdown-preview-plus-view:not([data-use-github-style]) a, .markdown-preview-plus-view:not([data-use-github-style]) a code { color: rgb(255, 255, 255); }
.markdown-preview-plus-view:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview-plus-view:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview-plus-view:not([data-use-github-style]) > ul, .markdown-preview-plus-view:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview-plus-view:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(155, 160, 157); border-color: rgb(67, 72, 76); border-width: 4px; }
.markdown-preview-plus-view:not([data-use-github-style]) hr { margin: 3em 0px; border-top: 2px dashed rgb(67, 72, 76); background: none; }
.markdown-preview-plus-view:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview-plus-view:not([data-use-github-style]) th { color: rgb(255, 255, 255); }
.markdown-preview-plus-view:not([data-use-github-style]) th, .markdown-preview-plus-view:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(67, 72, 76); }
.markdown-preview-plus-view:not([data-use-github-style]) pre, .markdown-preview-plus-view:not([data-use-github-style]) code { color: rgb(255, 255, 255); background-color: rgb(48, 51, 55); }
.markdown-preview-plus-view:not([data-use-github-style]) pre, .markdown-preview-plus-view:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(39, 41, 44); }
.markdown-preview-plus-view:not([data-use-github-style]) kbd { color: rgb(255, 255, 255); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(67, 72, 76) rgb(67, 72, 76) rgb(53, 57, 60); border-image: initial; background-color: rgb(48, 51, 55); }
.markdown-preview-plus-view[data-use-github-style] { font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); overflow: auto; }
.markdown-preview-plus-view[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview-plus-view[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview-plus-view[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview-plus-view[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview-plus-view[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview-plus-view[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview-plus-view[data-use-github-style] h1, .markdown-preview-plus-view[data-use-github-style] h2, .markdown-preview-plus-view[data-use-github-style] h3, .markdown-preview-plus-view[data-use-github-style] h4, .markdown-preview-plus-view[data-use-github-style] h5, .markdown-preview-plus-view[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview-plus-view[data-use-github-style] h1 .octicon-link, .markdown-preview-plus-view[data-use-github-style] h2 .octicon-link, .markdown-preview-plus-view[data-use-github-style] h3 .octicon-link, .markdown-preview-plus-view[data-use-github-style] h4 .octicon-link, .markdown-preview-plus-view[data-use-github-style] h5 .octicon-link, .markdown-preview-plus-view[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview-plus-view[data-use-github-style] h1:hover .anchor, .markdown-preview-plus-view[data-use-github-style] h2:hover .anchor, .markdown-preview-plus-view[data-use-github-style] h3:hover .anchor, .markdown-preview-plus-view[data-use-github-style] h4:hover .anchor, .markdown-preview-plus-view[data-use-github-style] h5:hover .anchor, .markdown-preview-plus-view[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview-plus-view[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview-plus-view[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview-plus-view[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview-plus-view[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview-plus-view[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview-plus-view[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview-plus-view[data-use-github-style] h1 tt, .markdown-preview-plus-view[data-use-github-style] h2 tt, .markdown-preview-plus-view[data-use-github-style] h3 tt, .markdown-preview-plus-view[data-use-github-style] h4 tt, .markdown-preview-plus-view[data-use-github-style] h5 tt, .markdown-preview-plus-view[data-use-github-style] h6 tt, .markdown-preview-plus-view[data-use-github-style] h1 code, .markdown-preview-plus-view[data-use-github-style] h2 code, .markdown-preview-plus-view[data-use-github-style] h3 code, .markdown-preview-plus-view[data-use-github-style] h4 code, .markdown-preview-plus-view[data-use-github-style] h5 code, .markdown-preview-plus-view[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview-plus-view[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview-plus-view[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview-plus-view[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview-plus-view[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview-plus-view[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview-plus-view[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview-plus-view[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview-plus-view[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview-plus-view[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview-plus-view[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview-plus-view[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview-plus-view[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview-plus-view[data-use-github-style] p, .markdown-preview-plus-view[data-use-github-style] blockquote, .markdown-preview-plus-view[data-use-github-style] ul, .markdown-preview-plus-view[data-use-github-style] ol, .markdown-preview-plus-view[data-use-github-style] dl, .markdown-preview-plus-view[data-use-github-style] table, .markdown-preview-plus-view[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview-plus-view[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; }
.markdown-preview-plus-view[data-use-github-style] ul, .markdown-preview-plus-view[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview-plus-view[data-use-github-style] ul.no-list, .markdown-preview-plus-view[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview-plus-view[data-use-github-style] ul ul, .markdown-preview-plus-view[data-use-github-style] ul ol, .markdown-preview-plus-view[data-use-github-style] ol ol, .markdown-preview-plus-view[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview-plus-view[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview-plus-view[data-use-github-style] dl { padding: 0px; }
.markdown-preview-plus-view[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview-plus-view[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview-plus-view[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); }
.markdown-preview-plus-view[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview-plus-view[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview-plus-view[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview-plus-view[data-use-github-style] table th { font-weight: bold; }
.markdown-preview-plus-view[data-use-github-style] table th, .markdown-preview-plus-view[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview-plus-view[data-use-github-style] table tr { background-color: rgb(255, 255, 255); border-top: 1px solid rgb(204, 204, 204); }
.markdown-preview-plus-view[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview-plus-view[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview-plus-view[data-use-github-style] .emoji { max-width: none; }
.markdown-preview-plus-view[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview-plus-view[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview-plus-view[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview-plus-view[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview-plus-view[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview-plus-view[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview-plus-view[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview-plus-view[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview-plus-view[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview-plus-view[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview-plus-view[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview-plus-view[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview-plus-view[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview-plus-view[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview-plus-view[data-use-github-style] code, .markdown-preview-plus-view[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; background-color: rgba(0, 0, 0, 0.04); border-radius: 3px; }
.markdown-preview-plus-view[data-use-github-style] code::before, .markdown-preview-plus-view[data-use-github-style] tt::before, .markdown-preview-plus-view[data-use-github-style] code::after, .markdown-preview-plus-view[data-use-github-style] tt::after { letter-spacing: -0.2em; content: " "; }
.markdown-preview-plus-view[data-use-github-style] code br, .markdown-preview-plus-view[data-use-github-style] tt br { display: none; }
.markdown-preview-plus-view[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview-plus-view[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; background: transparent; border: 0px; }
.markdown-preview-plus-view[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview-plus-view[data-use-github-style] .highlight pre, .markdown-preview-plus-view[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border-radius: 3px; }
.markdown-preview-plus-view[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview-plus-view[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview-plus-view[data-use-github-style] pre code, .markdown-preview-plus-view[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0px; }
.markdown-preview-plus-view[data-use-github-style] pre code::before, .markdown-preview-plus-view[data-use-github-style] pre tt::before, .markdown-preview-plus-view[data-use-github-style] pre code::after, .markdown-preview-plus-view[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview-plus-view[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; background-color: rgb(252, 252, 252); border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-image: initial; border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; }
.markdown-preview-plus-view[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview-plus-view[data-use-github-style] pre, .markdown-preview-plus-view[data-use-github-style] code { color: inherit; }
.markdown-preview-plus-view[data-use-github-style] pre, .markdown-preview-plus-view[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.markdown-preview-plus-view { height: 100%; display: block; }
.markdown-preview-plus-view .emoji { max-width: 1em !important; }
.scrollbars-visible-always .markdown-preview-plus-view pre.editor-colors .vertical-scrollbar, .scrollbars-visible-always .markdown-preview-plus-view pre.editor-colors .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview-plus-view pre.editor-colors:hover .vertical-scrollbar, .scrollbars-visible-always .markdown-preview-plus-view pre.editor-colors:hover .horizontal-scrollbar { visibility: visible; }
.markdown-preview-plus-view del { text-decoration: none; position: relative; }
.markdown-preview-plus-view del::after { border-bottom: 1px solid black; content: ""; left: 0px; position: absolute; right: 0px; top: 50%; }
.markdown-preview-plus-view .flash { animation: flash 1s ease-out 1; outline: rgba(255, 0, 0, 0) solid 1px; }
.markdown-preview-plus-view .flash:not(li) { display: block; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}
.line-number.bracket-matcher.bracket-matcher {
  color: #c5c8c6;
  background-color: #373b41;
}

.spell-check-misspelling .region {
  border-bottom: 2px dotted rgba(255, 51, 51, 0.75);
}
.spell-check-corrections {
  width: 25em !important;
}

pre.editor-colors {
  background-color: #1d1f21;
  color: #c5c8c6;
}
pre.editor-colors .wrap-guide {
  background-color: #676a6c;
}
pre.editor-colors .indent-guide {
  color: #676a6c;
}
pre.editor-colors .invisible-character {
  color: #676a6c;
}
pre.editor-colors .gutter {
  background-color: #1d1f21;
  color: #969896;
}
pre.editor-colors .gutter .line-number {
  padding: 0 0.25em 0 0.5em;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.cursor-line {
  background-color: #373b41;
  color: #c5c8c6;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection {
  color: #c5c8c6;
}
pre.editor-colors .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
pre.editor-colors .fold-marker:after {
  color: #969896;
}
pre.editor-colors .invisible {
  color: #c5c8c6;
}
pre.editor-colors .cursor {
  color: #ffffff;
}
pre.editor-colors .selection .region {
  background-color: #373b41;
}
pre.editor-colors .bracket-matcher .region {
  border-color: #969896;
}
.syntax--comment {
  color: #969896;
}
.syntax--comment .syntax--markup.syntax--link {
  color: #969896;
}
.syntax--entity.syntax--name.syntax--type {
  color: #f0c674;
}
.syntax--entity.syntax--other.syntax--inherited-class {
  color: #b5bd68;
}
.syntax--keyword {
  color: #b294bb;
}
.syntax--keyword.syntax--control {
  color: #b294bb;
}
.syntax--keyword.syntax--operator {
  color: #c5c8c6;
}
.syntax--keyword.syntax--other.syntax--special-method {
  color: #81a2be;
}
.syntax--keyword.syntax--other.syntax--unit {
  color: #de935f;
}
.syntax--storage {
  color: #b294bb;
}
.syntax--constant {
  color: #de935f;
}
.syntax--constant.syntax--character.syntax--escape {
  color: #8abeb7;
}
.syntax--constant.syntax--numeric {
  color: #de935f;
}
.syntax--constant.syntax--other.syntax--color {
  color: #8abeb7;
}
.syntax--constant.syntax--other.syntax--symbol {
  color: #b5bd68;
}
.syntax--variable {
  color: #cc6666;
}
.syntax--variable.syntax--interpolation {
  color: #a3685a;
}
.syntax--variable.syntax--parameter.syntax--function {
  color: #c5c8c6;
}
.syntax--invalid.syntax--illegal {
  background-color: #cc6666;
  color: #1d1f21;
}
.syntax--string {
  color: #b5bd68;
}
.syntax--string.syntax--regexp {
  color: #8abeb7;
}
.syntax--string.syntax--regexp .syntax--source.syntax--ruby.syntax--embedded {
  color: #f0c674;
}
.syntax--string.syntax--other.syntax--link {
  color: #cc6666;
}
.syntax--punctuation.syntax--definition.syntax--parameters,
.syntax--punctuation.syntax--definition.syntax--array {
  color: #c5c8c6;
}
.syntax--punctuation.syntax--definition.syntax--heading,
.syntax--punctuation.syntax--definition.syntax--identity {
  color: #81a2be;
}
.syntax--punctuation.syntax--definition.syntax--bold {
  color: #f0c674;
  font-weight: bold;
}
.syntax--punctuation.syntax--definition.syntax--italic {
  color: #b294bb;
  font-style: italic;
}
.syntax--punctuation.syntax--section.syntax--embedded {
  color: #a3685a;
}
.syntax--punctuation.syntax--section.syntax--method,
.syntax--punctuation.syntax--section.syntax--class,
.syntax--punctuation.syntax--section.syntax--inner-class {
  color: #c5c8c6;
}
.syntax--support.syntax--class {
  color: #f0c674;
}
.syntax--support.syntax--function {
  color: #8abeb7;
}
.syntax--support.syntax--function.syntax--any-method {
  color: #81a2be;
}
.syntax--entity.syntax--name.syntax--function {
  color: #81a2be;
}
.syntax--entity.syntax--name.syntax--class,
.syntax--entity.syntax--name.syntax--type.syntax--class {
  color: #f0c674;
}
.syntax--entity.syntax--name.syntax--section {
  color: #81a2be;
}
.syntax--entity.syntax--name.syntax--tag {
  color: #cc6666;
}
.syntax--entity.syntax--other.syntax--attribute-name {
  color: #de935f;
}
.syntax--entity.syntax--other.syntax--attribute-name.syntax--id {
  color: #81a2be;
}
.syntax--meta.syntax--class {
  color: #f0c674;
}
.syntax--meta.syntax--class.syntax--body {
  color: #c5c8c6;
}
.syntax--meta.syntax--link {
  color: #de935f;
}
.syntax--meta.syntax--method-call,
.syntax--meta.syntax--method {
  color: #c5c8c6;
}
.syntax--meta.syntax--require {
  color: #81a2be;
}
.syntax--meta.syntax--selector {
  color: #b294bb;
}
.syntax--meta.syntax--separator {
  background-color: #373b41;
  color: #c5c8c6;
}
.syntax--meta.syntax--tag {
  color: #c5c8c6;
}
.syntax--none {
  color: #c5c8c6;
}
.syntax--markup.syntax--bold {
  color: #de935f;
  font-weight: bold;
}
.syntax--markup.syntax--changed {
  color: #b294bb;
}
.syntax--markup.syntax--deleted {
  color: #cc6666;
}
.syntax--markup.syntax--italic {
  color: #b294bb;
  font-style: italic;
}
.syntax--markup.syntax--heading {
  color: #cc6666;
}
.syntax--markup.syntax--heading .syntax--punctuation.syntax--definition.syntax--heading {
  color: #81a2be;
}
.syntax--markup.syntax--link {
  color: #81a2be;
}
.syntax--markup.syntax--inserted {
  color: #b5bd68;
}
.syntax--markup.syntax--quote {
  color: #de935f;
}
.syntax--markup.syntax--raw {
  color: #b5bd68;
}
.syntax--source.syntax--gfm .syntax--markup {
  -webkit-font-smoothing: auto;
}
.syntax--source.syntax--gfm .syntax--link .syntax--entity {
  color: #8abeb7;
}
.syntax--source.syntax--cs .syntax--keyword.syntax--operator {
  color: #b294bb;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--string.syntax--quoted.syntax--json {
  color: #cc6666;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation.syntax--string {
  color: #cc6666;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation {
  color: #b5bd68;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--constant.syntax--language.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--constant.syntax--language.syntax--json {
  color: #8abeb7;
}

pre.editor-colors { overflow: auto; }</style>
  </head>
  <body class="markdown-preview-plus-view">
    <h2>统计网络连接状态及数目</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>netstat -n</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>/^tcp/ {++state[$NF]} END {for(i in state) print i, state[i]}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
</pre>
<h2>统计进程打开的文件句柄数目</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>lsof -p PID</span></span>
<span class="syntax--source syntax--shell"><span>lsof -p PID</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>wc -l</span></span>
</pre>
<h2>awk getline: 过滤行、改变奇数偶数行</h2>
<h3>打印出从 1 到 10 之间的偶数</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>seq 10</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{getline; print $0}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
</pre>
<h3>打印出从 1 到 10 之前的奇数</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>seq 10</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $0; getline}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
</pre>
<h3>交换奇数、偶数行</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>seq 10</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{getline tmp; print tmp; print $0}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
</pre>
<h2>for 循环的常用写法</h2>
<h3>数值类型</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> i = i*3+1</span></span></span>
<span class="syntax--source syntax--shell"><span>for</span><span class="syntax--string syntax--other syntax--math syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>((</span></span><span>i</span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--shell"><span>=</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--shell"><span>1</span></span><span>; i</span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--shell"><span>&lt;=</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--shell"><span>10</span></span><span>; i</span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--shell"><span>++</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>))</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span>
<span class="syntax--source syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--dollar syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>$(</span></span><span>expr </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>i</span></span><span> </span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\*</span></span><span>3 + 1</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>)</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span>
</pre>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>i</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--dollar syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>$(</span></span><span>seq 1 10</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>)</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--dollar syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>$(</span></span><span>expr </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>i</span></span><span> </span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\*</span></span><span> 3 + 1</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>)</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
</pre>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>i</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> {1..10}</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--dollar syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>$(</span></span><span>expr </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>i</span></span><span> </span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\*</span></span><span> 3 + 1</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>)</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
</pre>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>BEGIN {for(i=1; i&lt;=10; i++) print i}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
</pre>
<h3>字符串类型</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>i</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>ls</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>i</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
</pre>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>i</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>*</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>i</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
</pre>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>i</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> f1 f2 f3</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>i</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
</pre>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>list=</span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>rootfs usr data</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>i</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>list</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>i</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
</pre>
<h2>分割、合并大文件</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 按照指定行数分割</span></span></span>
<span class="syntax--source syntax--shell"><span>split -l 500 large_file.log new_file_prefix</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 按照文件大小分割</span></span></span>
<span class="syntax--source syntax--shell"><span>split -b 100m large_file.log new_file_prefix</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 使用 cat 进行文件合并</span></span></span>
<span class="syntax--source syntax--shell"><span>cat new_file_prefix</span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> large_file.log</span></span>
</pre>
<h2>检查 IPv4 地址合法性</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--entity syntax--name syntax--function syntax--shell"><span>CheckIPAddr</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--shell"><span>()</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>{</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--whitespace syntax--comment syntax--leading syntax--shell"><span>    </span></span><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> IP地址必须为全数字</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>^[0-9]\{1,3\}\.\([0-9]\{1,3\}\.\)\{2\}[0-9]\{1,3\}$</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /dev/null</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>?</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> 0 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--keyword syntax--control syntax--shell"><span>return</span></span><span> 1</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    ipaddr=</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    a=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>echo </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>ipaddr</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> awk -F </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $1}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span><span>  </span><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 以"."分隔，取出每个列的值</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    b=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>echo </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>ipaddr</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> awk -F </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $2}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    c=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>echo </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>ipaddr</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> awk -F </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $3}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    d=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>echo </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>ipaddr</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> awk -F </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $4}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>num</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>a</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>b</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>c</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>d</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>        </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>num</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-gt</span></span><span> 255 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span> </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span><span>|</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>num</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-lt</span></span><span> 0 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--keyword syntax--control syntax--shell"><span>return</span></span><span> 1</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>return</span></span><span> 0</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>}</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 调用</span></span></span>
<span class="syntax--source syntax--shell"><span>CheckIPAddr 192.168.1.1</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>?</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> 0 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>invalid</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
</pre>
<h2>替换文件中所有 \r</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>sed -i </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>s/\r//g</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span> FILE</span></span>
</pre>
<h2>检查进程是否重启</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shebang syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shebang syntax--shell"><span>#!</span></span><span>/bin/bash</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>#</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> 1 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>Usage: [Process Name]</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 0</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>PID=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>ps afx</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep -v </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>grep</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep -v </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>/bin/bash</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>head -n 1</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $1}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>while</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> 1 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>    PID2=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>ps afx</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep -v </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>grep</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep -v </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>/bin/bash</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>head -n 1</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $1}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>    </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID2</span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>!</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID</span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            PID=</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID2</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>PID: </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID2</span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>                </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>Server is reboot, PID: </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID</span></span><span> --&gt; </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID2</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>                PID=</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID2</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>                </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>Server is running, PID: </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PID2</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>Server is not running</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>    sleep 1</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
</pre>
<h2>nohup 后台启动 java 进程</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>nohup java -classpath xxx_service_1.0.jar xxx_entry </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> xxx_service.log </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>2&gt;&amp;1</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>&amp;</span></span></span>
</pre>
<h2>获取进程号、杀进程</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>ps afx</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep 进程名</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep -v grep</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $1}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>xargs </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>kill</span></span><span> -9</span></span>
<span class="syntax--source syntax--shell"><span>pgrep 进程名</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>xargs </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>kill</span></span><span> -9</span></span>
<span class="syntax--source syntax--shell"><span>pidof 进程名</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>xargs </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>kill</span></span><span> -9</span></span>
<span class="syntax--source syntax--shell"><span>pkill -9 进程名</span></span>
<span class="syntax--source syntax--shell"><span>killall -9 进程名</span></span>
</pre>
<h2>查询、启动、停止服务</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 新管理方式，如 Cent OS &gt;= 7.x</span></span></span>
<span class="syntax--source syntax--shell"><span>systemctl start/status/enable/disable/stop/restart xxx_service</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 旧管理方式，如 Cent OS &lt; 7.x</span></span></span>
<span class="syntax--source syntax--shell"><span>service xxx_service start/status/stop/restart</span></span>
</pre>
<h2>显示已经登录的用户、执行的命令</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 显示已经登录的用户以及正在执行的命令</span></span></span>
<span class="syntax--source syntax--shell"><span>w</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 示例</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> w</span></span>
<span class="syntax--source syntax--shell"><span> 18:27:34 up 89 days,  6:41,  6 users,  load average: 0.46, 0.46, 0.34</span></span>
<span class="syntax--source syntax--shell"><span>USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT</span></span>
<span class="syntax--source syntax--shell"><span>root     pts/1    172.13.30.133    14:30    3:56m  0.33s  0.33s -bash</span></span>
<span class="syntax--source syntax--shell"><span>kevin    pts/2    172.13.30.219    Thu08   19:14   3.06s  3.06s -bash</span></span>
<span class="syntax--source syntax--shell"><span>kevin    pts/5    172.13.30.219    17:48    0.00s  0.60s  0.01s w</span></span>
<span class="syntax--source syntax--shell"><span>root     pts/6    172.13.30.219    18:09   17:10   0.04s  0.04s -bash</span></span>
<span class="syntax--source syntax--shell"><span>kevin    pts/7    172.13.30.219    18:06   20:42   0.00s  0.00s -bash</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 显示已经登录的用户、登录的终端</span></span></span>
<span class="syntax--source syntax--shell"><span>who</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 示例</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> who</span></span>
<span class="syntax--source syntax--shell"><span>root     pts/1        2018-03-27 14:30 </span><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>172.13.30.133</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span>
<span class="syntax--source syntax--shell"><span>kevin    pts/2        2018-03-22 08:09 </span><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>172.13.30.219</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span>
<span class="syntax--source syntax--shell"><span>root     pts/3        2018-03-27 14:31 </span><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>172.13.30.133</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span>
<span class="syntax--source syntax--shell"><span>kevin    pts/5        2018-03-27 17:48 </span><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>172.13.30.219</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span>
<span class="syntax--source syntax--shell"><span>root     pts/6        2018-03-27 18:09 </span><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>172.13.30.219</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span>
<span class="syntax--source syntax--shell"><span>kevin    pts/7        2018-03-27 18:06 </span><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>172.13.30.219</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span>
</pre>
<h2>添加定时任务</h2>
<h3>at 定时任务</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 示例：添加一个 1 分钟之后执行的任务，按 Ctrl + D 退出</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> at now +1 minutes</span></span>
<span class="syntax--source syntax--shell"><span>at</span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> hello </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--tilde syntax--shell"><span>~</span></span><span>/at.log</span></span>
<span class="syntax--source syntax--shell"><span>at</span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&lt;</span></span><span>EOT</span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span></span>
<span class="syntax--source syntax--shell"><span>job 6 at 2018-03-27 19:20</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 示例：查询所有 at 任务</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> atq</span></span>
<span class="syntax--source syntax--shell"><span>6       2018-03-27 19:20 a kevin</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 示例：删除 at 定时任务（6 位 job ID）</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> atrm 6</span></span>
</pre>
<h3>crontab 定时任务</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 添加定时任务</span></span></span>
<span class="syntax--source syntax--shell"><span>crontab -e</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 查询所有 crontab 任务</span></span></span>
<span class="syntax--source syntax--shell"><span>crontab -l</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 示例</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> Example of job definition:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> .---------------- minute (0 - 59)</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> |  .------------- hour (0 - 23)</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> |  |  .---------- day of month (1 - 31)</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> sun,mon,tue,wed,thu,fri,sat</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> |  |  |  |  |</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> *  *  *  *  * user-name command to be executed</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 每个小时第 05 分执行同步系统时间、硬件时钟</span></span></span>
<span class="syntax--source syntax--shell"><span>05 </span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span><span>/1 </span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span><span> rdate -t 30 -s time.nist.gov </span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>&amp;&amp;</span></span><span> /usr/sbin/hwclock -w</span></span>
</pre>
<h2>watch 持续监视命令的执行情况</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 每隔 3s，打印一次指定端口 9999 处于连接已建立的连接数目</span></span></span>
<span class="syntax--source syntax--shell"><span>watch -n 3 </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>netstat -anp|grep 9999|wc -l</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
</pre>
<h2>TCP/UDP 收发数据、探测端口是否打开</h2>
<h3>nc</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 监听 1234</span></span></span>
<span class="syntax--source syntax--shell"><span>nc -l 1234</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 连接 1234</span></span></span>
<span class="syntax--source syntax--shell"><span>nc 127.0.0.1 1234</span></span>
</pre>
<h3>telnet</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>telnet 127.0.0.1 1234</span></span>
</pre>
<h2>逐行读取文件</h2>
<h3>while 循环</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>while</span></span><span> </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>read</span></span><span> LINE</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>LINE</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&lt;</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>FILE</span></span></span>
</pre>
<h3>重定向法（管道法）</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>cat </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>FILE</span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>while </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>read</span></span><span> LINE</span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span>
<span class="syntax--source syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>LINE</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span>
</pre>
<h3>文件描述符法</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 如下两个操作可合并</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> exec 3&lt;&amp;0 exec 0&lt;$FILE</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exec</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>3&lt;</span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>&amp;</span></span><span>0</span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exec</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>0&lt;</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>FILE</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>while</span></span><span> </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>read</span></span><span> LINE</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>LINE</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exec</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>0&lt;</span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>&amp;</span></span><span>3</span></span>
</pre>
<h3>for 循环</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>LINE</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>cat </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>FILE</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>LINE</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
</pre>
<h2>如何解决 Linux Error: No space left on device</h2>
<h3>判断磁盘空间是否满，inode 是否耗尽</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>df -h</span></span>
<span class="syntax--source syntax--shell"><span>df -i</span></span>
</pre>
<h3>查找大文件</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 按照大小降序排列（取出前 10 个大文件）</span></span></span>
<span class="syntax--source syntax--shell"><span>du -sh target.dir</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>sort -n</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>head</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 查找目录下大于 1M 且小于 10M 的文件</span></span></span>
<span class="syntax--source syntax--shell"><span>find  target.dir -size +1M -size -10M -type f -name </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>*.jpg</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 指定查询目录层级</span></span></span>
<span class="syntax--source syntax--shell"><span>du -h --max-depth=1</span></span>
</pre>
<h3>查找访问某个目录的进程</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>lsof +d /tmp</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 示例</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> lsof +d </span><span class="syntax--keyword syntax--operator syntax--tilde syntax--shell"><span>~</span></span><span>/blog/</span></span>
<span class="syntax--source syntax--shell"><span>COMMAND   PID  USER   FD   TYPE DEVICE SIZE/OFF    NODE NAME</span></span>
<span class="syntax--source syntax--shell"><span>bash     6936 kevin  cwd    DIR  253,2     4096 3675368 /home/kevin/blog</span></span>
<span class="syntax--source syntax--shell"><span>vim     24969 kevin  cwd    DIR  253,2     4096 3675368 /home/kevin/blog</span></span>
<span class="syntax--source syntax--shell"><span>vim     24969 kevin    4u   REG  253,2    20480 3675605 /home/kevin/blog/.SHELL.md.swp</span></span>
</pre>
<h3>删除文件（少量）</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>find /tmp -type f -exec rm {} </span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\;</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 注意：xargs 默认是以空白字符（空格，TAB，换行符）来分割记录的，如果文件名中间有空格，例如 /tmp/file 1.log，</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 此时自动被当做两个文件 /tmp/file 与 1.log，执行命令报错：No such file or directory</span></span></span>
<span class="syntax--source syntax--shell"><span>find -name </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>*.log</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span> -print0</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>xargs -0 rm</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 可能存在大小为 0 字节的空文件，同样也会占用 inode</span></span></span>
<span class="syntax--source syntax--shell"><span>find /tmp -type f -size 0 -exec rm {} </span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\;</span></span></span>
</pre>
<h3>删除文件（大量）</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 先建立一个空目录</span></span></span>
<span class="syntax--source syntax--shell"><span>mkdir /data/blank</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 用 rsync 删除目标目录</span></span></span>
<span class="syntax--source syntax--shell"><span>rsync --delete-before -d /data/blank/ /tmp/</span></span>
</pre>
<h3>删除大文件</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>cat /dev/null </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> target.file</span></span>
</pre>
<h2>查找指定范围内的日志信息</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 查找时间范围 2018/03/28 05:00:00 ~ 2018/03/28 07:59:59 的所有日志</span></span></span>
<span class="syntax--source syntax--shell"><span>sed -n </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>#2018/03/28 05:[0-9][0-9]:[0-9][0-9]#,#2018/03/28 07:[0-9][0-9]:[0-9][0-9]#p</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span> log</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 查找 2018-03-29 00:24:00 ~ 2018-03-29 00:25:59 的所有日志</span></span></span>
<span class="syntax--source syntax--shell"><span>cat log</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep  -E </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>2018-03-29 00:2[4-5]:[0-9][0-9]</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
</pre>
<h2>tr 字符进行替换、压缩和删除</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 将输入字符由大写转换为小写</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>Hello World</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>tr </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>a-z</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>A-Z</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
<span class="syntax--source syntax--shell"><span>HELLO WORLD</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 删除字符</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>hello 123 world 456</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>tr -d </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>0-9</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
<span class="syntax--source syntax--shell"><span>hello world</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 将制表符转换为空格</span></span></span>
<span class="syntax--source syntax--shell"><span>cat text</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>tr </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>\t</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 将不在指定字符集合中的所有字符删除</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>aa.,a 1 b#</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>bb</span></span><span> 2 c*/cc 3 ddd 4</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>tr -d -c </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>0-9 \n</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
<span class="syntax--source syntax--shell"><span>1 2 3 4</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 去掉重复的字符</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>hell   oooo wwwworld</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>tr -d </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span> ow</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
<span class="syntax--source syntax--shell"><span>hello world</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 数字相加操作</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> seq 100</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>xargs -n1</span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>echo $</span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--dollar syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>$(</span></span><span>tr </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>\n</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>+</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>)</span></span></span><span>0 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span></span>
<span class="syntax--source syntax--shell"><span>5050</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> 取出 mac 地址，去掉冒号，转换为大写</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>2018/03/29 16:00:22 bc:ec:29:39:d4:2f online</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>awk -F </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $3}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>tr  </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>a-z</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span> </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>A-Z</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>tr -d </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>:</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span></span>
<span class="syntax--source syntax--shell"><span>BCEC2939D42F</span></span>
</pre>
<h2>编译、打包脚本</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shebang syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shebang syntax--shell"><span>#!</span></span><span>/bin/sh</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--entity syntax--name syntax--function syntax--shell"><span>usage</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--shell"><span>()</span></span><span> </span><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>{</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>usage: </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>0</span></span><span> &lt;Ver&gt; &lt;Env&gt;</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>  Option:</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>      Ver     consist of 4 parts, i.e. 1.0.1.0</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>      Env     [dev|test|prod]</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>}</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> Return: 0, valid; 1, invalid</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--entity syntax--name syntax--function syntax--shell"><span>check_env</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--shell"><span>()</span></span><span> </span><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>{</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    envs=</span><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>dev test prod</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>env</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>envs</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>        </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[[</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>==</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>env</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--keyword syntax--control syntax--shell"><span>return</span></span><span> 0</span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>return</span></span><span> 1</span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>}</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>#</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> 2 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    usage</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>check_env </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>2</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>?</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>!=</span></span><span> 0 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>Option Env invalid, check again</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    usage</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>VERSION=</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span></span>
<span class="syntax--source syntax--shell"><span>ENV=</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>2</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] Version: </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>VERSION</span></span><span>, Environment: </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>ENV</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] clean all ...</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>cd</span></span><span> ..</span></span>
<span class="syntax--source syntax--shell"><span>find </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> -name cmake_install.cmake </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> xargs rm -rf</span></span>
<span class="syntax--source syntax--shell"><span>find </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> -name CMakeFiles </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> xargs rm -rf</span></span>
<span class="syntax--source syntax--shell"><span>find </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> -name CMakeCache.txt </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> xargs rm -rf</span></span>
<span class="syntax--source syntax--shell"><span>find </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> -name Makefile </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> xargs rm -rf</span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>cd</span></span><span> - </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /dev/null</span></span>
<span class="syntax--source syntax--shell"><span>ls -d </span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> grep -v make_release.sh </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> xargs rm -rf</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] compile all ...</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>cmake -DCMAKE_BUILD_TYPE=Release ..</span></span>
<span class="syntax--source syntax--shell"><span>make -j4</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] packing all ...</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>PKGNAME=xxx_access_</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>ENV</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\_</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>VERSION</span></span></span>
<span class="syntax--source syntax--shell"><span>PKGACCESS=</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span><span>/access</span></span>
<span class="syntax--source syntax--shell"><span>PKGPROXY=</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span><span>/proxy</span></span>
<span class="syntax--source syntax--shell"><span>PKGLOGGER=</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span><span>/logger</span></span>
<span class="syntax--source syntax--shell"><span>mkdir -p </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGLIB</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGACCESS</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGLOGGER</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGPROXY</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>cp -rP test/access/test_access </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGACCESS</span></span><span>/access</span></span>
<span class="syntax--source syntax--shell"><span>cp -rP ../test/access/access_cmd.sh </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGACCESS</span></span><span>/remote_access_client.sh</span></span>
<span class="syntax--source syntax--shell"><span>chmod +x </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGACCESS</span></span><span>/remote_access_client.sh</span></span>
<span class="syntax--source syntax--shell"><span>cp -rP test/logger_server/test_logger_server </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGLOGGER</span></span><span>/logger</span></span>
<span class="syntax--source syntax--shell"><span>cp -rP test/logger_server/test_logger_client </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGLOGGER</span></span><span>/client</span></span>
<span class="syntax--source syntax--shell"><span>cp -rP test/proxy/test_proxy </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGPROXY</span></span><span>/proxy</span></span>
<span class="syntax--source syntax--shell"><span>cp -rP test/proxy/test_client </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGPROXY</span></span><span>/client</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] generating default configuration file</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGACCESS</span></span><span>/default.conf </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>{</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "sub_topic" : "$ENV-access",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "pub_topic" : "$ENV-device_management_system",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "proxy_topic" : "$ENV-proxy",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "kafka_brokers" : "xxx.xxx.xxx.xxx:9092",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "oauth_server_addr" : "xxx.xxx.xxx.xxx",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "oauth_server_port" : 9006,</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "oauth_username" : "dbaccess",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "oauth_password" : "123456",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "listen_addr" : "xxx.xxx.xxx.xxx",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "listen_port" : 10999,</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "heartbeat_timeout" : 60,</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "http_listen_addr" : "xxx.xxx.xxx.xxx",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "http_listen_port" : 10086,</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "http_username" : "dbaccess",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "http_password" : "123456",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "enable_debug" : true,</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "reserved" : false</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>}</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGLOGGER</span></span><span>/default.conf </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>{</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "listen_port" : 10998</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>}</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGPROXY</span></span><span>/default.conf </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>{</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "sub_topic" : "$ENV-proxy",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "kafka_brokers" : "xxx.xxx.xxx.xxx:9092",</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "listen_port" : 12306,</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "active_timeout" : 15,</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "loadbalance_type": 1,</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "mac_rule": [</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>            "mac_set": [],</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>            "mac_instance_set": []</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    ],</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "ip_rule": [</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>            "ip_set": [],</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>            "ip_instance_set": []</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    ]</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>}</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] generating version info ...</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>COMMITID=</span><span class="syntax--string syntax--interpolated syntax--dollar syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>$(</span></span><span>git rev-list -1 HEAD</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>)</span></span></span></span>
<span class="syntax--source syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> VERSION </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>COMMIT ID: $COMMITID</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>VERSION  : $VERSION</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>dir</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--dollar syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>$(</span></span><span>find </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span><span> -mindepth 1 -maxdepth 1 -type d</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>)</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>cd</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>dir</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    md5sum </span><span class="syntax--string syntax--interpolated syntax--dollar syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>$(</span></span><span>find </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span><span> -type f</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>)</span></span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /tmp/MD5SUM</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    mv /tmp/MD5SUM </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    cp ../../VERSION </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>.</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>cd</span></span><span> - </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /dev/null</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
<span class="syntax--source syntax--shell"><span>rm -rf VERSION</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] generating ChangeLog</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>cp ../ChangeLog </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] generating INSTALL</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> INSTALL </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>===========================================================================</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>1. 接入服务 access</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>a. 修改配置文件</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>b. 配置防火墙，vim /etc/sysconfig/iptables 加入一条（以端口号 10999 为例）</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>-A INPUT -p tcp -m state --state NEW -m tcp --dport 10999 -j ACCEPT</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>c. 启动服务</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>./access -d -w --conf default.conf</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>===========================================================================</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>2. 接入代理服务 proxy</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>a. 修改配置文件</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>b. 配置防火墙，vim /etc/sysconfig/iptables 加入一条（以端口号 12306 为例）</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>-A INPUT -p tcp -m state --state NEW -m tcp --dport 12306 -j ACCEPT</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>c. 启动服务</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>./proxy -d -w --conf default.conf</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>===========================================================================</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>3. 网关日志服务 logger</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>a. 修改配置文件，最小配置只需要修改监听的端口号（listen_port）</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>注意：由于中控插件上传日志时，作为 logger 的客户端，因此，监听的端口</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>号需要与中控插件配置的日志服务器端口对应。</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>b. 配置防火墙，vim /etc/sysconfig/iptables 加入一条（以端口号 10998 为例）</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>-A INPUT -p tcp -m state --state NEW -m tcp --dport 10998 -j ACCEPT</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>c. 启动服务</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>./logger -d -w --conf default.conf</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span>cp -rP INSTALL </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span></span>
<span class="syntax--source syntax--shell"><span>rm -rf INSTALL</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] generating README.md ...</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> README.md </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>===========================================================================</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>[ACCESS]</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>DESC:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    xxx's access service, connecting gateway and cloud.</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>LIST:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    access          xxx's access service</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>Usage:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    ./access -h     show help</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>ATTENTION:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    Do not forget to config iptables or firewall's in/out strategies in</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>order to ensure the forwarding client can access the listening port.</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>===========================================================================</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>[PROXY]</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>DESC:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    xxx's access proxy service, assigning access service instances to</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>gateway.</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>LIST:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    proxy           xxx's access proxy service</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    client          fetch an access instance by sending a request</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>Usage:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    ./proxy -h      show help</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>ATTENTION:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    Do not forget to config iptables or firewall's in/out strategies in</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>order to ensure the forwarding client can access the listening port.</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>===========================================================================</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>[LOGGER]</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>DESC:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    xxx's logger server for HuaWei gateway</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>LIST:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    logger          xxx's logger server</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    client          test logger server's health by sending 'helloworld'</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>Usage:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    ./logger -h     show help</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    If logger is running, you can run client to test. For example, logger</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>is running on host 192.168.1.1, listening on port 10998, run</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>./client 192.168.1.1 10998 to test whether the logger service is working.</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>ATTENTION:</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    Do not forget to config iptables or firewall's in/out strategies in</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>order to ensure the forwarding client can access the listening port.</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>cp -rP README.md </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span></span>
<span class="syntax--source syntax--shell"><span>rm -rf README.md</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] archiving all ...</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>tar -czf </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span><span>.tar.gz </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] clean tmp files ...</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>ls -d </span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> grep -v </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>make_release.sh\|</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>PKGNAME</span></span><span>.tar.gz</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span> </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> xargs rm -rf</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] ==========================================</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO]        Congratulations, all is done</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>[INFO] ==========================================</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>?</span></span></span>
</pre>
<h2>openssl 自签证书</h2>
<h3>初始化 CA init_ca.sh</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shebang syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shebang syntax--shell"><span>#!</span></span><span>/bin/sh</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m===============================================\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33mFunction: construct your own private CA.\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33mSupported OS: CentOS 6.8\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m===============================================\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> check root permission</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>UID</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> 0 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;31m[Failed] superuser privileges are required\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;32m[Passed] superuser privileges meeted\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-e</span></span><span> /etc/pki/CA/cacert.pem </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e -n </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;31m[WARN] re-init CA? (Y/n)\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>while</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> 1 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>        </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>read</span></span><span> Confirm</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>        </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>Confirm</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>=</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>Y</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-o</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>Confirm</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>=</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>y</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] start to re-init CA\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>break</span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--keyword syntax--control syntax--shell"><span>elif</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>Confirm</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>=</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>n</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e -n </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;31m[ERROR] invalid option, re-init CA? (Y/n)\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>            </span><span class="syntax--keyword syntax--control syntax--shell"><span>continue</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--while-loop syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>OS=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>cat /etc/redhat-release </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $1 " " $3}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span>
<span class="syntax--source syntax--shell"><span>SupportedOS=</span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>CentOS 6.8</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>OS</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>=</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>SupportedOS</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;32m[Passed] OS: </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>OS</span></span><span>\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;31m[Failed] </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>SupportedOS</span></span><span> supported only\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> install openssl</span></span></span>
<span class="syntax--source syntax--shell"><span>Found=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>openssl version </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> grep </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>command not found</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-n</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>Found</span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] openssl installed\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] install openssl\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    yum install openssl -y </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /dev/null</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] generate CA's private key\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>umask 077</span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> openssl genrsa -out /etc/pki/CA/private/cakey.pem 2048</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] generate CACert\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> gen_cert.exp </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>#!/usr/bin/expect -f</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>set timeout 30</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>spawn openssl req -new -x509 -key /etc/pki/CA/private/cakey.pem -out \</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>/etc/pki/CA/cacert.pem -days 3655</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>expect {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Country Name (2 letter code)" {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "cn\r";</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "State or Province Name (full name)" {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "Guang Dong\r";</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Locality Name (eg, city)" {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "Shen Zhen\r";</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Organization Name (eg, company)" {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "XXX Tech Ltd.\r";</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Organizational Unit Name (eg, section)" {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "XXX's CA\r";</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Common Name (eg, your name or your server's hostname)" {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "xxx.cn\r";</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Email Address" {</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "cloud@xxx.cn\r";</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>}</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>chmod +x gen_cert.exp</span></span>
<span class="syntax--source syntax--shell"><span>./gen_cert.exp</span></span>
<span class="syntax--source syntax--shell"><span>rm -rf gen_cert.exp</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] CACert's information in detail:\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>openssl x509 -noout -text -in /etc/pki/CA/cacert.pem</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] Verify CACert's invalidism\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>openssl verify /etc/pki/CA/cacert.pem</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] init CA's serial\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span>touch /etc/pki/CA/{index.txt,serial}</span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> 01 </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /etc/pki/CA/serial</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] Congratulations! Everything is done.\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
</pre>
<h3>颁发证书 gen_cert.sh</h3>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shebang syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shebang syntax--shell"><span>#!</span></span><span>/bin/sh</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> check root permission</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--entity syntax--name syntax--function syntax--shell"><span>validate_superuser</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--shell"><span>()</span></span><span> </span><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>{</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>UID</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> 0 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;31m[Failed] superuser privileges are required\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;32m[Passed] superuser privileges meeted\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>}</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--entity syntax--name syntax--function syntax--shell"><span>usage</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--shell"><span>()</span></span><span> </span><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>{</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;31mUsage: </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>0</span></span><span> &lt;organization&gt; &lt;number&gt;\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33mOption:\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m    Organization   for example, Gateway or Access\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m    number         [1, 9999] number of certification(s) </span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span>generated in batch\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>}</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--entity syntax--name syntax--function syntax--shell"><span>introduction</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--shell"><span>()</span></span><span> </span><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>{</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m====================================================\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33mFunction: Issue Certification.\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33mSupported OS: CentOS 6.8\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m====================================================\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--function syntax--shell"><span class="syntax--meta syntax--scope syntax--group syntax--shell"><span class="syntax--punctuation syntax--definition syntax--group syntax--shell"><span>}</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>#</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> 2 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    usage</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>2</span></span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span>grep </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>^[1-9][0-9]\{0,3\}$</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span> </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /dev/null</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--variable syntax--other syntax--special syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>?</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-ne</span></span><span> 0 </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        usage</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;31m[ERROR] ARGUMENT INVALID\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>        </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>validate_superuser</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>introduction</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-e</span></span><span> /etc/pki/CA/cacert.pem </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] start to issue certification\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>OS=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>cat /etc/redhat-release </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> awk </span><span class="syntax--string syntax--quoted syntax--single syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>'</span></span><span>{print $1 " " $3}</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>'</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span>
<span class="syntax--source syntax--shell"><span>SupportedOS=</span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>CentOS 6.8</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>OS</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>=</span></span><span> </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>SupportedOS</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span>x </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;32m[Passed] OS: </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>OS</span></span><span>\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;31m[Failed] </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>SupportedOS</span></span><span> supported only\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>exit</span></span><span> 1</span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> install openssl</span></span></span>
<span class="syntax--source syntax--shell"><span>Found=</span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>openssl version </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>|</span></span><span> grep </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>command not found</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>if</span></span><span> </span><span class="syntax--meta syntax--scope syntax--logical-expression syntax--shell"><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>[</span></span><span> </span><span class="syntax--keyword syntax--operator syntax--logical syntax--shell"><span>-n</span></span><span> </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>Found</span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--logical-expression syntax--shell"><span>]</span></span></span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>then</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] openssl installed\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>else</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    </span><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] install openssl\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span>    yum install openssl -y </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /dev/null</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--if-block syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>fi</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>mkdir -p cert</span></span>
<span class="syntax--source syntax--shell"><span>rm -rf cert/</span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--string syntax--other syntax--math syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>((</span></span><span>count</span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--shell"><span>=</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--shell"><span>1</span></span><span>; count </span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--shell"><span>&lt;=</span></span><span> </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>2</span></span><span>; </span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--shell"><span>++</span></span><span> count</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>))</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] generate </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span>'s private key\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>umask 077</span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span>openssl genrsa -out ./cert/</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>key 2048</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] generate </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span>'s Cert\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>cat /etc/pki/CA/index.txt </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;&gt;</span></span><span> /etc/pki/CA/index.txt.bak</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>cat /dev/null </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /etc/pki/CA/index.txt</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> gen_cert.exp </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>#!/usr/bin/expect -f</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>set timeout 30</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>spawn openssl req -new -key ./cert/$1\.key -out ./cert/$1\.csr</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>expect {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Country Name (2 letter code)" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "cn\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "State or Province Name (full name)" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "Guang Dong\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Locality Name (eg, city)" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "Shen Zhen\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Organization Name (eg, company)" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "xxx Tech Ltd.\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Organizational Unit Name (eg, section)" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "$1\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Common Name (eg, your name or your server's hostname)" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "xxx.cn\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Email Address" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "cloud@xxx.cn\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "A challenge password" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "xxx666!\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "An optional company name" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "XXX Tech Ltd.\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>}</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>chmod +x gen_cert.exp</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>./gen_cert.exp</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> sign certification</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>cat </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> sign_cert.exp </span><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--operator syntax--heredoc syntax--shell"><span>&lt;&lt;</span></span><span> </span><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>#!/usr/bin/expect -f</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>set timeout 30</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>spawn openssl ca -in ./cert/$1\.csr -out ./cert/$1\.crt -days 3655</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>expect {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "Sign the certificate" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "y\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    "1 out of 1 certificate requests certified, commit" {</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        send "y\r";</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>        exp_continue</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>    }</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span>}</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--string syntax--unquoted syntax--heredoc syntax--shell"><span class="syntax--keyword syntax--control syntax--heredoc-token syntax--shell"><span>EOF</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>chmod +x sign_cert.exp</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>./sign_cert.exp</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--subshell syntax--shell"><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>(</span></span><span>umask 077</span><span class="syntax--keyword syntax--operator syntax--list syntax--shell"><span>;</span></span><span>touch ./cert/</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>pem</span><span class="syntax--punctuation syntax--definition syntax--subshell syntax--shell"><span>)</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>cat ./cert/</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>crt </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;&gt;</span></span><span> ./cert/</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>pem</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>cat ./cert/</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>key </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;&gt;</span></span><span> ./cert/</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>pem</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>openssl rsa -in ./cert/</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>pem -pubout -out ./cert/</span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>pub</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--comment syntax--line syntax--number-sign syntax--shell"><span class="syntax--punctuation syntax--definition syntax--comment syntax--shell"><span>#</span></span><span> rename</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>cd</span></span><span> cert </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /dev/null</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span>rm -rf </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span>csr</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>for</span></span><span> </span><span class="syntax--variable syntax--other syntax--loop syntax--shell"><span>file</span></span><span> </span><span class="syntax--keyword syntax--control syntax--shell"><span>in</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>ls </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>1</span></span><span class="syntax--constant syntax--character syntax--escape syntax--shell"><span>\.</span></span><span class="syntax--keyword syntax--operator syntax--glob syntax--shell"><span>*</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>do</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span>    mv </span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>file</span></span><span> </span><span class="syntax--string syntax--interpolated syntax--backtick syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>`</span></span><span>echo </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>count</span></span><span>-</span><span class="syntax--variable syntax--other syntax--normal syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>file</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span> </span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>`</span></span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--meta syntax--scope syntax--for-in-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>cd</span></span><span> - </span><span class="syntax--keyword syntax--operator syntax--redirect syntax--shell"><span>&gt;</span></span><span> /dev/null</span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--meta syntax--scope syntax--for-loop syntax--shell"><span class="syntax--keyword syntax--control syntax--shell"><span>done</span></span></span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span>rm -rf gen_cert.exp</span></span>
<span class="syntax--source syntax--shell"><span>rm -rf sign_cert.exp</span></span>
<span class="syntax--source syntax--shell"><span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] Total: </span><span class="syntax--variable syntax--other syntax--positional syntax--shell"><span class="syntax--punctuation syntax--definition syntax--variable syntax--shell"><span>$</span></span><span>2</span></span><span> certification(s).\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] Output Directory: ./cert\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
<span class="syntax--source syntax--shell"><span class="syntax--support syntax--function syntax--builtin syntax--shell"><span>echo</span></span><span> -e </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>\e[1;33m[INFO] Congratulations! Everything is done.\e[0m</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
</pre>
<h2>sudo 保存 vim 打开的文件</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>:w </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>!</span></span><span>sudo sh -c </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>cat &gt;'%'</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span><span> or :w </span><span class="syntax--keyword syntax--operator syntax--pipe syntax--shell"><span>!</span></span><span>sudo tee </span><span class="syntax--string syntax--quoted syntax--double syntax--shell"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell"><span>"</span></span><span>%</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell"><span>"</span></span></span></span>
</pre>
<h2>vagringd 内存泄露检测</h2>
<pre class="editor-colors lang-bash"><span class="syntax--source syntax--shell"><span>valgrind --log-file=valgrind.log --tool=memcheck --leak-check=full --show-reachable=no \</span></span>
<span class="syntax--source syntax--shell"><span>--workaround-gcc296-bugs=yes ./a.out</span></span>
</pre>
  </body>
</html>
